<head><script type="module">import{registerMvuSchema as e}from'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';var t={255:(e,t,a)=>{a.r(t),a.d(t,{ADVANCED_SKILLS:()=>r,ALL_SKILLS:()=>o,COMMON_SKILLS:()=>s,getSkillById:()=>c,getSkillsByType:()=>l});var n=a(962);const s=[{id:'s_tease',name:'æŒ‡å°–æŒ‘é€—',description:'ç”¨çµå·§çš„æŒ‡å°–åœ¨å¯¹æ–¹æ•æ„Ÿå¤„è½»æŸ”æ¸¸èµ°',effectDescription:'é€ æˆ60%æ€§æ–—åŠ›+5å¿«æ„Ÿä¼¤å®³',icon:'HandPointer',type:n.K.PHYSICAL,staminaCost:8,cooldown:0,castTime:0,damageFormula:[{source:n.DamageSource.SEX_POWER,coefficient:.6,baseValue:5}],accuracy:95,critModifier:5,buffs:[{type:n.A.SENSITIVE,value:15,isPercent:!0,duration:2,stackable:!0,maxStacks:3}],ignoreDefense:!1,canBeDodged:!0,canBeReflected:!1,hitCount:1,voiceLine:'è®©æˆ‘æ¥æ‰¾æ‰¾ä½ çš„å¼±ç‚¹...'},{id:'s_kiss',name:'æ·±å»',description:'ä¸€ä¸ªä»¤äººçª’æ¯çš„æ·±å»,å°ä½å¯¹æ–¹çš„å”‡èˆŒ',effectDescription:'é€ æˆ80%æ€§æ–—åŠ›+300%é­…åŠ›ä¼¤å®³',icon:'Kiss',type:n.K.PHYSICAL,staminaCost:12,cooldown:2,castTime:0,damageFormula:[{source:n.DamageSource.SEX_POWER,coefficient:.8,baseValue:8},{source:n.DamageSource.CHARM,coefficient:3,baseValue:0}],accuracy:90,critModifier:10,buffs:[{type:n.A.SILENCE,value:0,isPercent:!1,duration:1,stackable:!1}],ignoreDefense:!1,canBeDodged:!0,canBeReflected:!1,hitCount:1,voiceLine:'å˜˜...å®‰é™...'},{id:'s_strip',name:'è¡£ç‰©ç ´å',description:'ç²—æš´åœ°æ’•è£‚å¯¹æ–¹çš„è¡£ç‰©',effectDescription:'å‡å°‘å¯¹æ–¹å¿è€åŠ›20%',icon:'Scissors',type:n.K.PHYSICAL,staminaCost:10,cooldown:3,castTime:0,damageFormula:[{source:n.DamageSource.SEX_POWER,coefficient:.4,baseValue:3}],accuracy:85,critModifier:0,buffs:[{type:n.A.DEF_DOWN,value:20,isPercent:!0,duration:99,stackable:!0,maxStacks:5}],ignoreDefense:!0,canBeDodged:!0,canBeReflected:!1,hitCount:1,voiceLine:'ç©¿è¿™ä¹ˆå¤šå¹²å˜›?'},{id:'s_spank',name:'ç¾è€»æ‹æ‰“',description:'ç”¨åŠ›æ‹æ‰“å¯¹æ–¹çš„è‡€éƒ¨',effectDescription:'é€ æˆ50%æ€§æ–—åŠ›+4ä¼¤å®³,é™„åŠ ç¾è€»çŠ¶æ€',icon:'Hand',type:n.K.PHYSICAL,staminaCost:6,cooldown:1,castTime:0,damageFormula:[{source:n.DamageSource.SEX_POWER,coefficient:.5,baseValue:4}],accuracy:100,critModifier:15,buffs:[{type:n.A.SHAME,value:8,isPercent:!1,duration:2,stackable:!0,maxStacks:5}],ignoreDefense:!1,canBeDodged:!1,canBeReflected:!1,hitCount:1,voiceLine:'å¬è¿™å£°éŸ³,çœŸæ˜¯è‰²æƒ…å‘¢...'},{id:'s_dirtytalk',name:'æ±¡è¨€ç§½è¯­',description:'ç”¨ä¸‹æµçš„è¨€è¯­åˆºæ¿€å¯¹æ–¹',effectDescription:'é€ æˆ500%é­…åŠ›ä¼¤å®³,é™ä½æ„å¿—åŠ›5%',icon:'Comment',type:n.K.MENTAL,staminaCost:5,cooldown:0,castTime:0,damageFormula:[{source:n.DamageSource.CHARM,coefficient:5,baseValue:3}],accuracy:100,critModifier:5,buffs:[{type:n.A.WILLPOWER_DOWN,value:5,isPercent:!0,duration:2,stackable:!0,maxStacks:4}],ignoreDefense:!0,canBeDodged:!1,canBeReflected:!1,hitCount:1,voiceLine:'ä½ è¿™ä¸ªæ·«ä¹±çš„å®¶ä¼™...'},{id:'s_observe',name:'å¼±ç‚¹æ´å¯Ÿ',description:'ä»”ç»†è§‚å¯Ÿå¯¹æ–¹çš„ååº”',effectDescription:'ä¸‹æ¬¡æ”»å‡»æš´å‡»ç‡+50%',icon:'Eye',type:n.K.SUPPORT,staminaCost:6,cooldown:3,castTime:0,damageFormula:[],accuracy:100,critModifier:0,buffs:[{type:n.A.FOCUS,value:50,isPercent:!0,duration:1,stackable:!1},{type:n.A.CRIT_UP,value:30,isPercent:!0,duration:2,stackable:!1}],ignoreDefense:!1,canBeDodged:!1,canBeReflected:!1,hitCount:0,voiceLine:'æ‰¾åˆ°äº†...'},{id:'s_taunt',name:'å˜²è®½æŒ‘è¡…',description:'ç”¨è½»è”‘çš„è¯­æ°”å˜²è®½å¯¹æ–¹',effectDescription:'å¯¹æ–¹æ”»å‡»+20%ä½†é˜²å¾¡-25%',icon:'Ghost',staminaCost:8,cooldown:2,castTime:0,damageFormula:[{source:n.DamageSource.CHARM,coefficient:3,baseValue:2}],accuracy:100,critModifier:0,buffs:[{type:n.A.ATK_UP,value:20,isPercent:!0,duration:2,stackable:!1},{type:n.A.DEF_DOWN,value:25,isPercent:!0,duration:2,stackable:!1}],ignoreDefense:!0,canBeDodged:!1,canBeReflected:!1,hitCount:1,voiceLine:'å°±è¿™?æ‚é±¼~'},{id:'s_rest',name:'å–˜æ¯',description:'çŸ­æš‚çš„ä¼‘æ¯æ¥æ¢å¤ä½“åŠ›',effectDescription:'æ¢å¤15%è€åŠ›,é˜²å¾¡æå‡15%',icon:'Bed',type:n.K.SUPPORT,staminaCost:0,cooldown:4,castTime:0,damageFormula:[],accuracy:100,critModifier:0,buffs:[{type:n.A.REGEN,value:15,isPercent:!0,duration:2,stackable:!1},{type:n.A.DEF_UP,value:15,isPercent:!0,duration:2,stackable:!1}],ignoreDefense:!1,canBeDodged:!1,canBeReflected:!1,hitCount:0,voiceLine:'è®©æˆ‘æ­‡ä¸€ä¸‹...'}],r=[{id:'s_massage',name:'ç²¾æ²¹æŒ‰æ‘©',description:'æ¶‚æŠ¹ç²¾æ²¹è¿›è¡Œå…¨èº«æŒ‰æ‘©',effectDescription:'é€ æˆ120%æ€§æ–—åŠ›ä¼¤å®³,é˜²å¾¡-15%,æ•æ„Ÿ+25%',icon:'Droplets',type:n.K.PHYSICAL,staminaCost:18,cooldown:4,castTime:1,damageFormula:[{source:n.DamageSource.SEX_POWER,coefficient:1.2,baseValue:10}],accuracy:100,critModifier:0,buffs:[{type:n.A.DEF_DOWN,value:15,isPercent:!0,duration:3,stackable:!1},{type:n.A.SENSITIVE,value:25,isPercent:!0,duration:3,stackable:!1}],ignoreDefense:!1,canBeDodged:!1,canBeReflected:!1,hitCount:1,voiceLine:'æ”¾æ¾...è®©æˆ‘æ¥æœä¾ä½ ...'},{id:'s_bind',name:'æŸç¼š',description:'ç”¨ç»³ç´¢é™åˆ¶å¯¹æ–¹è¡ŒåŠ¨',effectDescription:'é€ æˆ30%æ€§æ–—åŠ›ä¼¤å®³,æŸç¼š2å›åˆ',icon:'Chain',type:n.K.CONTROL,staminaCost:18,cooldown:5,castTime:0,damageFormula:[{source:n.DamageSource.SEX_POWER,coefficient:.3,baseValue:5}],accuracy:80,critModifier:0,buffs:[{type:n.A.BIND,value:0,isPercent:!1,duration:2,stackable:!1},{type:n.A.DODGE_DOWN,value:30,isPercent:!0,duration:2,stackable:!1}],ignoreDefense:!1,canBeDodged:!0,canBeReflected:!1,hitCount:1,voiceLine:'ä¹–ä¹–ä¸è¦åŠ¨...'},{id:'s_pheromone',name:'è´¹æ´›è’™',description:'é‡Šæ”¾å‚¬æƒ…æ°”æ¯',effectDescription:'ä½¿å¯¹æ–¹è¿›å…¥å‘æƒ…çŠ¶æ€',icon:'Wind',type:n.K.CHARM,staminaCost:20,cooldown:5,castTime:0,damageFormula:[{source:n.DamageSource.CHARM,coefficient:3,baseValue:0}],accuracy:100,critModifier:0,buffs:[{type:n.A.HEAT,value:10,isPercent:!1,duration:4,stackable:!1}],ignoreDefense:!0,canBeDodged:!1,canBeReflected:!1,hitCount:1,voiceLine:'é—»åˆ°äº†å—?è¿™å°±æ˜¯æˆ‘çš„å‘³é“...'}],o=[...s,...r];function c(e){return o.find(t=>t.id===e)}function l(e){return o.filter(t=>t.type===e)}},426:(e,t)=>{t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a}},591:(e,t,a)=>{a.d(t,{applySkillBuffs:()=>r,executeAttack:()=>s});var n=a(962);function s(e,t,a){const s=[],r={damage:0,isCritical:!1,isDodged:!1,actualDamage:0,logs:[]},o=function(e,t){let a=0;if(console.info('[æˆ˜æ–—è®¡ç®—] è®¡ç®—åŸºç¡€ä¼¤å®³:'),console.info('  æŠ€èƒ½ä¼¤å®³å…¬å¼ç»„ä»¶æ•°é‡:',t.damageFormula.length),0===t.damageFormula.length)return console.warn('[æˆ˜æ–—è®¡ç®—] æŠ€èƒ½ä¼¤å®³å…¬å¼ä¸ºç©ºï¼Œè¿”å›0'),0;for(const s of t.damageFormula){let t=0;switch(s.source){case n.DamageSource.SEX_POWER:t=e.stats.sexPower;break;case n.DamageSource.CHARM:t=e.stats.charm;break;case n.DamageSource.LUCK:t=e.stats.luck;break;case n.DamageSource.WILLPOWER:t=e.stats.willpower;break;case n.DamageSource.FIXED:t=1}const r=t*s.coefficient+s.baseValue;a+=r,console.info(`  ç»„ä»¶: ${s.source}, æ¥æºå€¼: ${t}, ç³»æ•°: ${s.coefficient}, åŸºç¡€å€¼: ${s.baseValue}, ç»„ä»¶ä¼¤å®³: ${r}`)}const s=Math.max(0,Math.floor(a));return console.info(`  æ€»åŸºç¡€ä¼¤å®³: ${s}`),s}(e,a);s.push(`åŸºç¡€ä¼¤å®³: ${o}`);if(function(e,t,a,n){if(!n)return!1;const s=a-t+e/10,r=Math.max(10,Math.min(95,s));return 100*Math.random()>=r}(e.stats.luck,t.stats.evasion,a.accuracy,a.canBeDodged))return r.isDodged=!0,r.logs=s,s.push(`${t.name} é—ªé¿äº†æ”»å‡»!`),r;const c=function(e,t,a){const n=e+t/5+a,s=Math.max(0,Math.min(80,n));return 100*Math.random()<s}(e.stats.crit,e.stats.luck,a.critModifier);r.isCritical=c;let l=o;c&&(l=Math.floor(2*o),s.push(`æš´å‡»! ä¼¤å®³ç¿»å€: ${l}`));const i=l,u=t.stats.baseEndurance;console.info(`[executeAttack] å‡†å¤‡åº”ç”¨é˜²å¾¡å‡ä¼¤: åŸå§‹ä¼¤å®³=${i}, ç›®æ ‡å¿è€åŠ›=${u}, å¿½è§†é˜²å¾¡=${a.ignoreDefense}`);const m=function(e,t,a){if(a)return console.info(`[é˜²å¾¡å‡ä¼¤] å¿½è§†é˜²å¾¡ï¼Œä¼¤å®³ä¸å˜: ${e}`),e;const n=t+100,s=100*e/n,r=(t/n*100).toFixed(1);return console.info(`[é˜²å¾¡å‡ä¼¤] åŸºç¡€ä¼¤å®³: ${e}, ç›®æ ‡å¿è€åŠ›: ${t}`),console.info(`[é˜²å¾¡å‡ä¼¤] å‡ä¼¤å…¬å¼: ${e} * 100 / (${t} + 100) = ${e} * 100 / ${n}`),console.info(`[é˜²å¾¡å‡ä¼¤] è®¡ç®—è¿‡ç¨‹: ${e} * 100 = ${100*e}, ${100*e} / ${n} = ${s}`),console.info(`[é˜²å¾¡å‡ä¼¤] å‡ä¼¤æ¯”ä¾‹: ${r}%, æœ€ç»ˆä¼¤å®³: ${Math.floor(s)}`),Math.max(1,Math.floor(s))}(l,u,a.ignoreDefense);if(a.ignoreDefense)s.push(`åŸå§‹ä¼¤å®³: ${i}`),s.push(`å¿½è§†é˜²å¾¡: ä¼¤å®³ä¸å˜ï¼Œæœ€ç»ˆä¼¤å®³: ${m}`),l=m,console.info(`[executeAttack] å¿½è§†é˜²å¾¡ï¼Œä¼¤å®³ä¸å˜: ${m}`);else{const e=(u/(u+100)*100).toFixed(1),t=i-m;s.push(`åŸå§‹ä¼¤å®³: ${i}`),s.push(`ç›®æ ‡å¿è€åŠ›: ${u}`),s.push(`é˜²å¾¡å‡ä¼¤å…¬å¼: ${i} Ã— 100 Ã· (${u} + 100) = ${i} Ã— 100 Ã· ${u+100}`),s.push(`è®¡ç®—è¿‡ç¨‹: ${i} Ã— 100 = ${100*i}, ${100*i} Ã· ${u+100} = ${Math.floor(100*i/(u+100))}`),s.push(`å‡ä¼¤æ¯”ä¾‹: ${e}% (å‡ä¼¤ ${t} ç‚¹)`),s.push(`å‡ä¼¤åä¼¤å®³: ${m}`),l=m,console.info(`[executeAttack] é˜²å¾¡å‡ä¼¤å®Œæˆ: ${i} -> ${m}, æ—¥å¿—æ•°é‡=${s.length}`)}return l=function(e,t,a){let s=1;for(const e of t.statusEffects)e.effect.type===n.A.ATK_UP&&e.effect.isPercent?s+=e.effect.value/100:e.effect.type===n.A.ATK_DOWN&&e.effect.isPercent&&(s-=e.effect.value/100);for(const e of a.statusEffects)e.effect.type===n.A.DEF_UP&&e.effect.isPercent?s-=e.effect.value/100:(e.effect.type===n.A.DEF_DOWN&&e.effect.isPercent||e.effect.type===n.A.SENSITIVE&&e.effect.isPercent)&&(s+=e.effect.value/100);return Math.max(1,Math.floor(e*s))}(l,e,t),s.push(`æœ€ç»ˆä¼¤å®³: ${l}`),r.damage=o,r.actualDamage=l,r.logs=s,r}function r(e,t){const a=[];for(const n of t.buffs){const t=e.statusEffects.findIndex(e=>e.effect.type===n.type);if(t>=0&&!n.stackable)e.statusEffects[t].duration=n.duration,a.push(`åˆ·æ–°äº† ${e.statusEffects[t].name} çš„æŒç»­æ—¶é—´`);else if(t>=0&&n.stackable){const t=e.statusEffects.filter(e=>e.effect.type===n.type).length;if(!n.maxStacks||t<n.maxStacks){const s={id:`${n.type}_${Date.now()}`,name:o(n.type),duration:n.duration,icon:'ğŸ­',effect:n,type:c(n.type)?'debuff':'buff'};e.statusEffects.push(s),a.push(`æ·»åŠ äº† ${s.name} (${t+1}å±‚)`)}else a.push(`${o(n.type)} å·²è¾¾æœ€å¤§å±‚æ•°`)}else{const t={id:`${n.type}_${Date.now()}`,name:o(n.type),duration:n.duration,icon:'ğŸ­',effect:n,type:c(n.type)?'debuff':'buff'};e.statusEffects.push(t),a.push(`æ·»åŠ äº† ${t.name}`)}}return a}function o(e){return{[n.A.ATK_UP]:'æ”»å‡»æå‡',[n.A.DEF_UP]:'é˜²å¾¡æå‡',[n.A.ATK_DOWN]:'æ”»å‡»ä¸‹é™',[n.A.DEF_DOWN]:'é˜²å¾¡ä¸‹é™',[n.A.SENSITIVE]:'æ•æ„Ÿ',[n.A.WILLPOWER_DOWN]:'æ„å¿—ä¸‹é™',[n.A.SILENCE]:'æ²‰é»˜',[n.A.BIND]:'æŸç¼š',[n.A.DODGE_DOWN]:'é—ªé¿ä¸‹é™',[n.A.CRIT_UP]:'æš´å‡»æå‡',[n.A.FOCUS]:'é›†ä¸­',[n.A.SHAME]:'ç¾è€»',[n.A.HEAT]:'å‘æƒ…',[n.A.FEAR]:'ææƒ§',[n.A.DOT_LUST]:'æŒç»­å¿«æ„Ÿ',[n.A.REGEN]:'æŒç»­å›å¤',[n.A.ENDURANCE_UP]:'å¿è€æå‡'}[e]||'æœªçŸ¥æ•ˆæœ'}function c(e){return[n.A.ATK_DOWN,n.A.DEF_DOWN,n.A.SENSITIVE,n.A.WILLPOWER_DOWN,n.A.SILENCE,n.A.BIND,n.A.DODGE_DOWN,n.A.SHAME,n.A.HEAT,n.A.FEAR,n.A.DOT_LUST].includes(e)}},962:(e,t,a)=>{var n,s,r;a.d(t,{A:()=>r,DamageSource:()=>n,K:()=>s}),function(e){e.SEX_POWER='sex_power',e.CHARM='charm',e.LUCK='luck',e.WILLPOWER='willpower',e.FIXED='fixed'}(n||(n={})),function(e){e.PHYSICAL='physical',e.MENTAL='mental',e.CHARM='charm',e.SUPPORT='support',e.CONTROL='control',e.ULTIMATE='ultimate'}(s||(s={})),function(e){e.ATK_UP='atk_up',e.DEF_UP='def_up',e.ATK_DOWN='atk_down',e.DEF_DOWN='def_down',e.SENSITIVE='sensitive',e.WILLPOWER_DOWN='willpower_down',e.SILENCE='silence',e.BIND='bind',e.DODGE_DOWN='dodge_down',e.CRIT_UP='crit_up',e.FOCUS='focus',e.SHAME='shame',e.HEAT='heat',e.FEAR='fear',e.DOT_LUST='dot_lust',e.REGEN='regen',e.ENDURANCE_UP='endurance_up'}(r||(r={}))}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})};const s=Vue,r={class:'bg-ambience'},o=(0,s.defineComponent)({__name:'BackgroundAmbience',setup(e){const t=(0,s.ref)([]),a=(0,s.ref)([]);return(0,s.onMounted)(()=>{t.value=Array.from({length:20}).map((_,e)=>({id:e,left:100*Math.random(),delay:-20*Math.random(),duration:15+20*Math.random()})),a.value=Array.from({length:8}).map((_,e)=>({id:e+100,left:100*Math.random(),delay:-20*Math.random(),duration:10+15*Math.random(),scale:.5+.5*Math.random()}))}),(e,n)=>((0,s.openBlock)(),(0,s.createElementBlock)('div',r,[(0,s.createCommentVNode)(' åŸºç¡€æ¸å˜ '),n[0]||(n[0]=(0,s.createElementVNode)('div',{class:'bg-gradient'},null,-1)),(0,s.createCommentVNode)(' çº¹ç†å åŠ  '),n[1]||(n[1]=(0,s.createElementVNode)('div',{class:'bg-texture'},null,-1)),(0,s.createCommentVNode)(' å…‰æ™•æ•ˆæœ '),n[2]||(n[2]=(0,s.createElementVNode)('div',{class:'glow glow-top'},null,-1)),n[3]||(n[3]=(0,s.createElementVNode)('div',{class:'glow glow-bottom'},null,-1)),(0,s.createCommentVNode)(' æ¼‚æµ®å°˜åŸƒ '),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(t.value,e=>((0,s.openBlock)(),(0,s.createElementBlock)('div',{key:e.id,class:'dust-particle',style:(0,s.normalizeStyle)({left:`${e.left}%`,animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`})},null,4))),128)),(0,s.createCommentVNode)(' é£˜è½èŠ±ç“£ '),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.value,e=>((0,s.openBlock)(),(0,s.createElementBlock)('div',{key:e.id,class:'petal',style:(0,s.normalizeStyle)({left:`${e.left}%`,transform:`scale(${e.scale})`,animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`})},null,4))),128)),(0,s.createCommentVNode)(' é—ªçƒé˜´å½± '),n[4]||(n[4]=(0,s.createElementVNode)('div',{class:'flicker-overlay'},null,-1)),(0,s.createCommentVNode)(' æš—è§’ '),n[5]||(n[5]=(0,s.createElementVNode)('div',{class:'vignette'},null,-1))]))}});var c=n(426);const l=(0,c.A)(o,[['__scopeId','data-v-5c5045ec']]),i=(0,s.defineComponent)({__name:'Card',props:{hover:{type:Boolean,default:!1}},emits:['click'],setup:e=>(t,a)=>((0,s.openBlock)(),(0,s.createElementBlock)('div',{class:(0,s.normalizeClass)(['card',{'card-hover':e.hover}]),onClick:a[0]||(a[0]=e=>t.$emit('click'))},[(0,s.renderSlot)(t.$slots,'default')],2))}),u=(0,c.A)(i,[['__scopeId','data-v-61077dd9']]),m={class:'progress-container'},d={class:'progress-header'},f={class:'progress-label'},p=['innerHTML'],v={key:0,class:'progress-value'},g=(0,s.defineComponent)({__name:'ProgressBar',props:{value:{},max:{},color:{},label:{default:''},showValue:{type:Boolean,default:!0},size:{default:'md'},icon:{default:''}},setup(e){const t=e,a=(0,s.computed)(()=>Math.min(Math.max(t.value/t.max*100,0),100));return(t,n)=>((0,s.openBlock)(),(0,s.createElementBlock)('div',m,[(0,s.createElementVNode)('div',d,[(0,s.createElementVNode)('span',f,[e.icon?((0,s.openBlock)(),(0,s.createElementBlock)('span',{key:0,class:'progress-icon',innerHTML:e.icon},null,8,p)):(0,s.createCommentVNode)('v-if',!0),(0,s.createTextVNode)(' '+(0,s.toDisplayString)(e.label),1)]),e.showValue?((0,s.openBlock)(),(0,s.createElementBlock)('span',v,(0,s.toDisplayString)(e.value)+' / '+(0,s.toDisplayString)(e.max),1)):(0,s.createCommentVNode)('v-if',!0)]),(0,s.createElementVNode)('div',{class:(0,s.normalizeClass)(['progress-track',`track-${e.color}`])},[(0,s.createElementVNode)('div',{class:(0,s.normalizeClass)(['progress-fill',`fill-${e.color}`]),style:(0,s.normalizeStyle)({width:`${a.value}%`})},[...n[0]||(n[0]=[(0,s.createElementVNode)('div',{class:'shimmer'},null,-1)])],6)],2)]))}}),h=(0,c.A)(g,[['__scopeId','data-v-07aaeb53']]),y={class:'stat-item'},w={class:'stat-value'},E={class:'stat-item'},b={class:'stat-value'},k={class:'stat-item'},N={class:'stat-value'},C={class:'stat-item'},V={class:'stat-value'},x={class:'stat-item'},D={class:'stat-value'},M={class:'stat-item'},S={class:'stat-value'},B={class:'stat-item stat-full'},P={class:'stat-value'},A=(0,s.defineComponent)({__name:'StatsPanel',props:{stats:{},compact:{type:Boolean,default:!1}},setup:e=>(t,a)=>((0,s.openBlock)(),(0,s.createElementBlock)('div',{class:(0,s.normalizeClass)(['stats-panel',{'stats-compact':e.compact}])},[(0,s.createElementVNode)('div',y,[a[0]||(a[0]=(0,s.createElementVNode)('div',{class:'stat-info text-pink-400'},[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'14',height:'14',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('polygon',{points:'13 2 3 14 12 14 11 22 21 10 12 10 13 2'})]),(0,s.createElementVNode)('span',{class:'stat-label'},'æ€§æ–—åŠ›')],-1)),(0,s.createElementVNode)('span',w,(0,s.toDisplayString)(e.stats.sexPower),1)]),(0,s.createElementVNode)('div',E,[a[1]||(a[1]=(0,s.createElementVNode)('div',{class:'stat-info text-green-400'},[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'14',height:'14',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('path',{d:'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z'})]),(0,s.createElementVNode)('span',{class:'stat-label'},'å¿è€åŠ›')],-1)),(0,s.createElementVNode)('span',b,(0,s.toDisplayString)(e.stats.baseEndurance),1)]),(0,s.createElementVNode)('div',k,[a[2]||(a[2]=(0,s.createStaticVNode)('<div class="stat-info text-cyan-400" data-v-0a8a4b1c><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0a8a4b1c><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2" data-v-0a8a4b1c></path><path d="M9.6 4.6A2 2 0 1 1 11 8H2" data-v-0a8a4b1c></path><path d="M12.6 19.4A2 2 0 1 0 14 16H2" data-v-0a8a4b1c></path></svg><span class="stat-label" data-v-0a8a4b1c>é—ªé¿ç‡</span></div>',1)),(0,s.createElementVNode)('span',N,(0,s.toDisplayString)(e.stats.evasion)+'%',1)]),(0,s.createElementVNode)('div',C,[a[3]||(a[3]=(0,s.createStaticVNode)('<div class="stat-info text-orange-400" data-v-0a8a4b1c><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0a8a4b1c><circle cx="12" cy="12" r="10" data-v-0a8a4b1c></circle><line x1="22" y1="12" x2="18" y2="12" data-v-0a8a4b1c></line><line x1="6" y1="12" x2="2" y2="12" data-v-0a8a4b1c></line><line x1="12" y1="6" x2="12" y2="2" data-v-0a8a4b1c></line><line x1="12" y1="22" x2="12" y2="18" data-v-0a8a4b1c></line></svg><span class="stat-label" data-v-0a8a4b1c>æš´å‡»ç‡</span></div>',1)),(0,s.createElementVNode)('span',V,(0,s.toDisplayString)(e.stats.crit)+'%',1)]),(0,s.createElementVNode)('div',x,[a[4]||(a[4]=(0,s.createElementVNode)('div',{class:'stat-info text-rose-400'},[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'14',height:'14',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('path',{d:'M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z'})]),(0,s.createElementVNode)('span',{class:'stat-label'},'é­…åŠ›')],-1)),(0,s.createElementVNode)('span',D,(0,s.toDisplayString)(e.stats.charm),1)]),(0,s.createElementVNode)('div',M,[a[5]||(a[5]=(0,s.createElementVNode)('div',{class:'stat-info text-yellow-400'},[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'14',height:'14',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('path',{d:'m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z'})]),(0,s.createElementVNode)('span',{class:'stat-label'},'å¹¸è¿')],-1)),(0,s.createElementVNode)('span',S,(0,s.toDisplayString)(e.stats.luck),1)]),(0,s.createElementVNode)('div',B,[a[6]||(a[6]=(0,s.createStaticVNode)('<div class="stat-info text-purple-400" data-v-0a8a4b1c><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0a8a4b1c><path d="M12 2a8 8 0 1 0 8 8H4a8 8 0 1 0 8-8z" data-v-0a8a4b1c></path><path d="M12 2v8" data-v-0a8a4b1c></path><path d="m4.93 10.93 1.41 1.41" data-v-0a8a4b1c></path><path d="m2 18 2 2" data-v-0a8a4b1c></path><path d="m22 18-2 2" data-v-0a8a4b1c></path><path d="m17.66 12.34 1.41-1.41" data-v-0a8a4b1c></path></svg><span class="stat-label" data-v-0a8a4b1c>æ„å¿—åŠ›</span></div>',1)),(0,s.createElementVNode)('span',P,(0,s.toDisplayString)(e.stats.willpower),1)])],2))}),T=(0,c.A)(A,[['__scopeId','data-v-0a8a4b1c']]),I={class:'character-panel'},R={class:'name-text'},L={key:0,class:'intention-hint'},O={class:'avatar-container'},j=['src','alt'],F={key:0,class:'mobile-warning'},W={class:'stats-overlay'},U={class:'bars-container'},H={class:'climax-bar'},K=(0,s.defineComponent)({__name:'CharacterPanel',props:{character:{},isEnemy:{type:Boolean},turnState:{},enemyIntention:{}},setup:e=>(t,a)=>((0,s.openBlock)(),(0,s.createElementBlock)('div',I,[(0,s.createCommentVNode)(' åç§°æ ‡ç­¾ '),(0,s.createElementVNode)('div',{class:(0,s.normalizeClass)(['name-badge',e.isEnemy?'badge-enemy':'badge-player'])},[(0,s.createElementVNode)('span',R,(0,s.toDisplayString)(e.character.name),1),(0,s.createCommentVNode)(' æ•Œäººé¢„å‘Šæç¤º '),e.isEnemy&&'playerInput'===e.turnState.phase&&e.enemyIntention?((0,s.openBlock)(),(0,s.createElementBlock)('div',L,[a[0]||(a[0]=(0,s.createElementVNode)('span',{class:'intention-icon'},'âš ï¸',-1)),(0,s.createTextVNode)(' é¢„å‘Š: '+(0,s.toDisplayString)(e.enemyIntention.name),1)])):(0,s.createCommentVNode)('v-if',!0)],2),(0,s.createCommentVNode)(' å¤´åƒä¸æ‚¬åœå±æ€§ '),(0,s.createElementVNode)('div',O,[(0,s.createElementVNode)('div',{class:(0,s.normalizeClass)(['avatar-glow',e.isEnemy?'glow-enemy':'glow-player'])},null,2),(0,s.createElementVNode)('img',{src:e.character.avatarUrl,alt:e.character.name,class:(0,s.normalizeClass)(['avatar-image',{'avatar-enemy':e.isEnemy,'avatar-player':!e.isEnemy,'avatar-pulse':'processing'===e.turnState.phase&&!e.isEnemy,'avatar-scale':'enemyAction'===e.turnState.phase&&e.isEnemy,'avatar-climax':'climaxResolution'===e.turnState.phase&&e.turnState.climaxTarget===(e.isEnemy?'enemy':'player')}])},null,10,j),(0,s.createCommentVNode)(' ç§»åŠ¨ç«¯é¢„å‘Šå›¾æ ‡ '),e.isEnemy&&'playerInput'===e.turnState.phase&&e.enemyIntention?((0,s.openBlock)(),(0,s.createElementBlock)('div',F,[...a[1]||(a[1]=[(0,s.createElementVNode)('span',null,'!',-1)])])):(0,s.createCommentVNode)('v-if',!0),(0,s.createCommentVNode)(' å±æ€§æ‚¬åœé¢æ¿ '),(0,s.createElementVNode)('div',W,[a[2]||(a[2]=(0,s.createElementVNode)('div',{class:'overlay-title'},'è¯¦ç»†å±æ€§',-1)),(0,s.createVNode)(T,{stats:e.character.stats,compact:''},null,8,['stats'])])]),(0,s.createCommentVNode)(' çŠ¶æ€æ¡ '),(0,s.createElementVNode)('div',U,[(0,s.createVNode)(h,{value:e.character.stats.currentEndurance,max:e.character.stats.maxEndurance,color:'green',label:'ä½“åŠ›','show-value':!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>'},null,8,['value','max']),(0,s.createVNode)(h,{value:e.character.stats.currentPleasure,max:e.character.stats.maxPleasure,color:'pink',label:'å¿«æ„Ÿ','show-value':!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/><path d="M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27"/></svg>'},null,8,['value','max']),(0,s.createElementVNode)('div',H,[(0,s.createVNode)(h,{value:e.character.stats.climaxCount,max:e.character.stats.maxClimaxCount,color:'purple',label:'é«˜æ½®','show-value':!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>'},null,8,['value','max'])])])]))}),q=(0,c.A)(K,[['__scopeId','data-v-75f7a09e']]),X={class:'log-toggle'},G={key:0,xmlns:'http://www.w3.org/2000/svg',width:'14',height:'14',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},Y={key:1,xmlns:'http://www.w3.org/2000/svg',width:'14',height:'14',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},Z={key:0,class:'log-preview'},J={class:'log-turn'},Q={key:0,class:'log-empty'},ee={class:'log-turn'},te=(0,s.defineComponent)({__name:'CombatLog',props:{logs:{}},setup(e){const t=e,a=(0,s.ref)(!0),n=(0,s.ref)(null);return(0,s.watch)(()=>t.logs.length,()=>{a.value&&(0,s.nextTick)(()=>{n.value?.scrollIntoView({behavior:'smooth'})})}),(t,r)=>((0,s.openBlock)(),(0,s.createElementBlock)('div',{class:(0,s.normalizeClass)(['combat-log',{'log-expanded':a.value}])},[(0,s.createCommentVNode)(' å¤´éƒ¨åˆ‡æ¢æ  '),(0,s.createElementVNode)('div',{class:'log-header',onClick:r[0]||(r[0]=e=>a.value=!a.value)},[r[3]||(r[3]=(0,s.createElementVNode)('div',{class:'log-title'},[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'12',height:'12',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('path',{d:'M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z'})]),(0,s.createElementVNode)('span',null,'æˆ˜æ–—æ—¥å¿—')],-1)),(0,s.createElementVNode)('div',X,[a.value?((0,s.openBlock)(),(0,s.createElementBlock)('svg',G,[...r[1]||(r[1]=[(0,s.createElementVNode)('path',{d:'m6 9 6 6 6-6'},null,-1)])])):((0,s.openBlock)(),(0,s.createElementBlock)('svg',Y,[...r[2]||(r[2]=[(0,s.createElementVNode)('path',{d:'m18 15-6-6-6 6'},null,-1)])]))])]),(0,s.createCommentVNode)(' æŠ˜å æ—¶æ˜¾ç¤ºæœ€æ–°æ—¥å¿— '),!a.value&&e.logs.length>0?((0,s.openBlock)(),(0,s.createElementBlock)('div',Z,[(0,s.createElementVNode)('span',J,'['+(0,s.toDisplayString)(e.logs[e.logs.length-1].turn)+']',1),(0,s.createTextVNode)(' '+(0,s.toDisplayString)(e.logs[e.logs.length-1].message),1)])):(0,s.createCommentVNode)('v-if',!0),(0,s.createCommentVNode)(' å±•å¼€çš„æ—¥å¿—åˆ—è¡¨ '),(0,s.createElementVNode)('div',{class:(0,s.normalizeClass)(['log-content',{'log-hidden':!a.value}])},[0===e.logs.length?((0,s.openBlock)(),(0,s.createElementBlock)('p',Q,'æˆ˜æ–—å³å°†å¼€å§‹...')):(0,s.createCommentVNode)('v-if',!0),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(e.logs,e=>((0,s.openBlock)(),(0,s.createElementBlock)('div',{key:e.id,class:(0,s.normalizeClass)(['log-entry',{'log-critical':'critical'===e.type,'log-damage':'damage'===e.type,'log-heal':'heal'===e.type,'log-info':'info'===e.type}])},[(0,s.createElementVNode)('span',ee,'['+(0,s.toDisplayString)(e.turn)+']',1),(0,s.createTextVNode)(' '+(0,s.toDisplayString)(e.message),1)],2))),128)),(0,s.createElementVNode)('div',{ref_key:'bottomRef',ref:n},null,512)],2)],2))}}),ae=(0,c.A)(te,[['__scopeId','data-v-81b1ad36']]),ne={class:'effect-content'},se={class:'effect-icon'},re={class:'effect-text'},oe=(0,s.defineComponent)({__name:'CombatEffect',props:{type:{},show:{type:Boolean}},setup(e){const t=e,a={critical:'ğŸ’¥',dodge:'âœ¨',climax:'ğŸ’«',victory:'ğŸ‰',defeat:'ğŸ’”'},n={critical:'æš´å‡»ï¼',dodge:'é—ªé¿ï¼',climax:'é«˜æ½®ï¼',victory:'èƒœåˆ©ï¼',defeat:'è´¥åŒ—...'},r=(0,s.ref)(a[t.type]),o=(0,s.ref)(n[t.type]),c=(0,s.ref)(t.type);return(0,s.watch)(()=>t.type,e=>{r.value=a[e],o.value=n[e],c.value=e}),(t,a)=>((0,s.openBlock)(),(0,s.createBlock)(s.Teleport,{to:'body'},[(0,s.createVNode)(s.Transition,{name:'effect-fade'},{default:(0,s.withCtx)(()=>[e.show?((0,s.openBlock)(),(0,s.createElementBlock)('div',{key:0,class:(0,s.normalizeClass)(['combat-effect',c.value])},[(0,s.createElementVNode)('div',ne,[(0,s.createElementVNode)('div',se,(0,s.toDisplayString)(r.value),1),(0,s.createElementVNode)('div',re,(0,s.toDisplayString)(o.value),1)])],2)):(0,s.createCommentVNode)('v-if',!0)]),_:1})]))}}),ce=(0,c.A)(oe,[['__scopeId','data-v-6dadf61e']]),le=(e,t,a='info')=>({id:Math.random().toString(36).substr(2,9),turn:0,message:e,source:t,type:a}),ie=[{id:'s1',name:'æŒ‘é€—è¨€è¯­',description:'è½»å£°ç»†è¯­ï¼Œæ”»å‡»æ•Œæ–¹ç²¾ç¥ï¼Œé€ æˆå°‘é‡å¿«æ„Ÿä¼¤å®³ã€‚',cost:5,type:'attack',cooldown:0,currentCooldown:0,effect:(e,t)=>{const a=Math.floor(1.5*e.stats.charm+.5*e.stats.sexPower);return t.stats.currentPleasure+=a,le(`${e.name} ä½¿ç”¨ [æŒ‘é€—è¨€è¯­]ï¼Œæ¶ˆè€—ä½“åŠ›ï¼Œé€ æˆäº† ${a} ç‚¹å¿«æ„Ÿï¼`,'player','damage')}},{id:'s2',name:'ç»å¯¹é¢†åŸŸ',description:'è°ƒæ•´å§¿æ€ï¼Œå¤§å¹…æå‡æœ¬å›åˆé—ªé¿ç‡ã€‚',cost:15,type:'buff',cooldown:3,currentCooldown:0,effect:(e,t)=>le(`${e.name} å±•å¼€ [ç»å¯¹é¢†åŸŸ]ï¼Œæ¶ˆè€—ä½“åŠ›æå‡é—ªé¿ï¼`,'player','info')},{id:'s3',name:'å¿…æ€Â·çº¯çˆ±æˆ˜ç¥',description:'æ¶ˆè€—å¤§é‡ä½“åŠ›ï¼Œé€ æˆåŸºäºæ€§æ–—åŠ›çš„å·¨é¢ä¼¤å®³ã€‚',cost:40,type:'ultimate',cooldown:5,currentCooldown:0,effect:(e,t)=>{const a=Math.floor(3.5*e.stats.sexPower);return t.stats.currentPleasure+=a,le(`${e.name} å‘åŠ¨ [å¿…æ€Â·çº¯çˆ±æˆ˜ç¥]ï¼Œé€ æˆ ${a} ç‚¹æš´å‡»å¿«æ„Ÿï¼`,'player','critical')}}],ue=[{id:'e1',name:'å¼ºç¡¬æ‰‹æ®µ',description:'æ— è§†é˜²å¾¡çš„ç²—æš´æ”»å‡»ï¼Œå‰Šå‡è€åŠ›ã€‚',cost:0,type:'attack',cooldown:0,currentCooldown:0,effect:(e,t)=>(t.stats.currentEndurance-=15,le(`${e.name} ä½¿ç”¨ [å¼ºç¡¬æ‰‹æ®µ]ï¼Œä½ çš„è€åŠ›å‡å°‘äº† 15ï¼`,'enemy','damage'))},{id:'e2',name:'æ·±æ¸Šå‡è§†',description:'é™ä½å¯¹æ‰‹çš„è€åŠ›ã€‚',cost:0,type:'debuff',cooldown:2,currentCooldown:0,effect:(e,t)=>(t.stats.currentEndurance-=10,le(`${e.name} æ–½å±• [æ·±æ¸Šå‡è§†]ï¼Œä½ çš„è€åŠ›è¢«å‰Šå¼±äº† 10 ç‚¹ã€‚`,'enemy','damage'))},{id:'e3',name:'è§¦æ‰‹çº ç¼ ',description:'é€ æˆæŒç»­å¿«æ„Ÿã€‚',cost:0,type:'attack',cooldown:3,currentCooldown:0,effect:(e,t)=>(t.stats.currentPleasure+=25,le(`${e.name} ä½¿ç”¨ [è§¦æ‰‹çº ç¼ ]ï¼Œå¿«æ„Ÿä¸Šå‡äº† 25 ç‚¹ï¼`,'enemy','damage'))}],me=[{id:'i1',name:'å¼ºèµ°é¥®æ–™',description:'æ¢å¤ 30 ç‚¹è€åŠ›ã€‚',quantity:3,staminaRestore:30,effect:(e,t)=>(e.stats.currentEndurance=Math.min(e.stats.maxEndurance,e.stats.currentEndurance+30),le(`${e.name} å–ä¸‹ [å¼ºèµ°é¥®æ–™]ï¼Œè€åŠ›æ¢å¤äº†ã€‚`,'player','heal'))},{id:'i2',name:'æŠ‘åˆ¶å‰‚',description:'å‡å°‘ 20 ç‚¹å½“å‰å¿«æ„Ÿã€‚',quantity:2,pleasureReduce:20,effect:(e,t)=>(e.stats.currentPleasure=Math.max(0,e.stats.currentPleasure-20),le(`${e.name} æ³¨å°„äº† [æŠ‘åˆ¶å‰‚]ï¼Œèº«ä½“ç¨å¾®å†·å´ä¸‹æ¥ã€‚`,'player','heal'))}];const de={class:'combat-wrapper'},fe={class:'combat-header'},pe={class:'header-right'},ve={class:'turn-counter'},ge={class:'phase-indicator'},he={class:'combat-arena'},ye={class:'combat-footer'},we={class:'footer-content'},Ee={class:'log-section'},_e={class:'action-section'},be={key:0,class:'action-header'},ke={key:1,class:'action-header'},$e={class:'waiting-text'},Ne={class:'action-grid'},Ce={key:0,class:'processing-overlay'},Ve={key:'main',class:'menu-main'},xe={key:'skills',class:'menu-skills'},ze={key:0,class:'cooldown-overlay'},De={class:'cooldown-count'},Me={class:'skill-header'},Se={class:'skill-desc'},Be={key:1,class:'skill-effect'},Pe={class:'effect-value'},Ae={key:'items',class:'menu-items'},Te={class:'item-header'},Ie={class:'item-name'},Re={class:'item-quantity'},Le={class:'item-desc'},Oe={key:0,class:'item-effect'},je={key:0,class:'effect-stamina'},Fe={key:1,class:'effect-pleasure'},We={key:1,class:'empty-items'},Ue={key:0,class:'result-overlay'},He={class:'result-content'},Ke=(0,s.defineComponent)({__name:'app',setup(e){const t=(0,s.ref)({id:'player',name:'å­¦å›­å¶åƒ',avatarUrl:'https://picsum.photos/400/600?random=1',isPlayer:!0,statusEffects:[],items:me.map(e=>({...e})),skills:ie.map(e=>({...e})),stats:{maxEndurance:100,currentEndurance:100,maxPleasure:100,currentPleasure:0,willpower:100,baseWillpower:100,climaxCount:0,maxClimaxCount:3,sexPower:25,baseEndurance:15,evasion:10,crit:5,charm:30,luck:15}}),a=(0,s.ref)({id:'enemy',name:'é£çºªå§”å‘˜é•¿',avatarUrl:'https://picsum.photos/400/600?random=2',isPlayer:!1,statusEffects:[],items:[],skills:ue.map(e=>({...e})),stats:{maxEndurance:150,currentEndurance:150,maxPleasure:100,currentPleasure:0,willpower:80,baseWillpower:80,climaxCount:0,maxClimaxCount:3,sexPower:20,baseEndurance:20,evasion:5,crit:10,charm:10,luck:5}}),r=(0,s.reactive)({currentTurn:1,phase:'playerInput',enemyIntention:null,climaxTarget:null}),o=(0,s.ref)([]),c=(0,s.ref)('main'),i=(0,s.ref)(!0),m=(0,s.ref)(0),d=(0,s.ref)(0),f=(0,s.ref)(null),p=(0,s.ref)(!1);function v(){try{if('function'==typeof getChatMessages){const e=getChatMessages(-1,{role:'user'});if(e&&e.length>0){const t=e[e.length-1];if(t?.name)return t.name}}const e=window;if(e.chat?.characters&&e.chat.characters.length>0){const t=e.chat.characters.find(e=>e.is_user||'user'===e.role);if(t?.name)return t.name}if(e.SillyTavern?.chat?.characters){const t=e.SillyTavern.chat.characters.find(e=>e.is_user||'user'===e.role);if(t?.name)return t.name}}catch(e){console.warn('[æˆ˜æ–—ç•Œé¢] è·å–ç”¨æˆ·åå¤±è´¥',e)}return'ç©å®¶'}async function g(){try{await waitGlobalInitialized('Mvu');const e=Mvu.getMvuData({type:'message',message_id:'latest'});if(!e?.stat_data)return;const s=e.stat_data,o=v();t.value.name=o;const c=_.get(s,'æ€§æ–—ç³»ç»Ÿ.èƒœè´Ÿè§„åˆ™.é«˜æ½®æ¬¡æ•°ä¸Šé™',3);t.value.stats.maxEndurance=_.get(s,'æ ¸å¿ƒçŠ¶æ€.$æœ€å¤§è€åŠ›',100),t.value.stats.currentEndurance=_.get(s,'æ ¸å¿ƒçŠ¶æ€.$è€åŠ›',100),t.value.stats.maxPleasure=_.get(s,'æ ¸å¿ƒçŠ¶æ€.$æœ€å¤§å¿«æ„Ÿ',100),t.value.stats.currentPleasure=_.get(s,'æ ¸å¿ƒçŠ¶æ€.$å¿«æ„Ÿ',0),t.value.stats.willpower=_.get(s,'æ ¸å¿ƒçŠ¶æ€.æ„å¿—åŠ›',100),t.value.stats.baseWillpower=_.get(s,'æ ¸å¿ƒçŠ¶æ€.$åŸºç¡€æ„å¿—åŠ›',100),t.value.stats.charm=_.get(s,'æ ¸å¿ƒçŠ¶æ€._é­…åŠ›',10),t.value.stats.luck=_.get(s,'æ ¸å¿ƒçŠ¶æ€._å¹¸è¿',10),t.value.stats.evasion=_.get(s,'æ ¸å¿ƒçŠ¶æ€._é—ªé¿ç‡',0),t.value.stats.crit=_.get(s,'æ ¸å¿ƒçŠ¶æ€._æš´å‡»ç‡',0),t.value.stats.sexPower=_.get(s,'æ€§æ–—ç³»ç»Ÿ.å®æ—¶æ€§æ–—åŠ›',25),t.value.stats.baseEndurance=_.get(s,'æ€§æ–—ç³»ç»Ÿ.å®æ—¶å¿è€åŠ›',15),t.value.stats.climaxCount=_.get(s,'æ€§æ–—ç³»ç»Ÿ.é«˜æ½®æ¬¡æ•°',0),t.value.stats.maxClimaxCount=c;const l=_.get(s,'æŠ€èƒ½ç³»ç»Ÿ.ä¸»åŠ¨æŠ€èƒ½',{}),u=Object.keys(l);if(u.length>0){const{getSkillById:e}=await Promise.resolve().then(n.bind(n,255)),{DamageSource:a}=await Promise.resolve().then(n.bind(n,962));t.value.skills=u.map(t=>{const a=e(t);if(!a){const e=l[t];if(e&&e.åŸºæœ¬ä¿¡æ¯){let a='';const n=e.ä¼¤å®³ä¸æ•ˆæœ||{};if(n){const e=n.ä¼¤å®³æ¥æº||'æ€§æ–—åŠ›';if(a=`é€ æˆ${n.ç³»æ•°||100}%${e}ä¼¤å®³`,n.æ•ˆæœåˆ—è¡¨&&Object.keys(n.æ•ˆæœåˆ—è¡¨).length>0){a+=`ï¼Œ${Object.values(n.æ•ˆæœåˆ—è¡¨).map(e=>{const t=e.æ˜¯å¦ä¸ºç™¾åˆ†æ¯”?`${e.æ•ˆæœå€¼}%`:e.æ•ˆæœå€¼;return`${e.æ•ˆæœç±»å‹}+${t}`}).join('ã€')}`}}const s=n.ä¼¤å®³æ¥æº||'æ€§æ–—åŠ›',r=(n.ç³»æ•°||100)/100;let o;switch(s){case'æ€§æ–—åŠ›':default:o='sex_power';break;case'é­…åŠ›':o='charm';break;case'å¹¸è¿':o='luck';break;case'æ„å¿—åŠ›':o='willpower';break;case'å›ºå®šå€¼':o='fixed'}const c=[{source:o,coefficient:r,baseValue:0}],l={id:t,name:e.åŸºæœ¬ä¿¡æ¯.æŠ€èƒ½åç§°||t,description:e.åŸºæœ¬ä¿¡æ¯.æŠ€èƒ½æè¿°||'',effectDescription:a,type:'attack',staminaCost:e.å†·å´ä¸æ¶ˆè€—?.è€åŠ›æ¶ˆè€—||0,cooldown:e.å†·å´ä¸æ¶ˆè€—?.å†·å´å›åˆæ•°||0,castTime:0,damageFormula:c,accuracy:e.ä¼¤å®³ä¸æ•ˆæœ?.åŸºç¡€å‘½ä¸­ç‡||100,critModifier:0,buffs:[],ignoreDefense:e.ç‰¹æ®Šæœºåˆ¶?.æ˜¯å¦å¿½è§†é˜²å¾¡??!1,canBeDodged:!1!==e.ç‰¹æ®Šæœºåˆ¶?.æ˜¯å¦å¯è¢«é—ªé¿,canBeReflected:!1,hitCount:1};return{id:t,name:e.åŸºæœ¬ä¿¡æ¯.æŠ€èƒ½åç§°||t,description:e.åŸºæœ¬ä¿¡æ¯.æŠ€èƒ½æè¿°||'',cost:e.å†·å´ä¸æ¶ˆè€—?.è€åŠ›æ¶ˆè€—||0,type:'attack',cooldown:e.å†·å´ä¸æ¶ˆè€—?.å†·å´å›åˆæ•°||0,currentCooldown:0,data:l}}return null}const n=l[t];return n&&n.ç‰¹æ®Šæœºåˆ¶?(a.ignoreDefense=n.ç‰¹æ®Šæœºåˆ¶.æ˜¯å¦å¿½è§†é˜²å¾¡??!1,a.canBeDodged=n.ç‰¹æ®Šæœºåˆ¶.æ˜¯å¦å¯è¢«é—ªé¿??!0):a.ignoreDefense=!1,{id:a.id,name:a.name,description:a.description,cost:a.staminaCost,type:a.type,cooldown:a.cooldown,currentCooldown:0,data:a}}).filter(e=>null!==e),console.info('[æˆ˜æ–—ç•Œé¢] å·²åŠ è½½ç©å®¶æŠ€èƒ½:',t.value.skills.map(e=>e.name))}const m=_.get(s,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹åç§°','');console.info('[æˆ˜æ–—ç•Œé¢] å¯¹æ‰‹åç§°:',m),function(e,t){const s=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹åç§°','é£çºªå§”å‘˜é•¿');s&&(a.value.name=s);a.value.stats.maxEndurance=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æœ€å¤§è€åŠ›',150),a.value.stats.currentEndurance=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹è€åŠ›',150),a.value.stats.maxPleasure=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æœ€å¤§å¿«æ„Ÿ',100),a.value.stats.currentPleasure=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¿«æ„Ÿ',0),a.value.stats.climaxCount=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹é«˜æ½®æ¬¡æ•°',0),a.value.stats.maxClimaxCount=t,a.value.stats.sexPower=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æ€§æ–—åŠ›',20),a.value.stats.baseEndurance=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¿è€åŠ›',20),a.value.stats.charm=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹é­…åŠ›',10),a.value.stats.luck=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¹¸è¿',5),a.value.stats.evasion=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹é—ªé¿ç‡',5),a.value.stats.crit=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æš´å‡»ç‡',10),a.value.stats.willpower=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æ„å¿—åŠ›',100),a.value.stats.baseWillpower=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æ„å¿—åŠ›',100);const r=_.get(e,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¯ç”¨æŠ€èƒ½',{}),o=Object.keys(r);if(console.info('[æˆ˜æ–—ç•Œé¢] ä»MVUåŠ è½½æ•ŒäººæŠ€èƒ½ï¼ŒæŠ€èƒ½IDåˆ—è¡¨:',o),o.length>0){const{getSkillById:t}=n(255);a.value.skills=o.map(a=>{const n=t(a),s=r[a];if(!n&&s){return{id:a,name:s.åŸºæœ¬ä¿¡æ¯?.æŠ€èƒ½åç§°||a,description:s.åŸºæœ¬ä¿¡æ¯?.æŠ€èƒ½æè¿°||'',cost:s.å†·å´ä¸æ¶ˆè€—?.è€åŠ›æ¶ˆè€—||0,type:'attack',cooldown:s.å†·å´ä¸æ¶ˆè€—?.å†·å´å›åˆæ•°||0,currentCooldown:_.get(e,`æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æŠ€èƒ½å†·å´.${a}`,0),data:null}}if(!n)return null;const o=_.get(e,`æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æŠ€èƒ½å†·å´.${a}`,0);return{id:n.id,name:n.name,description:n.description,cost:n.staminaCost,type:n.type,cooldown:n.cooldown,currentCooldown:o,data:n}}).filter(e=>null!==e),console.info('[æˆ˜æ–—ç•Œé¢] å·²åŠ è½½æ•ŒäººæŠ€èƒ½:',a.value.skills.map(e=>`${e.name}(${e.id})`))}else console.warn('[æˆ˜æ–—ç•Œé¢] æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¯ç”¨æŠ€èƒ½ä¸ºç©º')}(s,c);const d=_.get(s,'ç‰©å“ç³»ç»Ÿ.èƒŒåŒ…',{}),f=_.get(s,'æ€§æ–—ç³»ç»Ÿ.æˆ˜æ–—ç‰©å“',{}),p=[];Object.entries(d).forEach(([e,t])=>{if('æ¶ˆè€—å“'===t?.ç±»å‹&&!0===t?.æˆ˜æ–—ç”¨å“){const a=t?.æ•°é‡||f[e]||0;if(a>0){let n=e;if(t?.æè¿°){const e=t.æè¿°.match(/^([^ï¼š:]+)/);n=e?e[1].trim():t.æè¿°}const s={id:e,name:n,description:t?.æè¿°||'æˆ˜æ–—ç”¨å“',quantity:a,staminaRestore:t?.è€åŠ›å¢åŠ ,pleasureReduce:t?.å¿«æ„Ÿé™ä½,effect:(e,a)=>{let n=`${e.name} ä½¿ç”¨äº† ${s.name}`;if(t?.è€åŠ›å¢åŠ ){const a=e.stats.currentEndurance;e.stats.currentEndurance=Math.min(e.stats.maxEndurance,e.stats.currentEndurance+t.è€åŠ›å¢åŠ );const s=e.stats.currentEndurance-a;s>0&&(n+=`ï¼Œæ¢å¤äº† ${s} ç‚¹è€åŠ›`)}if(t?.å¿«æ„Ÿé™ä½){const a=e.stats.currentPleasure;e.stats.currentPleasure=Math.max(0,e.stats.currentPleasure-t.å¿«æ„Ÿé™ä½);const s=a-e.stats.currentPleasure;s>0&&(n+=`ï¼Œå¿«æ„Ÿé™ä½äº† ${s} ç‚¹`)}return{id:Math.random().toString(36).substr(2,9),turn:r.currentTurn,message:n+'ã€‚',source:'player',type:'heal'}}};p.push(s)}}}),p.length>0?(t.value.items=p,console.info('[æˆ˜æ–—ç•Œé¢] å·²åŠ è½½æˆ˜æ–—ç”¨å“:',p.map(e=>`${e.name} x${e.quantity}`))):(t.value.items=[],console.info('[æˆ˜æ–—ç•Œé¢] æœªæ‰¾åˆ°æˆ˜æ–—ç”¨å“ï¼Œç‰©å“åˆ—è¡¨å·²æ¸…ç©º'));_.get(s,'ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',{}),_.get(s,'æ°¸ä¹…çŠ¶æ€.åŠ æˆç»Ÿè®¡',{}),_.get(s,'ç‰©å“ç³»ç»Ÿ.è£…å¤‡æ€»åŠ æˆ',{});const g=_.get(s,'æ€§æ–—ç³»ç»Ÿ.èƒœè´Ÿè§„åˆ™.å…è®¸è®¤è¾“',!0);i.value=!g,r.currentTurn=_.get(s,'æ€§æ–—ç³»ç»Ÿ.å½“å‰å›åˆ',1),console.info('[æˆ˜æ–—ç•Œé¢] å·²ä»MVUåŠ è½½æ•°æ®')}catch(e){console.warn('[æˆ˜æ–—ç•Œé¢] MVUåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®',e)}}async function h(){try{if('undefined'==typeof Mvu)return;const e=Mvu.getMvuData({type:'message',message_id:'latest'});if(!e)return;const n={};t.value.skills.forEach(e=>{n[e.id]=e.currentCooldown});const s={};a.value.skills.forEach(e=>{s[e.id]=e.currentCooldown});const c={};t.value.items.forEach(e=>{e.quantity>0&&(c[e.id]=e.quantity)});const l={};o.value.forEach((e,n)=>{const s=`å›åˆ${e.turn}_${n}`,r=`[${e.turn}] ${'player'===e.source?t.value.name:'enemy'===e.source?a.value.name:'ç³»ç»Ÿ'}: ${e.message}`;l[s]=r});const i={'æ ¸å¿ƒçŠ¶æ€.$è€åŠ›':t.value.stats.currentEndurance,'æ ¸å¿ƒçŠ¶æ€.$å¿«æ„Ÿ':t.value.stats.currentPleasure,'æ ¸å¿ƒçŠ¶æ€.æ„å¿—åŠ›':t.value.stats.willpower,'æ ¸å¿ƒçŠ¶æ€._é­…åŠ›':t.value.stats.charm,'æ ¸å¿ƒçŠ¶æ€._å¹¸è¿':t.value.stats.luck,'æ ¸å¿ƒçŠ¶æ€._é—ªé¿ç‡':t.value.stats.evasion,'æ ¸å¿ƒçŠ¶æ€._æš´å‡»ç‡':t.value.stats.crit,'æ€§æ–—ç³»ç»Ÿ.å½“å‰å›åˆ':r.currentTurn,'æ€§æ–—ç³»ç»Ÿ.é«˜æ½®æ¬¡æ•°':t.value.stats.climaxCount,'æ€§æ–—ç³»ç»Ÿ.å®æ—¶æ€§æ–—åŠ›':t.value.stats.sexPower,'æ€§æ–—ç³»ç»Ÿ.å®æ—¶å¿è€åŠ›':t.value.stats.baseEndurance,'æ€§æ–—ç³»ç»Ÿ.è¡ŒåŠ¨æ—¥å¿—':l,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹åç§°':a.value.name,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹è€åŠ›':a.value.stats.currentEndurance,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æœ€å¤§è€åŠ›':a.value.stats.maxEndurance,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¿«æ„Ÿ':a.value.stats.currentPleasure,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æœ€å¤§å¿«æ„Ÿ':a.value.stats.maxPleasure,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹é«˜æ½®æ¬¡æ•°':a.value.stats.climaxCount,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æ€§æ–—åŠ›':a.value.stats.sexPower,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¿è€åŠ›':a.value.stats.baseEndurance,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹é­…åŠ›':a.value.stats.charm,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¹¸è¿':a.value.stats.luck,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹é—ªé¿ç‡':a.value.stats.evasion,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æš´å‡»ç‡':a.value.stats.crit,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æ„å¿—åŠ›':a.value.stats.willpower,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æŠ€èƒ½å†·å´':s,'æ€§æ–—ç³»ç»Ÿ.æˆ˜æ–—ç‰©å“':c};for(const[t,a]of Object.entries(i))_.set(e.stat_data,t,a);await Mvu.replaceMvuData(e,{type:'message',message_id:'latest'})}catch(e){console.warn('[æˆ˜æ–—ç•Œé¢] MVUä¿å­˜å¤±è´¥',e)}}async function y(e,n){const s=[];try{if('undefined'==typeof Mvu)return console.warn('[æˆ˜æ–—ç•Œé¢] Mvuä¸å¯ç”¨ï¼Œæ— æ³•åº”ç”¨æŠ€èƒ½æ•ˆæœ'),s;const r=Mvu.getMvuData({type:'message',message_id:'latest'});if(!r)return console.warn('[æˆ˜æ–—ç•Œé¢] æ— æ³•è·å–MVUæ•°æ®'),s;const o=`æŠ€èƒ½ç³»ç»Ÿ.ä¸»åŠ¨æŠ€èƒ½.${e}.ä¼¤å®³ä¸æ•ˆæœ.æ•ˆæœåˆ—è¡¨`,c=_.get(r.stat_data,o,{});if(!c||0===Object.keys(c).length)return s;for(const[o,l]of Object.entries(c)){if(!l||'object'!=typeof l)continue;const c=_.get(l,'æ•ˆæœç±»å‹',''),i=_.get(l,'æ•ˆæœå€¼',0),u=_.get(l,'æ˜¯å¦ä¸ºç™¾åˆ†æ¯”',!1),f=_.get(l,'æŒç»­å›åˆæ•°',0);if(0===i||0===f)continue;const p=i>0,v=p,g=Math.abs(i);if('æŸç¼š'===c){n?p?(d.value=f,s.push(`${a.value.name} è¢«æŸç¼šäº† ${f} å›åˆï¼Œæ— æ³•è¡ŒåŠ¨ï¼`)):(m.value=f,s.push(`${t.value.name} è¢«æŸç¼šäº† ${f} å›åˆï¼Œæ— æ³•è¡ŒåŠ¨ï¼`)):p?(m.value=f,s.push(`${t.value.name} è¢«æŸç¼šäº† ${f} å›åˆï¼Œæ— æ³•è¡ŒåŠ¨ï¼`)):(d.value=f,s.push(`${a.value.name} è¢«æŸç¼šäº† ${f} å›åˆï¼Œæ— æ³•è¡ŒåŠ¨ï¼`));continue}let h,y,w;if('æ€§æ–—åŠ›'===c)h=u?'åŸºç¡€æ€§æ–—åŠ›æˆç®—':'åŸºç¡€æ€§æ–—åŠ›åŠ æˆ';else if('å¿è€åŠ›'===c)h=u?'åŸºç¡€å¿è€åŠ›æˆç®—':'åŸºç¡€å¿è€åŠ›åŠ æˆ';else{h={é­…åŠ›:'é­…åŠ›åŠ æˆ',å¹¸è¿:'å¹¸è¿åŠ æˆ',é—ªé¿ç‡:'é—ªé¿ç‡åŠ æˆ',æš´å‡»ç‡:'æš´å‡»ç‡åŠ æˆ',æ„å¿—åŠ›:'æ„å¿—åŠ›åŠ æˆ'}[c]}if(!h){console.warn(`[æˆ˜æ–—ç•Œé¢] æœªçŸ¥çš„æ•ˆæœç±»å‹: ${c}`);continue}n?v?(y='ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',w=t.value.name):(y='æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',w=a.value.name):v?(y='æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',w=a.value.name):(y='ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',w=t.value.name);const E=_.get(r.stat_data,`${y}.${h}`,0)+(p?g:-g);_.set(r.stat_data,`${y}.${h}`,E);const b=`${c}_${e}_${o}_${g}_${u?'pct':'fix'}_${Date.now()}`,k=n?v?'ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨':'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨':v?'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨':'ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨',N=_.get(r.stat_data,k,{});N[b]=f,_.set(r.stat_data,k,N);const C={æ€§æ–—åŠ›:'æ€§æ–—åŠ›',å¿è€åŠ›:'å¿è€åŠ›',é­…åŠ›:'é­…åŠ›',å¹¸è¿:'å¹¸è¿',é—ªé¿ç‡:'é—ªé¿ç‡',æš´å‡»ç‡:'æš´å‡»ç‡',æ„å¿—åŠ›:'æ„å¿—åŠ›'}[c]||c,V=u?`${g}%`:`${g}`,x=p?'+':'-';s.push(`${w} ${x}${V} ${C} (æŒç»­ ${f} å›åˆ)`)}await Mvu.replaceMvuData(r,{type:'message',message_id:'latest'})}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] åº”ç”¨æŠ€èƒ½æ•ˆæœå¤±è´¥',e),s.push('åº”ç”¨æŠ€èƒ½æ•ˆæœå¤±è´¥')}return s}function w(e,t,a){try{const n=e.split('_');if(n.length<5)return void console.warn('[æˆ˜æ–—ç•Œé¢] çŠ¶æ€keyæ ¼å¼ä¸æ­£ç¡®:',e);const s=n[0],r=parseFloat(n[3])||0,o='pct'===n[4];if(0===r)return;let c;if('æ€§æ–—åŠ›'===s)c=o?'åŸºç¡€æ€§æ–—åŠ›æˆç®—':'åŸºç¡€æ€§æ–—åŠ›åŠ æˆ';else if('å¿è€åŠ›'===s)c=o?'åŸºç¡€å¿è€åŠ›æˆç®—':'åŸºç¡€å¿è€åŠ›åŠ æˆ';else{c={é­…åŠ›:'é­…åŠ›åŠ æˆ',å¹¸è¿:'å¹¸è¿åŠ æˆ',é—ªé¿ç‡:'é—ªé¿ç‡åŠ æˆ',æš´å‡»ç‡:'æš´å‡»ç‡åŠ æˆ',æ„å¿—åŠ›:'æ„å¿—åŠ›åŠ æˆ'}[s]}if(!c)return void console.warn(`[æˆ˜æ–—ç•Œé¢] æœªçŸ¥çš„æ•ˆæœç±»å‹: ${s}`);const l=_.get(a.stat_data,`${t}.${c}`,0),i=Math.max(0,l-Math.abs(r));_.set(a.stat_data,`${t}.${c}`,i),console.info(`[æˆ˜æ–—ç•Œé¢] æ¸…é™¤${s}åŠ æˆ: ${l} -> ${i} (å‡å°‘${Math.abs(r)})`)}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] æ¸…é™¤çŠ¶æ€åŠ æˆå¤±è´¥',e)}}function E(e){return{æ€§æ–—åŠ›:'æ€§æ–—åŠ›',å¿è€åŠ›:'å¿è€åŠ›',é­…åŠ›:'é­…åŠ›',å¹¸è¿:'å¹¸è¿',é—ªé¿ç‡:'é—ªé¿ç‡',æš´å‡»ç‡:'æš´å‡»ç‡',æ„å¿—åŠ›:'æ„å¿—åŠ›',æŸç¼š:'æŸç¼š'}[e]||e}async function b(){try{if('undefined'==typeof Mvu)return;const e=Mvu.getMvuData({type:'message',message_id:'latest'});if(!e)return;const n=e.stat_data,s=_.get(n,'ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',{}),r=_.get(n,'æ°¸ä¹…çŠ¶æ€.åŠ æˆç»Ÿè®¡',{}),o=_.get(n,'ç‰©å“ç³»ç»Ÿ.è£…å¤‡æ€»åŠ æˆ',{}),c=_.get(n,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',{});t.value.stats.sexPower=_.get(n,'æ€§æ–—ç³»ç»Ÿ.å®æ—¶æ€§æ–—åŠ›',25),t.value.stats.baseEndurance=_.get(n,'æ€§æ–—ç³»ç»Ÿ.å®æ—¶å¿è€åŠ›',15);const l=_.get(n,'æ ¸å¿ƒçŠ¶æ€.$åŸºç¡€é­…åŠ›',10);t.value.stats.charm=l+_.get(s,'é­…åŠ›åŠ æˆ',0)+_.get(r,'é­…åŠ›åŠ æˆ',0)+_.get(o,'é­…åŠ›åŠ æˆ',0);const i=_.get(n,'æ ¸å¿ƒçŠ¶æ€.$åŸºç¡€å¹¸è¿',10);t.value.stats.luck=i+_.get(s,'å¹¸è¿åŠ æˆ',0)+_.get(r,'å¹¸è¿åŠ æˆ',0)+_.get(o,'å¹¸è¿åŠ æˆ',0);const u=_.get(n,'æ ¸å¿ƒçŠ¶æ€.$åŸºç¡€é—ªé¿ç‡',0);t.value.stats.evasion=u+_.get(s,'é—ªé¿ç‡åŠ æˆ',0)+_.get(r,'é—ªé¿ç‡åŠ æˆ',0)+_.get(o,'é—ªé¿ç‡åŠ æˆ',0);const m=_.get(n,'æ ¸å¿ƒçŠ¶æ€.$åŸºç¡€æš´å‡»ç‡',0);t.value.stats.crit=Math.min(100,Math.max(0,m+_.get(s,'æš´å‡»ç‡åŠ æˆ',0)+_.get(r,'æš´å‡»ç‡åŠ æˆ',0)+_.get(o,'æš´å‡»ç‡åŠ æˆ',0)));const d=_.get(n,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æ€§æ–—åŠ›',0),f=_.get(c,'åŸºç¡€æ€§æ–—åŠ›åŠ æˆ',0),p=_.get(c,'åŸºç¡€æ€§æ–—åŠ›æˆç®—',0);a.value.stats.sexPower=d+f+Math.floor((d+f)*p/100);const v=_.get(n,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¿è€åŠ›',0),g=_.get(c,'åŸºç¡€å¿è€åŠ›åŠ æˆ',0),h=_.get(c,'åŸºç¡€å¿è€åŠ›æˆç®—',0);a.value.stats.baseEndurance=v+g+Math.floor((v+g)*h/100),a.value.stats.charm=_.get(n,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹é­…åŠ›',0)+_.get(c,'é­…åŠ›åŠ æˆ',0),a.value.stats.luck=_.get(n,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¹¸è¿',0)+_.get(c,'å¹¸è¿åŠ æˆ',0),a.value.stats.evasion=_.get(n,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹é—ªé¿ç‡',0)+_.get(c,'é—ªé¿ç‡åŠ æˆ',0),a.value.stats.crit=Math.min(100,Math.max(0,_.get(n,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æš´å‡»ç‡',0)+_.get(c,'æš´å‡»ç‡åŠ æˆ',0)))}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] é‡æ–°è¯»å–çŠ¶æ€å¤±è´¥',e)}}function k(e){f.value=e,p.value=!0,setTimeout(()=>{p.value=!1,setTimeout(()=>{f.value=null},300)},1500)}async function N(){try{if('undefined'==typeof Mvu)return;const e=Mvu.getMvuData({type:'message',message_id:'latest'});if(!e)return;_.set(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.å½“å‰å›åˆ',0),_.set(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.è¡ŒåŠ¨æ—¥å¿—',{}),_.set(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹æŠ€èƒ½å†·å´',{}),_.set(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.æˆ˜æ–—ç‰©å“',{}),await Mvu.replaceMvuData(e,{type:'message',message_id:'latest'}),console.info('[æˆ˜æ–—ç•Œé¢] å·²åˆå§‹åŒ–æ€§æ–—ç³»ç»Ÿæ•°æ®')}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] åˆå§‹åŒ–æ€§æ–—ç³»ç»Ÿæ•°æ®å¤±è´¥',e)}}async function C(){try{if('undefined'==typeof Mvu)return;const e=Mvu.getMvuData({type:'message',message_id:'latest'});if(!e)return;_.set(e.stat_data,'ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨',{}),_.set(e.stat_data,'ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',{é­…åŠ›åŠ æˆ:0,å¹¸è¿åŠ æˆ:0,åŸºç¡€æ€§æ–—åŠ›åŠ æˆ:0,åŸºç¡€æ€§æ–—åŠ›æˆç®—:0,åŸºç¡€å¿è€åŠ›åŠ æˆ:0,åŸºç¡€å¿è€åŠ›æˆç®—:0,é—ªé¿ç‡åŠ æˆ:0,æš´å‡»ç‡åŠ æˆ:0,æ„å¿—åŠ›åŠ æˆ:0}),_.set(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨',{}),_.set(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',{é­…åŠ›åŠ æˆ:0,å¹¸è¿åŠ æˆ:0,åŸºç¡€æ€§æ–—åŠ›åŠ æˆ:0,åŸºç¡€æ€§æ–—åŠ›æˆç®—:0,åŸºç¡€å¿è€åŠ›åŠ æˆ:0,åŸºç¡€å¿è€åŠ›æˆç®—:0,é—ªé¿ç‡åŠ æˆ:0,æš´å‡»ç‡åŠ æˆ:0,æ„å¿—åŠ›åŠ æˆ:0}),m.value=0,d.value=0,await Mvu.replaceMvuData(e,{type:'message',message_id:'latest'}),V('ä¸´æ—¶çŠ¶æ€å·²æ¸…ç©º','system','info')}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] æ¸…ç©ºä¸´æ—¶çŠ¶æ€å¤±è´¥',e)}}function V(e,n,s='info'){const c={id:Math.random().toString(36).substr(2,9),turn:r.currentTurn,message:e,source:n,type:s};o.value.push(c),(async()=>{try{if('undefined'!=typeof Mvu){const e=Mvu.getMvuData({type:'message',message_id:'latest'});if(e){const n=`å›åˆ${r.currentTurn}_${Date.now()}`,s=`[${c.turn}] ${'player'===c.source?t.value.name:'enemy'===c.source?a.value.name:'ç³»ç»Ÿ'}: ${c.message}`,o={..._.get(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.è¡ŒåŠ¨æ—¥å¿—',{}),[n]:s};_.set(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.è¡ŒåŠ¨æ—¥å¿—',o),await Mvu.replaceMvuData(e,{type:'message',message_id:'latest'})}}}catch(e){console.warn('[æˆ˜æ–—ç•Œé¢] å†™å…¥è¡ŒåŠ¨æ—¥å¿—å¤±è´¥',e)}})()}function x(e){return{...e,stats:{...e.stats},skills:e.skills.map(e=>({...e})),items:e.items.map(e=>({...e})),statusEffects:[...e.statusEffects]}}function D(e){return e.currentCooldown>0||t.value.stats.currentEndurance<e.cost}function M(){if(0===a.value.skills.length)return console.warn('[æˆ˜æ–—ç•Œé¢] æ•Œäººæ²¡æœ‰å¯ç”¨æŠ€èƒ½'),void(r.enemyIntention=null);const e=a.value.skills.filter(e=>!(!e.id||!e.name)||(console.warn('[æˆ˜æ–—ç•Œé¢] å‘ç°æ— æ•ˆæŠ€èƒ½:',e),!1));if(0===e.length)return console.warn('[æˆ˜æ–—ç•Œé¢] æ²¡æœ‰æœ‰æ•ˆçš„æ•ŒäººæŠ€èƒ½'),void(r.enemyIntention=null);const t=e.filter(e=>0===e.currentCooldown),n=t.length>0?t:e;if(0===n.length)return console.warn('[æˆ˜æ–—ç•Œé¢] æ²¡æœ‰å¯é€‰æ‹©çš„æŠ€èƒ½'),void(r.enemyIntention=null);const s=n[Math.floor(Math.random()*n.length)];console.info('[æˆ˜æ–—ç•Œé¢] é€‰æ‹©é¢„å‘ŠæŠ€èƒ½:',s.name,'ID:',s.id),r.enemyIntention=s}function S(){if(r.phase='enemyAction',d.value>0)return V(`${a.value.name} è¢«æŸç¼šäº†ï¼Œæ— æ³•è¡ŒåŠ¨ï¼`,'system','warn'),void setTimeout(B,1e3);V(`${a.value.name} å¼€å§‹è¡ŒåŠ¨...`,'system','info'),setTimeout(()=>{r.enemyIntention||(M(),V(`${a.value.name} éšæœºé€‰æ‹©äº†æŠ€èƒ½`,'system','info'));const e=x(t.value),s=x(a.value);let o=s.skills.find(e=>e.id===r.enemyIntention?.id);if(!o||o.currentCooldown>0){const e=s.skills.filter(e=>0===e.currentCooldown);e.length>0?(o=e[Math.floor(Math.random()*e.length)],V(`${s.name} çš„é¢„å‘ŠæŠ€èƒ½å†·å´ä¸­ï¼Œæ”¹ä¸ºä½¿ç”¨ ${o.name}`,'system','info')):(o=s.skills[0],V(`${s.name} æ‰€æœ‰æŠ€èƒ½éƒ½åœ¨å†·å´ï¼Œä½¿ç”¨ ${o.name}`,'system','info'))}if(!o)return V(`${s.name} æ²¡æœ‰å¯ç”¨æŠ€èƒ½`,'system','info'),void setTimeout(B,1e3);if(!o.data)try{if('undefined'!=typeof Mvu){const e=Mvu.getMvuData({type:'message',message_id:'latest'});if(e){const t=_.get(e.stat_data,`æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹å¯ç”¨æŠ€èƒ½.${o.id}`,null);if(t&&t.åŸºæœ¬ä¿¡æ¯){const e=t.ä¼¤å®³ä¸æ•ˆæœ||{},a=e.ä¼¤å®³æ¥æº||'æ€§æ–—åŠ›',n=(e.ç³»æ•°||100)/100;let s;switch(a){case'æ€§æ–—åŠ›':default:s='sex_power';break;case'é­…åŠ›':s='charm';break;case'å¹¸è¿':s='luck';break;case'æ„å¿—åŠ›':s='willpower';break;case'å›ºå®šå€¼':s='fixed'}const r=[{source:s,coefficient:n,baseValue:0}],c={id:o.id,name:t.åŸºæœ¬ä¿¡æ¯.æŠ€èƒ½åç§°||o.id,description:t.åŸºæœ¬ä¿¡æ¯.æŠ€èƒ½æè¿°||'',effectDescription:'',type:'attack',staminaCost:t.å†·å´ä¸æ¶ˆè€—?.è€åŠ›æ¶ˆè€—||0,cooldown:t.å†·å´ä¸æ¶ˆè€—?.å†·å´å›åˆæ•°||0,castTime:0,damageFormula:r,accuracy:e.åŸºç¡€å‘½ä¸­ç‡||100,critModifier:0,buffs:[],ignoreDefense:t.ç‰¹æ®Šæœºåˆ¶?.æ˜¯å¦å¿½è§†é˜²å¾¡??!1,canBeDodged:!1!==t.ç‰¹æ®Šæœºåˆ¶?.æ˜¯å¦å¯è¢«é—ªé¿,canBeReflected:!1,hitCount:1};o.data=c,console.info('[æˆ˜æ–—ç•Œé¢] ä»MVUé‡æ–°æ„å»ºæ•ŒäººæŠ€èƒ½æ•°æ®:',o.name,'ä¼¤å®³å…¬å¼:',r)}}}}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] é‡æ–°æ„å»ºæŠ€èƒ½æ•°æ®å¤±è´¥',e)}Promise.resolve().then(n.bind(n,591)).then(async({executeAttack:n,applySkillBuffs:c})=>{try{if(!o.data)return V(`æŠ€èƒ½ ${o.name} çš„æ•°æ®ä¸å­˜åœ¨ï¼Œæ— æ³•ä½¿ç”¨`,'system','error'),void setTimeout(B,1e3);const c=n(s,e,o.data);if(V(`${s.name} ä½¿ç”¨äº† ${o.name}ï¼`,'enemy','info'),c.isDodged)V(`${e.name} é—ªé¿äº†æ”»å‡»ï¼`,'system','info'),k('dodge');else{console.info('[æˆ˜æ–—ç•Œé¢] æ•Œäººæ”»å‡» - result.logs:',c.logs),c.logs&&c.logs.length>0?c.logs.forEach(e=>{V(e,'system','info')}):console.warn('[æˆ˜æ–—ç•Œé¢] æ•Œäººæ”»å‡» - result.logs ä¸ºç©ºæˆ–æœªå®šä¹‰'),c.isCritical?(V(`æš´å‡»ï¼é€ æˆ ${c.actualDamage} ç‚¹å¿«æ„Ÿä¼¤å®³ï¼`,'enemy','critical'),k('critical')):V(`é€ æˆ ${c.actualDamage} ç‚¹å¿«æ„Ÿä¼¤å®³`,'enemy','damage');const t=e.stats.currentPleasure;e.stats.currentPleasure=Math.min(e.stats.maxPleasure,e.stats.currentPleasure+c.actualDamage),V(`${e.name} çš„å¿«æ„Ÿä» ${t} å¢åŠ åˆ° ${e.stats.currentPleasure}`,'system','info');try{(await y(o.id,!1)).forEach(e=>V(e,'system','info'))}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] åº”ç”¨æŠ€èƒ½æ•ˆæœå¤±è´¥',e),V('åº”ç”¨æŠ€èƒ½æ•ˆæœæ—¶å‡ºé”™ï¼Œä½†æˆ˜æ–—ç»§ç»­','system','warn')}}t.value=e,a.value=s,await b(),h(),e.stats.currentPleasure>=e.stats.maxPleasure?(r.climaxTarget='player',V(`${e.name} è¾¾åˆ°äº†å¿«æ„Ÿä¸Šé™ï¼`,'system','critical'),V(`${e.name} è¾¾åˆ°äº†é«˜æ½®ï¼ (è¿‡ç¨‹ç•¥)`,'system','info'),k('climax'),await T(!1)):setTimeout(B,1e3)}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] æ•Œäººä½¿ç”¨æŠ€èƒ½æ—¶å‡ºé”™',e),V('æ•Œäººä½¿ç”¨æŠ€èƒ½æ—¶å‡ºé”™','system','error'),setTimeout(B,1e3)}})},1e3)}function B(){r.currentTurn++,V(`--- ç¬¬ ${r.currentTurn} å›åˆå¼€å§‹ ---`,'system','info'),r.phase='playerInput',M(),r.enemyIntention&&V(`é¢„å‘Šï¼š${a.value.name} å‡†å¤‡ä½¿ç”¨ ${r.enemyIntention.name}`,'system','info');const e=t.value.stats.currentEndurance;t.value.stats.currentEndurance=Math.min(t.value.stats.maxEndurance,t.value.stats.currentEndurance+5),t.value.stats.currentEndurance>e&&V(`${t.value.name} å›å¤äº† ${t.value.stats.currentEndurance-e} ç‚¹è€åŠ›`,'system','info'),t.value.skills.forEach(e=>{e.currentCooldown>0&&(e.currentCooldown--,0===e.currentCooldown&&V(`${e.name} å†·å´å®Œæˆ`,'system','info'))}),a.value.skills.forEach(e=>{e.currentCooldown>0&&e.currentCooldown--}),async function(){const e=[];try{if('undefined'==typeof Mvu)return e;const n=Mvu.getMvuData({type:'message',message_id:'latest'});if(!n)return e;const s=_.get(n.stat_data,'ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨',{}),r={};for(const[a,o]of Object.entries(s)){const s=o-1;if(s>0)r[a]=s;else{w(a,'ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',n);const s=a.split('_')[0];e.push(`${t.value.name} çš„ ${E(s)} æ•ˆæœæ¶ˆå¤±äº†`)}}_.set(n.stat_data,'ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨',r);const o=_.get(n.stat_data,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨',{}),c={};for(const[t,s]of Object.entries(o)){const r=s-1;if(r>0)c[t]=r;else{w(t,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.åŠ æˆç»Ÿè®¡',n);const s=t.split('_')[0];e.push(`${a.value.name} çš„ ${E(s)} æ•ˆæœæ¶ˆå¤±äº†`)}}_.set(n.stat_data,'æ€§æ–—ç³»ç»Ÿ.å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€.çŠ¶æ€åˆ—è¡¨',c),m.value>0&&(m.value--,0===m.value&&e.push(`${t.value.name} çš„æŸç¼šæ•ˆæœæ¶ˆå¤±äº†`)),d.value>0&&(d.value--,0===d.value&&e.push(`${a.value.name} çš„æŸç¼šæ•ˆæœæ¶ˆå¤±äº†`)),await Mvu.replaceMvuData(n,{type:'message',message_id:'latest'})}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] æ›´æ–°çŠ¶æ€æ•ˆæœå¤±è´¥',e)}return e}().then(async e=>{e.forEach(e=>V(e,'system','info')),await b()}),V(`--- ${t.value.name} çš„å›åˆ ---`,'system','info'),h()}async function P(e){try{const e=o.value.filter(e=>{const t=e.message;return!!(('player'===e.source||'enemy'===e.source)&&t.includes('ä½¿ç”¨äº†')||t.includes('é€ æˆ')&&(t.includes('ä¼¤å®³')||t.includes('æš´å‡»'))||t.includes('çš„å¿«æ„Ÿä»')||t.includes('é¢„å‘Š')||t.includes('è½®åˆ°')&&t.includes('è¡ŒåŠ¨')||t.includes('è¾¾åˆ°å¿«æ„Ÿä¸Šé™')||t.includes('è¾¾åˆ°é«˜æ½®')||t.includes('é«˜æ½®æ¬¡æ•°')||t.includes('è´¥åŒ—')||t.includes('èƒœåˆ©')||t.includes('å´©æºƒ'))}).map(e=>'player'===e.source?`${t.value.name}: ${e.message}`:'enemy'===e.source?`${a.value.name}: ${e.message}`:e.message).join('\n'),n=r.currentTurn,s='victory'===r.phase,c=s?'èƒœåˆ©':'æˆ˜è´¥',l=`è¯·æ ¹æ®ä»¥ä¸‹æˆ˜æ–—æ—¥å¿—ç”Ÿæˆ${c}å‰§æƒ…\n[æˆ˜æ–—æ—¥å¿—]\n${e}\nå…±${n}å›åˆã€‚\nè¯·æ ¹æ®ä»¥ä¸Šæˆ˜æ–—è¿‡ç¨‹ï¼Œç”Ÿæˆä¸€æ®µ${c}åçš„å‰§æƒ…æå†™ï¼ˆ${s?'è°ƒæ•™/ç¾è¾±åœºæ™¯':'è¢«è°ƒæ•™åœºæ™¯'}ï¼‰ã€‚`;if('function'==typeof createChatMessages&&await createChatMessages([{role:'user',message:l}]),'function'==typeof generate){V('æ­£åœ¨ç”Ÿæˆè¿‡ç¨‹æè¿°...','system','info');const e=await generate({user_input:l});'function'==typeof createChatMessages&&(await createChatMessages([{role:'assistant',message:`[æˆ˜æ–—è¿‡ç¨‹] ${e}`}]),V('å·²å°†è¿‡ç¨‹æè¿°å‘é€ç»™LLMï¼Œç­‰å¾…AIå›å¤...','system','info'))}else console.warn('[æˆ˜æ–—ç•Œé¢] generateå‡½æ•°ä¸å¯ç”¨'),V('æ— æ³•ç”Ÿæˆè¿‡ç¨‹æè¿°ï¼Œgenerateå‡½æ•°ä¸å¯ç”¨','system','warn'),'function'==typeof triggerSlash&&await triggerSlash('/trigger')}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] å‘é€æ—¥å¿—ç»™LLMå¤±è´¥',e),V('å‘é€æ—¥å¿—ç»™LLMå¤±è´¥','system','error')}}async function A(){'victory'===r.phase||r.phase;await P(),o.value=[];try{if('undefined'!=typeof Mvu){const e=Mvu.getMvuData({type:'message',message_id:'latest'});e&&(_.set(e.stat_data,'æ€§æ–—ç³»ç»Ÿ.è¡ŒåŠ¨æ—¥å¿—',{}),await Mvu.replaceMvuData(e,{type:'message',message_id:'latest'}))}}catch(e){console.warn('[æˆ˜æ–—ç•Œé¢] æ¸…ç©ºè¡ŒåŠ¨æ—¥å¿—å¤±è´¥',e)}}async function T(e){const n=e?a.value:t.value,s=x(n);if(s.stats.currentPleasure=0,s.stats.climaxCount+=1,e?a.value=s:t.value=s,V(`${n.name} é«˜æ½®æ¬¡æ•°ï¼š${s.stats.climaxCount}/${s.stats.maxClimaxCount}`,'system','info'),s.stats.climaxCount>=s.stats.maxClimaxCount){r.phase=e?'victory':'defeat',r.climaxTarget=null;const t=e?'æˆ˜æ–—èƒœåˆ©ï¼':`è´¥åŒ—ï¼Œå…±${r.currentTurn}å›åˆã€‚`;return V(e?`å¯¹æ‰‹å½»åº•å´©æºƒï¼${t}`:`ä½ å½»åº•å´©æºƒ... ${t}`,'system','critical'),k(e?'victory':'defeat'),await C(),await N(),void h()}r.climaxTarget=null,e?setTimeout(S,500):setTimeout(B,500)}function I(){'playerInput'===r.phase&&(m.value>0?V(`${t.value.name} è¢«æŸç¼šäº†ï¼Œæ— æ³•è·³è¿‡å›åˆï¼`,'system','warn'):(V(`${t.value.name} é€‰æ‹©äº†è·³è¿‡å›åˆ`,'system','info'),r.phase='processing',setTimeout(S,1e3)))}async function R(){i.value?V('ä¸èƒ½é€ƒè·‘ï¼è¿™æ˜¯å°Šä¸¥ä¹‹æˆ˜ï¼','system','info'):(r.phase='defeat',V('ä½ é€‰æ‹©äº†æŠ•é™...','system','info'),V('--- æˆ˜æ–—ç»“æŸ ---','system','info'),await C(),h())}return(0,s.watch)([()=>t.value.stats.currentPleasure,()=>t.value.stats.currentEndurance,()=>a.value.stats.currentPleasure,()=>a.value.stats.currentEndurance],()=>{if('climaxResolution'!==r.phase&&'victory'!==r.phase&&'defeat'!==r.phase)return a.value.stats.currentEndurance<=0?(r.phase='victory',V(`å¯¹æ‰‹ä½“åŠ›è€—å°½ï¼æˆ˜æ–—èƒœåˆ©ï¼å…±${r.currentTurn}å›åˆã€‚`,'system','critical'),k('victory'),void C().then(async()=>{await N(),h()})):t.value.stats.currentEndurance<=0?(r.phase='defeat',V(`ä½ ä½“åŠ›è€—å°½... è´¥åŒ—ï¼Œå…±${r.currentTurn}å›åˆã€‚`,'system','damage'),k('defeat'),void C().then(async()=>{await N(),h()})):a.value.stats.currentPleasure>=a.value.stats.maxPleasure?(r.climaxTarget='enemy',V(`${a.value.name} è¾¾åˆ°äº†å¿«æ„Ÿä¸Šé™ï¼`,'system','critical'),V(`${a.value.name} è¾¾åˆ°äº†é«˜æ½®ï¼ (è¿‡ç¨‹ç•¥)`,'system','info'),k('climax'),void T(!0)):t.value.stats.currentPleasure>=t.value.stats.maxPleasure?(r.climaxTarget='player',V(`${t.value.name} è¾¾åˆ°äº†å¿«æ„Ÿä¸Šé™ï¼`,'system','critical'),V(`${t.value.name} è¾¾åˆ°äº†é«˜æ½®ï¼ (è¿‡ç¨‹ç•¥)`,'system','info'),k('climax'),void T(!1)):void 0}),(0,s.onMounted)(async()=>{await g();const e=v();t.value.name=e,await b(),V(`é­é‡äº† ${a.value.name} !`,'system','info'),M(),r.enemyIntention&&V(`é¢„å‘Šï¼š${a.value.name} å‡†å¤‡ä½¿ç”¨ ${r.enemyIntention.name}`,'system','info'),V('--- æˆ˜æ–—å¼€å§‹ ---','system','info'),V(`--- ${t.value.name} çš„å›åˆ ---`,'system','info')}),(e,d)=>{return(0,s.openBlock)(),(0,s.createElementBlock)('div',de,[(0,s.createCommentVNode)(' èƒŒæ™¯æ•ˆæœ '),(0,s.createVNode)(l),(0,s.createCommentVNode)(' é¡¶éƒ¨æ ‡é¢˜æ  '),(0,s.createElementVNode)('header',fe,[d[5]||(d[5]=(0,s.createStaticVNode)('<div class="header-left" data-v-48dc8be9><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="terminal-icon" data-v-48dc8be9><path d="m4 17 6-6-6-6" data-v-48dc8be9></path><path d="M12 19h8" data-v-48dc8be9></path></svg><div data-v-48dc8be9><h1 class="title" data-v-48dc8be9>æ€§æ–—å­¦å›­</h1></div></div>',1)),(0,s.createElementVNode)('div',pe,[(0,s.createElementVNode)('div',ve,'TURN '+(0,s.toDisplayString)(r.currentTurn),1),(0,s.createElementVNode)('div',ge,(0,s.toDisplayString)((v=r.phase,{playerInput:'ç©å®¶å›åˆ',processing:'ç»“ç®—ä¸­',enemyAction:'æ•Œæ–¹è¡ŒåŠ¨',victory:'èƒœåˆ©',defeat:'è´¥åŒ—',climaxResolution:'é«˜æ½®å¤„ç†'}[v])),1)])]),(0,s.createCommentVNode)(' ä¸»æˆ˜æ–—åŒºåŸŸ '),(0,s.createElementVNode)('main',he,[(0,s.createCommentVNode)(' ç©å®¶è§’è‰² '),(0,s.createVNode)(q,{character:t.value,'is-enemy':!1,'turn-state':r,'enemy-intention':r.enemyIntention},null,8,['character','turn-state','enemy-intention']),(0,s.createCommentVNode)(' VS åˆ†éš”çº¿ '),d[6]||(d[6]=(0,s.createElementVNode)('div',{class:'vs-divider'},[(0,s.createElementVNode)('div',{class:'divider-line'}),(0,s.createElementVNode)('span',{class:'vs-text'},'VS'),(0,s.createElementVNode)('div',{class:'divider-line'})],-1)),(0,s.createCommentVNode)(' æ•Œäººè§’è‰² '),(0,s.createVNode)(q,{character:a.value,'is-enemy':!0,'turn-state':r,'enemy-intention':r.enemyIntention},null,8,['character','turn-state','enemy-intention'])]),(0,s.createCommentVNode)(' åº•éƒ¨æ“ä½œåŒºåŸŸ '),(0,s.createElementVNode)('footer',ye,[(0,s.createElementVNode)('div',we,[(0,s.createCommentVNode)(' æˆ˜æ–—æ—¥å¿— '),(0,s.createElementVNode)('div',Ee,[(0,s.createVNode)(ae,{logs:o.value},null,8,['logs'])]),(0,s.createCommentVNode)(' æ“ä½œèœå• '),(0,s.createElementVNode)('div',_e,[(0,s.createCommentVNode)(' èœå•æ ‡é¢˜ '),'playerInput'===r.phase?((0,s.openBlock)(),(0,s.createElementBlock)('div',be,[(0,s.createElementVNode)('button',{class:(0,s.normalizeClass)(['tab-btn',{active:'main'===c.value}]),onClick:d[0]||(d[0]=e=>c.value='main')},' è¡ŒåŠ¨ ',2),d[7]||(d[7]=(0,s.createElementVNode)('div',{class:'tab-divider'},null,-1)),d[8]||(d[8]=(0,s.createElementVNode)('span',{class:'action-hint'},'è¯·é€‰æ‹©ä½ çš„è¡ŒåŠ¨',-1))])):((0,s.openBlock)(),(0,s.createElementBlock)('div',ke,[(0,s.createElementVNode)('span',$e,(0,s.toDisplayString)('climaxResolution'===r.phase?'ç­‰å¾…æŠ‰æ‹©...':'ç­‰å¾…è¡ŒåŠ¨ç»“ç®—...'),1)])),(0,s.createCommentVNode)(' æ“ä½œæŒ‰é’®åŒº '),(0,s.createElementVNode)('div',Ne,[(0,s.createCommentVNode)(' å¤„ç†ä¸­é®ç½© '),'playerInput'!==r.phase&&'climaxResolution'!==r.phase?((0,s.openBlock)(),(0,s.createElementBlock)('div',Ce,[...d[9]||(d[9]=[(0,s.createElementVNode)('span',null,'è®¡ç®—ä¸­...',-1)])])):(0,s.createCommentVNode)('v-if',!0),(0,s.createVNode)(s.Transition,{name:'slide',mode:'out-in'},{default:(0,s.withCtx)(()=>['main'===c.value?((0,s.openBlock)(),(0,s.createElementBlock)('div',Ve,[(0,s.createVNode)(u,{hover:'',onClick:d[1]||(d[1]=e=>c.value='skills'),class:'menu-card'},{default:(0,s.withCtx)(()=>[...d[10]||(d[10]=[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'32',height:'32',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2',class:'icon-blue'},[(0,s.createElementVNode)('path',{d:'M14.5 17.5 3 6V3h3l11.5 11.5'}),(0,s.createElementVNode)('path',{d:'M13 19l6-6'}),(0,s.createElementVNode)('path',{d:'m16 16 4 4'}),(0,s.createElementVNode)('path',{d:'m19 21 2-2'})],-1),(0,s.createElementVNode)('span',null,'æˆ˜æ–—æŠ€èƒ½',-1)])]),_:1}),(0,s.createVNode)(u,{hover:'',onClick:d[2]||(d[2]=e=>c.value='items'),class:'menu-card'},{default:(0,s.withCtx)(()=>[...d[11]||(d[11]=[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'32',height:'32',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2',class:'icon-green'},[(0,s.createElementVNode)('path',{d:'M4 20V10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2Z'}),(0,s.createElementVNode)('path',{d:'M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2'})],-1),(0,s.createElementVNode)('span',null,'ç‰©å“èƒŒåŒ…',-1)])]),_:1}),(0,s.createVNode)(u,{hover:'',onClick:I,class:'menu-card'},{default:(0,s.withCtx)(()=>[...d[12]||(d[12]=[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'32',height:'32',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2',class:'icon-yellow'},[(0,s.createElementVNode)('polygon',{points:'5 4 15 12 5 20 5 4'}),(0,s.createElementVNode)('line',{x1:'19',y1:'5',x2:'19',y2:'19'})],-1),(0,s.createElementVNode)('span',null,'è·³è¿‡å›åˆ',-1)])]),_:1}),(0,s.createVNode)(u,{hover:!i.value,onClick:R,class:(0,s.normalizeClass)(['menu-card',{disabled:i.value}])},{default:(0,s.withCtx)(()=>[d[13]||(d[13]=(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'32',height:'32',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2',class:'icon-red'},[(0,s.createElementVNode)('path',{d:'M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z'}),(0,s.createElementVNode)('line',{x1:'4',y1:'22',x2:'4',y2:'15'})],-1)),(0,s.createElementVNode)('span',null,(0,s.toDisplayString)(i.value?'ä¸å¯æŠ•é™':'æŠ•é™'),1)]),_:1},8,['hover','class'])])):'skills'===c.value?((0,s.openBlock)(),(0,s.createElementBlock)('div',xe,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(t.value.skills,e=>((0,s.openBlock)(),(0,s.createBlock)(u,{key:e.id,hover:!D(e),onClick:s=>function(e){if('playerInput'!==r.phase)return;if(m.value>0)return void V(`${t.value.name} è¢«æŸç¼šäº†ï¼Œæ— æ³•ä½¿ç”¨æŠ€èƒ½ï¼`,'system','warn');if(D(e))return void V(e.currentCooldown>0?'æŠ€èƒ½å†·å´ä¸­ï¼':'è€åŠ›ä¸è¶³ï¼','system','info');r.phase='processing';const s=x(t.value),o=x(a.value);s.stats.currentEndurance-=e.cost,V(`${s.name} æ¶ˆè€—äº† ${e.cost} ç‚¹è€åŠ›`,'system','info');const c=s.skills.findIndex(t=>t.id===e.id);-1!==c&&(s.skills[c].currentCooldown=e.cooldown,e.cooldown>0&&V(`${e.name} è¿›å…¥å†·å´ï¼Œå†·å´æ—¶é—´ ${e.cooldown} å›åˆ`,'system','info')),Promise.resolve().then(n.bind(n,591)).then(async({executeAttack:n,applySkillBuffs:c})=>{try{if(!e.data)return V(`æŠ€èƒ½ ${e.name} çš„æ•°æ®ä¸å­˜åœ¨ï¼Œæ— æ³•ä½¿ç”¨`,'system','error'),void(r.phase='playerInput');const c=n(s,o,e.data);if(V(`${s.name} ä½¿ç”¨äº† ${e.name}ï¼`,'player','info'),c.isDodged)V(`${o.name} é—ªé¿äº†æ”»å‡»ï¼`,'system','info'),k('dodge');else{console.info('[æˆ˜æ–—ç•Œé¢] ç©å®¶æ”»å‡» - result.logs:',c.logs),c.logs&&c.logs.length>0?c.logs.forEach(e=>{V(e,'system','info')}):console.warn('[æˆ˜æ–—ç•Œé¢] ç©å®¶æ”»å‡» - result.logs ä¸ºç©ºæˆ–æœªå®šä¹‰'),c.isCritical?(V(`æš´å‡»ï¼é€ æˆ ${c.actualDamage} ç‚¹å¿«æ„Ÿä¼¤å®³ï¼`,'player','critical'),k('critical')):V(`é€ æˆ ${c.actualDamage} ç‚¹å¿«æ„Ÿä¼¤å®³`,'player','damage');const t=o.stats.currentPleasure;o.stats.currentPleasure=Math.min(o.stats.maxPleasure,o.stats.currentPleasure+c.actualDamage),V(`${o.name} çš„å¿«æ„Ÿä» ${t} å¢åŠ åˆ° ${o.stats.currentPleasure}`,'system','info');try{(await y(e.id,!0)).forEach(e=>V(e,'system','info'))}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] åº”ç”¨æŠ€èƒ½æ•ˆæœå¤±è´¥',e),V('åº”ç”¨æŠ€èƒ½æ•ˆæœæ—¶å‡ºé”™ï¼Œä½†æˆ˜æ–—ç»§ç»­','system','warn')}}t.value=s,a.value=o,await b(),h(),o.stats.currentPleasure>=o.stats.maxPleasure?(r.climaxTarget='enemy',V(`${o.name} è¾¾åˆ°äº†å¿«æ„Ÿä¸Šé™ï¼`,'system','critical'),V(`${o.name} è¾¾åˆ°äº†é«˜æ½®ï¼ (è¿‡ç¨‹ç•¥)`,'system','info'),k('climax'),await T(!0)):(V(`--- è½®åˆ° ${o.name} è¡ŒåŠ¨ ---`,'system','info'),setTimeout(S,1e3))}catch(e){console.error('[æˆ˜æ–—ç•Œé¢] ä½¿ç”¨æŠ€èƒ½æ—¶å‡ºé”™',e),V('ä½¿ç”¨æŠ€èƒ½æ—¶å‡ºé”™','system','error'),r.phase='playerInput'}})}(e),class:(0,s.normalizeClass)(['skill-card',{disabled:D(e)}])},{default:(0,s.withCtx)(()=>[e.currentCooldown>0?((0,s.openBlock)(),(0,s.createElementBlock)('div',ze,[d[15]||(d[15]=(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'20',height:'20',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('circle',{cx:'12',cy:'12',r:'10'}),(0,s.createElementVNode)('polyline',{points:'12 6 12 12 16 14'})],-1)),(0,s.createElementVNode)('span',De,[(0,s.createTextVNode)((0,s.toDisplayString)(e.currentCooldown),1),d[14]||(d[14]=(0,s.createElementVNode)('small',null,'T',-1))])])):(0,s.createCommentVNode)('v-if',!0),(0,s.createElementVNode)('div',Me,[(0,s.createElementVNode)('span',{class:(0,s.normalizeClass)(['skill-name',{'skill-disabled':D(e)}])},(0,s.toDisplayString)(e.name),3),(0,s.createElementVNode)('span',{class:(0,s.normalizeClass)(['skill-cost',{'cost-danger':t.value.stats.currentEndurance<e.cost}])},(0,s.toDisplayString)(e.cost)+' SP',3)]),(0,s.createElementVNode)('p',Se,(0,s.toDisplayString)(e.description),1),e.data?.effectDescription?((0,s.openBlock)(),(0,s.createElementBlock)('div',Be,[d[16]||(d[16]=(0,s.createElementVNode)('span',{class:'effect-label'},'æ•ˆæœï¼š',-1)),(0,s.createElementVNode)('span',Pe,(0,s.toDisplayString)(e.data.effectDescription),1)])):(0,s.createCommentVNode)('v-if',!0),(0,s.createElementVNode)('div',{class:(0,s.normalizeClass)(['skill-type',{'type-disabled':D(e)}])},(0,s.toDisplayString)(e.type),3)]),_:2},1032,['hover','onClick','class']))),128)),(0,s.createElementVNode)('button',{class:'back-btn',onClick:d[3]||(d[3]=e=>c.value='main')},'è¿”å›')])):'items'===c.value?((0,s.openBlock)(),(0,s.createElementBlock)('div',Ae,[t.value.items.filter(e=>e.quantity>0).length>0?((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,{key:0},(0,s.renderList)(t.value.items.filter(e=>e.quantity>0),e=>((0,s.openBlock)(),(0,s.createBlock)(u,{key:e.id,hover:!0,onClick:n=>async function(e){if('playerInput'!==r.phase||e.quantity<=0)return void(e.quantity<=0&&V(`${e.name} æ•°é‡ä¸è¶³ï¼Œæ— æ³•ä½¿ç”¨`,'system','info'));const n=x(t.value),s=x(a.value),o=n.items.findIndex(t=>t.id===e.id);o>-1&&(n.items[o].quantity-=1,V(`${n.name} ä½¿ç”¨äº† ${e.name}ï¼Œå‰©ä½™æ•°é‡ï¼š${n.items[o].quantity}`,'system','info'));const l=e.effect(n,s);V(l.message,l.source,l.type),e.staminaRestore&&V(`${n.name} çš„è€åŠ›å˜åŒ–ï¼š${t.value.stats.currentEndurance} â†’ ${n.stats.currentEndurance}`,'system','info'),e.pleasureReduce&&V(`${n.name} çš„å¿«æ„Ÿå˜åŒ–ï¼š${t.value.stats.currentPleasure} â†’ ${n.stats.currentPleasure}`,'system','info'),t.value=n,a.value=s,await b(),c.value='main',h(),V(`--- ç»§ç»­ ${n.name} çš„å›åˆ ---`,'system','info')}(e),class:'item-card'},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)('div',Te,[(0,s.createElementVNode)('span',Ie,(0,s.toDisplayString)(e.name),1),(0,s.createElementVNode)('span',Re,'x'+(0,s.toDisplayString)(e.quantity),1)]),(0,s.createElementVNode)('p',Le,(0,s.toDisplayString)(e.description),1),e.staminaRestore||e.pleasureReduce?((0,s.openBlock)(),(0,s.createElementBlock)('div',Oe,[e.staminaRestore?((0,s.openBlock)(),(0,s.createElementBlock)('span',je,[d[17]||(d[17]=(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'12',height:'12',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('polyline',{points:'22 12 18 12 15 21 9 3 6 12 2 12'})],-1)),(0,s.createTextVNode)(' +'+(0,s.toDisplayString)(e.staminaRestore)+' è€åŠ› ',1)])):(0,s.createCommentVNode)('v-if',!0),e.pleasureReduce?((0,s.openBlock)(),(0,s.createElementBlock)('span',Fe,[d[18]||(d[18]=(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'12',height:'12',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('path',{d:'M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z'})],-1)),(0,s.createTextVNode)(' -'+(0,s.toDisplayString)(e.pleasureReduce)+' å¿«æ„Ÿ ',1)])):(0,s.createCommentVNode)('v-if',!0)])):(0,s.createCommentVNode)('v-if',!0)]),_:2},1032,['onClick']))),128)):((0,s.openBlock)(),(0,s.createElementBlock)('div',We,[...d[19]||(d[19]=[(0,s.createElementVNode)('p',{class:'empty-text'},'èƒŒåŒ…ä¸­æ²¡æœ‰å¯ç”¨çš„æˆ˜æ–—ç”¨å“',-1)])])),(0,s.createElementVNode)('button',{class:'back-btn',onClick:d[4]||(d[4]=e=>c.value='main')},'è¿”å›')])):(0,s.createCommentVNode)('v-if',!0)]),_:1})])])]),(0,s.createCommentVNode)(' èƒœè´Ÿç»“ç®—é®ç½© '),((0,s.openBlock)(),(0,s.createBlock)(s.Teleport,{to:'body'},['victory'===r.phase||'defeat'===r.phase?((0,s.openBlock)(),(0,s.createElementBlock)('div',Ue,[(0,s.createElementVNode)('div',He,[(0,s.createElementVNode)('h2',{class:(0,s.normalizeClass)(['result-title',r.phase])},(0,s.toDisplayString)('victory'===r.phase?'å®Œå…¨èƒœåˆ©':'å½»åº•è´¥åŒ—'),3),d[21]||(d[21]=(0,s.createElementVNode)('p',{class:'result-subtitle'},'æˆ˜æ–—ç»“æŸ',-1)),(0,s.createElementVNode)('button',{class:'btn btn-process',onClick:A},[...d[20]||(d[20]=[(0,s.createElementVNode)('svg',{xmlns:'http://www.w3.org/2000/svg',width:'20',height:'20',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2'},[(0,s.createElementVNode)('path',{d:'M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z'})],-1),(0,s.createTextVNode)(' å‘é€æ—¥å¿—è¾“å‡ºè¿‡ç¨‹ ',-1)])])])])):(0,s.createCommentVNode)('v-if',!0)]))]),(0,s.createCommentVNode)(' æˆ˜æ–—ç‰¹æ•ˆ '),f.value?((0,s.openBlock)(),(0,s.createBlock)(ce,{key:0,type:f.value,show:p.value},null,8,['type','show'])):(0,s.createCommentVNode)('v-if',!0)]);var v}}}),qe=(0,c.A)(Ke,[['__scopeId','data-v-48dc8be9']]),Xe=z,Ge=Xe.z.object({é­…åŠ›åŠ æˆ:Xe.z.coerce.number().prefault(0),å¹¸è¿åŠ æˆ:Xe.z.coerce.number().prefault(0),åŸºç¡€æ€§æ–—åŠ›åŠ æˆ:Xe.z.coerce.number().prefault(0),åŸºç¡€æ€§æ–—åŠ›æˆç®—:Xe.z.coerce.number().prefault(0),åŸºç¡€å¿è€åŠ›åŠ æˆ:Xe.z.coerce.number().prefault(0),åŸºç¡€å¿è€åŠ›æˆç®—:Xe.z.coerce.number().prefault(0),é—ªé¿ç‡åŠ æˆ:Xe.z.coerce.number().prefault(0),æš´å‡»ç‡åŠ æˆ:Xe.z.coerce.number().prefault(0),æ„å¿—åŠ›åŠ æˆ:Xe.z.coerce.number().prefault(0)}).prefault({}),Ye=Xe.z.object({çŠ¶æ€åˆ—è¡¨:Xe.z.record(Xe.z.string(),Xe.z.coerce.number().describe('å‰©ä½™å›åˆ')).prefault({}),åŠ æˆç»Ÿè®¡:Ge}).prefault({}),Ze=Xe.z.object({å¥½æ„Ÿåº¦:Xe.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),å…³ç³»ç±»å‹:Xe.z.enum(['é™Œç”Ÿäºº','åŒå­¦','æœ‹å‹','æ‹äºº','ä¸»ä»†','å®Œå…¨è‡£æœ','ä»‡æ•Œ']).catch('é™Œç”Ÿäºº').prefault('é™Œç”Ÿäºº')}).prefault({}),Je=Xe.z.object({æ•ˆæœç±»å‹:Xe.z.enum(['æ€§æ–—åŠ›','å¿è€åŠ›','é­…åŠ›','å¹¸è¿','é—ªé¿ç‡','æš´å‡»ç‡','æ„å¿—åŠ›','æŸç¼š']).catch('æ€§æ–—åŠ›').prefault('æ€§æ–—åŠ›'),æ•ˆæœå€¼:Xe.z.coerce.number().prefault(0),æ˜¯å¦ä¸ºç™¾åˆ†æ¯”:Xe.z.boolean().prefault(!1),æŒç»­å›åˆæ•°:Xe.z.coerce.number().min(0).prefault(0)}).prefault({}),Qe=Xe.z.object({åŸºæœ¬ä¿¡æ¯:Xe.z.object({æŠ€èƒ½åç§°:Xe.z.string().prefault(''),æŠ€èƒ½æè¿°:Xe.z.string().prefault(''),æŠ€èƒ½ç­‰çº§:Xe.z.coerce.number().transform(e=>_.clamp(e,1,5)).prefault(1),ç¨€æœ‰åº¦:Xe.z.enum(['C','B','A','S','SS']).catch('C').prefault('C')}).prefault({}),å†·å´ä¸æ¶ˆè€—:Xe.z.object({è€åŠ›æ¶ˆè€—:Xe.z.coerce.number().min(0).prefault(0),å†·å´å›åˆæ•°:Xe.z.coerce.number().min(0).prefault(0)}).prefault({}),ä¼¤å®³ä¸æ•ˆæœ:Xe.z.object({ä¼¤å®³æ¥æº:Xe.z.enum(['æ€§æ–—åŠ›','é­…åŠ›','å¹¸è¿','æ„å¿—åŠ›','å›ºå®šå€¼','ç›®æ ‡å¿«æ„Ÿ']).catch('æ€§æ–—åŠ›').prefault('æ€§æ–—åŠ›'),ç³»æ•°:Xe.z.coerce.number().prefault(100),åŸºç¡€å‘½ä¸­ç‡:Xe.z.coerce.number().prefault(100),æ•ˆæœåˆ—è¡¨:Xe.z.record(Xe.z.string(),Je).prefault({})}).prefault({}),ç‰¹æ®Šæœºåˆ¶:Xe.z.object({æ˜¯å¦å¿½è§†é˜²å¾¡:Xe.z.boolean().prefault(!1),æ˜¯å¦å¯è¢«é—ªé¿:Xe.z.boolean().prefault(!0)}).prefault({})}),et=Xe.z.object({åç§°:Xe.z.string().prefault(''),ç­‰çº§:Xe.z.enum(['C','B','A','S','SS']).catch('C').prefault('C'),åŠ æˆå±æ€§:Ge,æè¿°:Xe.z.string().prefault('')}).prefault({}),tt=Xe.z.object({ç­‰çº§:Xe.z.enum(['C','B','A','S','SS']).catch('C').prefault('C'),æè¿°:Xe.z.string().prefault('')}),at=tt.extend({ç±»å‹:Xe.z.literal('è£…å¤‡'),åŠ æˆå±æ€§:Ge,éƒ¨ä½:Xe.z.enum(['ä¸»è£…å¤‡','å‰¯è£…å¤‡','é¥°å“','ç‰¹æ®Šè£…å¤‡']),æ•°é‡:Xe.z.literal(1).prefault(1)}),nt=tt.extend({ç±»å‹:Xe.z.literal('æ¶ˆè€—å“'),åŠ æˆå±æ€§:Ge.optional(),è€åŠ›å¢åŠ :Xe.z.coerce.number().optional(),å¿«æ„Ÿé™ä½:Xe.z.coerce.number().optional(),æˆ˜æ–—ç”¨å“:Xe.z.boolean().prefault(!1),æ•°é‡:Xe.z.coerce.number().min(0).prefault(1)}),st=tt.extend({ç±»å‹:Xe.z.literal('å…¶ä»–'),æ•°é‡:Xe.z.coerce.number().min(0).prefault(1)}),rt=Xe.z.discriminatedUnion('ç±»å‹',[at,nt,st]),ot=Xe.z.object({è§’è‰²åŸºç¡€:Xe.z.object({_ç­‰çº§:Xe.z.coerce.number().transform(e=>_.clamp(e,1,100)).prefault(1),ç»éªŒå€¼:Xe.z.coerce.number().min(0).prefault(0),å£°æœ›:Xe.z.coerce.number().transform(e=>_.clamp(e,-1e4,1e4)).prefault(0),_æ®µä½:Xe.z.enum(['æ— æ®µä½','D','C','B','A','S','SS','SSS']).prefault('æ— æ®µä½'),æ®µä½ç§¯åˆ†:Xe.z.coerce.number().transform(e=>_.clamp(e,0,9999)).prefault(0)}).prefault({}),æ ¸å¿ƒçŠ¶æ€:Xe.z.object({$å±æ€§ç‚¹:Xe.z.coerce.number().min(0).prefault(0),$æŠ€èƒ½ç‚¹:Xe.z.coerce.number().min(0).prefault(0),$æœ€å¤§è€åŠ›:Xe.z.coerce.number().min(1).prefault(100),$è€åŠ›:Xe.z.coerce.number().min(0).prefault(100),$æœ€å¤§å¿«æ„Ÿ:Xe.z.coerce.number().min(1).prefault(100),$å¿«æ„Ÿ:Xe.z.coerce.number().min(0).prefault(0),å •è½åº¦:Xe.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),_æ½œåŠ›:Xe.z.coerce.number().transform(e=>_.clamp(e,5,10)).prefault(5),_é­…åŠ›:Xe.z.coerce.number().min(0).prefault(10),$åŸºç¡€é­…åŠ›:Xe.z.coerce.number().min(0).prefault(10),_å¹¸è¿:Xe.z.coerce.number().min(0).prefault(10),$åŸºç¡€å¹¸è¿:Xe.z.coerce.number().min(0).prefault(10),$åŸºç¡€æ€§æ–—åŠ›:Xe.z.coerce.number().prefault(10),$åŸºç¡€å¿è€åŠ›:Xe.z.coerce.number().prefault(10),_é—ªé¿ç‡:Xe.z.coerce.number().transform(e=>_.clamp(e,0,60)).prefault(0),$åŸºç¡€é—ªé¿ç‡:Xe.z.coerce.number().min(0).prefault(0),_æš´å‡»ç‡:Xe.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(0),$åŸºç¡€æš´å‡»ç‡:Xe.z.coerce.number().min(0).prefault(0),æ„å¿—åŠ›:Xe.z.coerce.number().transform(e=>_.clamp(e,0,100)).prefault(100),$åŸºç¡€æ„å¿—åŠ›:Xe.z.coerce.number().min(0).prefault(100)}).prefault({}),ä¸´æ—¶çŠ¶æ€:Ye,æ°¸ä¹…çŠ¶æ€:Xe.z.object({çŠ¶æ€åˆ—è¡¨:Xe.z.array(Xe.z.string()).prefault([]),åŠ æˆç»Ÿè®¡:Ge}).prefault({}),æ€§æ–—ç³»ç»Ÿ:Xe.z.object({å¯¹æ‰‹åç§°:Xe.z.string().prefault(''),æ€§æ–—ç±»å‹:Xe.z.enum(['æ—¥å¸¸åˆ‡ç£‹','å‡æ®µèµ›','å†³æ–—','æ“‚å°èµ›','æ ¡å†…èµ›','å¤šæ ¡è”èµ›','é»‘æš—å†³èµ›','æ— ']).catch('æ— ').prefault('æ— '),èƒœè´Ÿè§„åˆ™:Xe.z.object({é«˜æ½®æ¬¡æ•°ä¸Šé™:Xe.z.coerce.number().prefault(1),å…è®¸è®¤è¾“:Xe.z.boolean().prefault(!0)}).prefault({}),å½“å‰å›åˆ:Xe.z.coerce.number().min(0).prefault(0),è¡ŒåŠ¨æ—¥å¿—:Xe.z.record(Xe.z.string(),Xe.z.string()).prefault({}),é«˜æ½®æ¬¡æ•°:Xe.z.coerce.number().prefault(0),å®æ—¶æ€§æ–—åŠ›:Xe.z.coerce.number().prefault(0),å®æ—¶å¿è€åŠ›:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹é­…åŠ›:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹å¹¸è¿:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹é—ªé¿ç‡:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹æš´å‡»ç‡:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹æ„å¿—åŠ›:Xe.z.coerce.number().prefault(100),å¯¹æ‰‹è€åŠ›:Xe.z.coerce.number().prefault(100),å¯¹æ‰‹æœ€å¤§è€åŠ›:Xe.z.coerce.number().prefault(100),å¯¹æ‰‹å¿«æ„Ÿ:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹æœ€å¤§å¿«æ„Ÿ:Xe.z.coerce.number().prefault(100),å¯¹æ‰‹é«˜æ½®æ¬¡æ•°:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹æ€§æ–—åŠ›:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹å¿è€åŠ›:Xe.z.coerce.number().prefault(0),å¯¹æ‰‹ä¸´æ—¶çŠ¶æ€:Ye,å¯¹æ‰‹æŠ€èƒ½å†·å´:Xe.z.record(Xe.z.string(),Xe.z.coerce.number()).prefault({}),å¯¹æ‰‹å¯ç”¨æŠ€èƒ½:Xe.z.record(Xe.z.string(),Qe).prefault({}),æˆ˜æ–—ç‰©å“:Xe.z.record(Xe.z.string(),Xe.z.number()).prefault({})}).prefault({}),å…³ç³»ç³»ç»Ÿ:Xe.z.object({åœ¨åœºäººç‰©:Xe.z.array(Xe.z.string()).prefault([])}).catchall(Ze).prefault({}),ä»»åŠ¡ç³»ç»Ÿ:Xe.z.object({ä¸»çº¿ä»»åŠ¡:Xe.z.object({åç§°:Xe.z.string().prefault(''),æè¿°:Xe.z.string().prefault(''),çŠ¶æ€:Xe.z.enum(['è¿›è¡Œä¸­','å·²å®Œæˆ','å·²å¤±è´¥','å·²æ”¾å¼ƒ']).catch('è¿›è¡Œä¸­').prefault('è¿›è¡Œä¸­'),ç›®æ ‡:Xe.z.record(Xe.z.string(),Xe.z.any()).prefault({}),å¥–åŠ±:Xe.z.string().prefault(''),æœŸé™:Xe.z.string().prefault('æ— ')}).prefault({}),æ”¯çº¿ä»»åŠ¡:Xe.z.record(Xe.z.string(),Xe.z.object({æè¿°:Xe.z.string().prefault(''),ç±»å‹:Xe.z.enum(['æ—¥å¸¸','ç‰¹æ®Š','é™æ—¶','éšè—']).catch('æ—¥å¸¸').prefault('æ—¥å¸¸'),çŠ¶æ€:Xe.z.enum(['è¿›è¡Œä¸­','å·²å®Œæˆ','å·²å¤±è´¥','å·²æ”¾å¼ƒ']).catch('è¿›è¡Œä¸­').prefault('è¿›è¡Œä¸­'),ç›®æ ‡:Xe.z.record(Xe.z.string(),Xe.z.any()).prefault({}),å¥–åŠ±:Xe.z.string().prefault(''),æœŸé™:Xe.z.string().prefault('æ— ')}).prefault({})).prefault({}),å·²å®Œæˆè®°å½•:Xe.z.array(Xe.z.string()).prefault([])}).prefault({}),ç‰©å“ç³»ç»Ÿ:Xe.z.object({å­¦å›­é‡‘å¸:Xe.z.coerce.number().min(0).prefault(0),èƒŒåŒ…:Xe.z.record(Xe.z.string(),rt).prefault({}),_è£…å¤‡æ :Xe.z.object({ä¸»è£…å¤‡:et,å‰¯è£…å¤‡:et,é¥°å“1:et,é¥°å“2:et,ç‰¹æ®Šè£…å¤‡:et}).prefault({}),è£…å¤‡æ€»åŠ æˆ:Ge}).prefault({}),ä½ç½®ç³»ç»Ÿ:Xe.z.object({åæ ‡:Xe.z.string().prefault('[1-1]'),æ¥¼å±‚:Xe.z.coerce.number().prefault(1),åœ°ç‚¹åç§°:Xe.z.string().prefault('åˆå§‹ç‚¹')}).prefault({}),æ—¶é—´ç³»ç»Ÿ:Xe.z.object({æ—¥æœŸ:Xe.z.string().prefault('2025-3-17'),æ˜ŸæœŸ:Xe.z.coerce.number().transform(e=>_.clamp(e,1,7)).prefault(1),æ—¶é—´:Xe.z.string().prefault('08:00')}).prefault({}),åŠ¿åŠ›å£°æœ›:Xe.z.object({å­¦ç”Ÿä¼š:Xe.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),å¥³æƒåä¼š:Xe.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),BFç¤¾:Xe.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),ä½“è‚²è”ç›Ÿ:Xe.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),ç ”ç©¶ä¼š:Xe.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),åœ°ä¸‹è”ç›Ÿ:Xe.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),ç”·æ€§è‡ªä¿è”ç›Ÿ:Xe.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0),é›Œå •ä¼š:Xe.z.coerce.number().transform(e=>_.clamp(e,-100,100)).prefault(0)}).prefault({}),æŠ€èƒ½ç³»ç»Ÿ:Xe.z.object({ä¸»åŠ¨æŠ€èƒ½:Xe.z.record(Xe.z.string(),Qe).prefault({})}).prefault({})});$(()=>{e(ot),console.info('[æˆ˜æ–—ç•Œé¢] MVU Schemaå·²æ³¨å†Œ')}),$(()=>{(0,s.createApp)(qe).mount('#app'),console.info('[æ€§æ–—å­¦å›­] æˆ˜æ–—ç•Œé¢å·²åŠ è½½')}),$(window).on('pagehide',()=>{console.info('[æ€§æ–—å­¦å›­] æˆ˜æ–—ç•Œé¢å·²å¸è½½')});
//# sourceMappingURL=index.js.map</script><style>@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&display=swap);
/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}:root{--color-midnight:#09090b;--color-deepblue:#0f172a;--color-neonblue:#38bdf8;--color-neoncyan:#06b6d4;--color-neonpink:#f472b6;--color-neonpurple:#c084fc}html,body{font-family:"Noto Sans SC",system-ui,-apple-system,sans-serif;background:var(--color-midnight);color:#e2e8f0;line-height:1.5;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:hsla(0,0%,100%,.05);border-radius:3px}::-webkit-scrollbar-thumb{background:hsla(0,0%,100%,.2);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:hsla(0,0%,100%,.3)}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.no-scrollbar::-webkit-scrollbar{display:none}::selection{background:rgba(56,189,248,.3);color:#fff}button{font-family:inherit;cursor:pointer;border:none;background:none;color:inherit}img{max-width:100%;height:auto;display:block}a{color:inherit;text-decoration:none}ul,ol{list-style:none}
.bg-ambience[data-v-5c5045ec]{position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:0;overflow:hidden;background:#020617}.bg-gradient[data-v-5c5045ec]{position:absolute;inset:0;background:linear-gradient(to bottom,#0f172a,#050510,#000);opacity:.9}.bg-texture[data-v-5c5045ec]{position:absolute;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");opacity:.05}.glow[data-v-5c5045ec]{position:absolute;border-radius:50%;filter:blur(100px);animation:pulseSlow-5c5045ec 8s ease-in-out infinite}.glow-top[data-v-5c5045ec]{top:-20%;left:-10%;width:60vw;height:60vw;background:rgba(67,56,202,.2)}.glow-bottom[data-v-5c5045ec]{bottom:-10%;right:-10%;width:50vw;height:50vw;background:rgba(159,18,57,.1);animation-delay:2s}.dust-particle[data-v-5c5045ec]{position:absolute;width:4px;height:4px;background:hsla(0,0%,100%,.2);border-radius:50%;filter:blur(1px);animation:floatUp-5c5045ec 20s linear infinite}.petal[data-v-5c5045ec]{position:absolute;width:12px;height:12px;background:rgba(127,29,29,.4);border-radius:80% 0 55% 50%/55% 0 80% 50%;animation:fallRotate-5c5045ec 15s linear infinite;box-shadow:0 0 4px rgba(0,0,0,.2)}.flicker-overlay[data-v-5c5045ec]{position:absolute;inset:0;background:#000;animation:flicker-5c5045ec 5s ease-in-out infinite;mix-blend-mode:overlay}.vignette[data-v-5c5045ec]{position:absolute;inset:0;background:radial-gradient(circle at center,transparent 0%,rgba(0,0,0,0.8) 100%)}@keyframes pulseSlow-5c5045ec{0%,100%{opacity:.15;transform:scale(1)}50%{opacity:.25;transform:scale(1.05)}}@keyframes floatUp-5c5045ec{0%{transform:translateY(100vh) translateX(0);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-100vh) translateX(20px);opacity:0}}@keyframes fallRotate-5c5045ec{0%{transform:translateY(-100vh) rotate(0deg);opacity:0}10%{opacity:.8}90%{opacity:.8}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}@keyframes flicker-5c5045ec{0%,100%{opacity:0}50%{opacity:.02}55%{opacity:.01}60%{opacity:.03}}
.card[data-v-61077dd9]{background:rgba(15,23,42,.6);backdrop-filter:blur(12px);border:1px solid hsla(0,0%,100%,.1);border-radius:.75rem;padding:1rem;box-shadow:0 25px 50px -12px rgba(0,0,0,.25)}.card-hover[data-v-61077dd9]{cursor:pointer;transition:all .3s ease}.card-hover[data-v-61077dd9]:hover{background:rgba(15,23,42,.8);border-color:rgba(56,189,248,.3);box-shadow:0 0 20px rgba(56,189,248,.2)}
.progress-container[data-v-07aaeb53]{width:100%;margin-bottom:.75rem}.progress-header[data-v-07aaeb53]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.25rem;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;font-weight:700;color:#cbd5e1}.progress-label[data-v-07aaeb53]{display:flex;align-items:center;gap:.5rem}.progress-icon[data-v-07aaeb53]{opacity:.8;display:flex;align-items:center}.progress-icon[data-v-07aaeb53] svg{width:12px;height:12px}.progress-value[data-v-07aaeb53]{font-family:ui-monospace,monospace;color:hsla(0,0%,100%,.8)}.progress-track[data-v-07aaeb53]{width:100%;border-radius:9999px;overflow:hidden;backdrop-filter:blur(4px);border:1px solid hsla(0,0%,100%,.05);height:.5rem}.progress-track.track-blue[data-v-07aaeb53]{background-color:rgba(30,64,175,.4)}.progress-track.track-red[data-v-07aaeb53]{background-color:rgba(127,29,29,.4)}.progress-track.track-purple[data-v-07aaeb53]{background-color:rgba(88,28,135,.4)}.progress-track.track-green[data-v-07aaeb53]{background-color:rgba(20,83,45,.4)}.progress-track.track-pink[data-v-07aaeb53]{background-color:rgba(157,23,77,.4)}.progress-fill[data-v-07aaeb53]{height:100%;transition:all .7s ease-out;position:relative}.progress-fill.fill-blue[data-v-07aaeb53]{background:linear-gradient(to right,#06b6d4,#2563eb);box-shadow:0 0 10px rgba(6,182,212,.5)}.progress-fill.fill-red[data-v-07aaeb53]{background:linear-gradient(to right,#f43f5e,#dc2626);box-shadow:0 0 10px rgba(225,29,72,.5)}.progress-fill.fill-purple[data-v-07aaeb53]{background:linear-gradient(to right,#8b5cf6,#9333ea);box-shadow:0 0 10px rgba(124,58,237,.5)}.progress-fill.fill-green[data-v-07aaeb53]{background:linear-gradient(to right,#34d399,#16a34a);box-shadow:0 0 10px rgba(16,185,129,.5)}.progress-fill.fill-pink[data-v-07aaeb53]{background:linear-gradient(to right,#f472b6,#fb7185);box-shadow:0 0 10px rgba(244,114,182,.5)}.shimmer[data-v-07aaeb53]{position:absolute;inset:0;background:hsla(0,0%,100%,.2);animation:shimmer-07aaeb53 2s infinite}@keyframes shimmer-07aaeb53{0%,100%{opacity:.2}50%{opacity:.4}}
.stats-panel[data-v-0a8a4b1c]{display:grid;grid-template-columns:1fr 1fr;gap:.25rem .5rem;width:100%;max-width:20rem;animation:fadeIn-0a8a4b1c .3s ease}.stats-compact[data-v-0a8a4b1c]{max-width:180px}.stat-item[data-v-0a8a4b1c]{display:flex;align-items:center;justify-content:space-between;padding:.5rem;border-radius:.5rem;background:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,100%,.05)}.stats-compact .stat-item[data-v-0a8a4b1c]{padding:.25rem;background:rgba(0,0,0,0);border:none}.stat-full[data-v-0a8a4b1c]{grid-column:span 2}.stat-info[data-v-0a8a4b1c]{display:flex;align-items:center;gap:.5rem}.stat-label[data-v-0a8a4b1c]{font-size:.75rem;font-weight:500;text-transform:uppercase;color:#94a3b8}.stats-compact .stat-label[data-v-0a8a4b1c]{font-size:.625rem}.stat-value[data-v-0a8a4b1c]{font-size:.875rem;font-weight:700;font-family:ui-monospace,monospace;color:#fff}.stats-compact .stat-value[data-v-0a8a4b1c]{font-size:.75rem}.text-pink-400[data-v-0a8a4b1c]{color:#f472b6}.text-green-400[data-v-0a8a4b1c]{color:#4ade80}.text-cyan-400[data-v-0a8a4b1c]{color:#22d3ee}.text-orange-400[data-v-0a8a4b1c]{color:#fb923c}.text-rose-400[data-v-0a8a4b1c]{color:#fb7185}.text-yellow-400[data-v-0a8a4b1c]{color:#facc15}.text-purple-400[data-v-0a8a4b1c]{color:#c084fc}@keyframes fadeIn-0a8a4b1c{from{opacity:0}to{opacity:1}}
.character-panel[data-v-75f7a09e]{flex:1;min-width:0;display:flex;flex-direction:column;align-items:center;position:relative;max-width:45%;transition:all .3s ease}@media (min-width:1024px){.character-panel[data-v-75f7a09e]{max-width:28rem}}.name-badge[data-v-75f7a09e]{margin-bottom:.5rem;padding:.25rem .75rem;border-radius:9999px;border:1px solid hsla(0,0%,100%,.1);backdrop-filter:blur(12px);box-shadow:0 10px 15px -3px rgba(0,0,0,.1);display:flex;align-items:center;gap:.5rem;z-index:20;max-width:100%;position:relative}@media (min-width:1024px){.name-badge[data-v-75f7a09e]{padding:.5rem 1.5rem}}.badge-player[data-v-75f7a09e]{background:rgba(6,78,59,.6);color:#a5f3fc}.badge-enemy[data-v-75f7a09e]{background:rgba(76,5,25,.6);color:#fecdd3}.name-text[data-v-75f7a09e]{font-weight:700;font-size:.75rem;letter-spacing:.05em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (min-width:1024px){.name-text[data-v-75f7a09e]{font-size:1.125rem}}.intention-hint[data-v-75f7a09e]{display:none;position:absolute;top:-2rem;right:0;background:rgba(234,179,8,.1);border:1px solid rgba(234,179,8,.5);color:#fef08a;font-size:.75rem;padding:.25rem .5rem;border-radius:.25rem;animation:pulse-75f7a09e 2s ease-in-out infinite;align-items:center;white-space:nowrap}@media (min-width:1024px){.intention-hint[data-v-75f7a09e]{display:flex}}.intention-icon[data-v-75f7a09e]{margin-right:.25rem}.avatar-container[data-v-75f7a09e]{position:relative;width:100%;aspect-ratio:1;max-width:160px;margin-bottom:.5rem;cursor:help}@media (min-width:1024px){.avatar-container[data-v-75f7a09e]{max-width:280px;margin-bottom:1.5rem}}.avatar-container:hover .avatar-glow[data-v-75f7a09e]{opacity:.4}.avatar-container:hover .avatar-image[data-v-75f7a09e]{filter:brightness(0.5) blur(2px)}.avatar-container:hover .stats-overlay[data-v-75f7a09e]{opacity:1}.avatar-glow[data-v-75f7a09e]{position:absolute;inset:0;border-radius:1rem;filter:blur(30px);opacity:.2;transition:opacity .7s ease}@media (min-width:1024px){.avatar-glow[data-v-75f7a09e]{filter:blur(48px)}}.glow-player[data-v-75f7a09e]{background:#06b6d4}.glow-enemy[data-v-75f7a09e]{background:#f43f5e}.avatar-image[data-v-75f7a09e]{width:100%;height:100%;object-fit:cover;border-radius:.75rem;border:2px solid;box-shadow:0 25px 50px -12px rgba(0,0,0,.5);z-index:10;position:relative;transition:all .3s ease}@media (min-width:1024px){.avatar-image[data-v-75f7a09e]{border-radius:1rem}}.avatar-player[data-v-75f7a09e]{border-color:rgba(6,182,212,.3)}.avatar-enemy[data-v-75f7a09e]{border-color:rgba(244,63,94,.3)}.avatar-pulse[data-v-75f7a09e]{animation:pulse-75f7a09e 1s ease-in-out infinite}.avatar-scale[data-v-75f7a09e]{transform:scale(1.05)}.avatar-climax[data-v-75f7a09e]{filter:brightness(1.25) saturate(2);animation:pulse-75f7a09e .5s ease-in-out infinite}.mobile-warning[data-v-75f7a09e]{display:block;position:absolute;top:-0.5rem;right:-0.5rem;z-index:30;background:#eab308;color:#000;border-radius:50%;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;animation:pulse-75f7a09e 1s ease-in-out infinite;border:2px solid #fef08a;box-shadow:0 4px 6px rgba(0,0,0,.2)}.mobile-warning span[data-v-75f7a09e]{font-size:.625rem;font-weight:700}@media (min-width:1024px){.mobile-warning[data-v-75f7a09e]{display:none}}.stats-overlay[data-v-75f7a09e]{position:absolute;inset:0;z-index:20;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:all .3s ease;padding:.5rem;border-radius:1rem;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);border:1px solid hsla(0,0%,100%,.1)}.overlay-title[data-v-75f7a09e]{font-size:.625rem;color:hsla(0,0%,100%,.7);text-transform:uppercase;letter-spacing:.1em;margin-bottom:.25rem;font-weight:700}@media (min-width:1024px){.overlay-title[data-v-75f7a09e]{font-size:.75rem;margin-bottom:.5rem}}.bars-container[data-v-75f7a09e]{width:100%;display:flex;flex-direction:column;gap:.25rem;padding:0}@media (min-width:1024px){.bars-container[data-v-75f7a09e]{gap:.5rem;padding:0 1rem}}.climax-bar[data-v-75f7a09e]{width:100%;display:flex;gap:.5rem}@keyframes pulse-75f7a09e{0%,100%{opacity:1}50%{opacity:.6}}
.combat-log[data-v-81b1ad36]{position:relative;background:rgba(0,0,0,.4);backdrop-filter:blur(12px);border-radius:.75rem;border:1px solid hsla(0,0%,100%,.1);box-shadow:inset 0 2px 4px rgba(0,0,0,.1);overflow:hidden;transition:all .3s ease;height:3rem}.combat-log.log-expanded[data-v-81b1ad36]{height:12rem}.log-header[data-v-81b1ad36]{position:absolute;top:0;left:0;width:100%;height:2rem;background:hsla(0,0%,100%,.05);display:flex;align-items:center;justify-content:space-between;padding:0 .75rem;cursor:pointer;z-index:10;transition:background .2s}.log-header[data-v-81b1ad36]:hover{background:hsla(0,0%,100%,.1)}.log-title[data-v-81b1ad36]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;font-weight:700;color:#94a3b8;text-transform:uppercase;letter-spacing:.1em}.log-toggle[data-v-81b1ad36]{color:#94a3b8}.log-preview[data-v-81b1ad36]{position:absolute;top:2rem;left:1rem;right:1rem;font-size:.875rem;color:#cbd5e1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.log-content[data-v-81b1ad36]{padding-top:2.5rem;padding-bottom:.5rem;padding-left:1rem;padding-right:1rem;height:100%;overflow-y:auto}.log-content.log-hidden[data-v-81b1ad36]{visibility:hidden}.log-empty[data-v-81b1ad36]{color:#64748b;text-align:center;font-style:italic;margin-top:2.5rem}.log-entry[data-v-81b1ad36]{animation:slideUp-81b1ad36 .2s ease;padding-bottom:.25rem;border-bottom:1px solid hsla(0,0%,100%,.05);margin-bottom:.25rem;font-size:.875rem;font-family:ui-monospace,monospace}.log-entry[data-v-81b1ad36]:last-of-type{border-bottom:none}.log-turn[data-v-81b1ad36]{opacity:.5;font-size:.75rem;margin-right:.5rem}.log-critical[data-v-81b1ad36]{color:#facc15;font-weight:700}.log-damage[data-v-81b1ad36]{color:#fca5a5}.log-heal[data-v-81b1ad36]{color:#86efac}.log-info[data-v-81b1ad36]{color:#cbd5e1}@keyframes slideUp-81b1ad36{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.combat-effect[data-v-6dadf61e]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;pointer-events:none;-webkit-user-select:none;user-select:none}.effect-content[data-v-6dadf61e]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem}.effect-icon[data-v-6dadf61e]{font-size:8rem;line-height:1;animation:effect-pulse-6dadf61e .6s ease-out;filter:drop-shadow(0 0 20px currentColor)}.effect-text[data-v-6dadf61e]{font-size:3rem;font-weight:900;letter-spacing:.1em;text-transform:uppercase;animation:effect-slide-up-6dadf61e .6s ease-out;text-shadow:0 0 20px currentColor,0 0 40px currentColor}.critical .effect-icon[data-v-6dadf61e],.critical .effect-text[data-v-6dadf61e]{color:#fbbf24;text-shadow:0 0 20px #fbbf24,0 0 40px #fbbf24,0 0 60px #f59e0b}.dodge .effect-icon[data-v-6dadf61e],.dodge .effect-text[data-v-6dadf61e]{color:#60a5fa;text-shadow:0 0 20px #60a5fa,0 0 40px #3b82f6,0 0 60px #2563eb}.climax .effect-icon[data-v-6dadf61e],.climax .effect-text[data-v-6dadf61e]{color:#f472b6;text-shadow:0 0 20px #f472b6,0 0 40px #ec4899,0 0 60px #db2777;animation:effect-climax-6dadf61e 1s ease-out}.victory .effect-icon[data-v-6dadf61e],.victory .effect-text[data-v-6dadf61e]{color:#4ade80;text-shadow:0 0 20px #4ade80,0 0 40px #22c55e,0 0 60px #16a34a}.defeat .effect-icon[data-v-6dadf61e],.defeat .effect-text[data-v-6dadf61e]{color:#94a3b8;text-shadow:0 0 20px #94a3b8,0 0 40px #64748b,0 0 60px #475569}@keyframes effect-pulse-6dadf61e{0%{transform:scale(0) rotate(0deg);opacity:0}50%{transform:scale(1.2) rotate(180deg);opacity:1}100%{transform:scale(1) rotate(360deg);opacity:1}}@keyframes effect-slide-up-6dadf61e{0%{transform:translateY(50px);opacity:0}100%{transform:translateY(0);opacity:1}}@keyframes effect-climax-6dadf61e{0%,100%{transform:scale(1)}25%{transform:scale(1.1) rotate(5deg)}75%{transform:scale(1.1) rotate(-5deg)}}.effect-fade-enter-active[data-v-6dadf61e],.effect-fade-leave-active[data-v-6dadf61e]{transition:opacity .3s ease}.effect-fade-enter-from[data-v-6dadf61e],.effect-fade-leave-to[data-v-6dadf61e]{opacity:0}
.combat-wrapper[data-v-48dc8be9]{position:relative;min-height:100vh;background:#09090b;font-family:"Noto Sans SC",system-ui,sans-serif;color:#e2e8f0;overflow-x:hidden}.combat-header[data-v-48dc8be9]{position:relative;z-index:20;display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;background:linear-gradient(to bottom,rgba(9,9,11,0.95),transparent);backdrop-filter:blur(10px);border-bottom:1px solid hsla(0,0%,100%,.05)}.header-left[data-v-48dc8be9]{display:flex;align-items:center;gap:.75rem}.terminal-icon[data-v-48dc8be9]{color:#c084fc}.title[data-v-48dc8be9]{font-size:1.75rem;font-weight:900;letter-spacing:-0.025em;background:linear-gradient(135deg,#c084fc,#f472b6,#fb7185);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text;text-shadow:0 0 30px rgba(192,132,252,.5)}.header-right[data-v-48dc8be9]{display:flex;flex-direction:column;align-items:flex-end}.turn-counter[data-v-48dc8be9]{font-size:1.75rem;font-family:ui-monospace,monospace;font-weight:900;background:linear-gradient(135deg,#60a5fa,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text;text-shadow:0 0 20px rgba(96,165,250,.5);letter-spacing:.05em}.phase-indicator[data-v-48dc8be9]{font-size:.75rem;color:#94a3b8;text-transform:uppercase;letter-spacing:.15em;font-weight:600;margin-top:.25rem}.combat-arena[data-v-48dc8be9]{position:relative;z-index:10;max-width:72rem;margin:0 auto;padding:2rem 1rem;padding-bottom:24rem;display:flex;flex-direction:row;align-items:flex-start;justify-content:center;gap:1rem}.vs-divider[data-v-48dc8be9]{display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:.3;padding-top:6rem;flex-shrink:0;width:10%}.divider-line[data-v-48dc8be9]{height:8rem;width:1px;background:linear-gradient(to bottom,transparent,white,transparent)}.vs-text[data-v-48dc8be9]{margin:1rem 0;font-weight:900;font-size:2rem;font-style:italic;font-family:ui-monospace,monospace;color:hsla(0,0%,100%,.5)}.combat-footer[data-v-48dc8be9]{position:fixed;bottom:0;left:0;width:100%;z-index:30;background:linear-gradient(to top,rgba(9,9,11,0.98),rgba(9,9,11,0.85));border-top:1px solid hsla(0,0%,100%,.1);backdrop-filter:blur(30px) saturate(180%);padding:1rem 1.5rem 1.5rem;box-shadow:0 -20px 60px rgba(0,0,0,.7),0 0 0 1px hsla(0,0%,100%,.05) inset}.footer-content[data-v-48dc8be9]{max-width:72rem;margin:0 auto;display:flex;flex-direction:column-reverse;gap:1rem}@media (min-width:1024px){.footer-content[data-v-48dc8be9]{flex-direction:row}}.log-section[data-v-48dc8be9]{width:100%;flex:0 0 30%;max-width:18rem}.action-section[data-v-48dc8be9]{flex:1;min-width:0;display:flex;flex-direction:column;gap:.5rem}.action-header[data-v-48dc8be9]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.tab-btn[data-v-48dc8be9]{padding:.5rem 1.25rem;border-radius:9999px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;background:hsla(0,0%,100%,.05);color:#94a3b8;border:1px solid hsla(0,0%,100%,.1);cursor:pointer;transition:all .3s cubic-bezier(0.4,0,0.2,1)}.tab-btn.active[data-v-48dc8be9]{background:linear-gradient(135deg,rgba(255,255,255,0.2),rgba(255,255,255,0.1));color:#fff;border-color:hsla(0,0%,100%,.3);box-shadow:0 4px 12px rgba(0,0,0,.3),0 0 0 1px hsla(0,0%,100%,.1) inset}.tab-btn[data-v-48dc8be9]:hover:not(.active){color:#fff;background:hsla(0,0%,100%,.1);border-color:hsla(0,0%,100%,.2);transform:translateY(-1px)}.tab-divider[data-v-48dc8be9]{height:1px;width:2rem;background:hsla(0,0%,100%,.2)}.action-hint[data-v-48dc8be9]{font-size:.75rem;color:#94a3b8}.waiting-text[data-v-48dc8be9]{font-size:.875rem;color:#64748b;animation:pulse-48dc8be9 2s ease-in-out infinite}.action-grid[data-v-48dc8be9]{flex:1;position:relative;overflow:hidden}.processing-overlay[data-v-48dc8be9]{position:absolute;inset:0;z-index:10;background:rgba(15,23,42,.5);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;border-radius:.75rem;border:1px solid hsla(0,0%,100%,.05)}.processing-overlay span[data-v-48dc8be9]{color:hsla(0,0%,100%,.5);font-family:ui-monospace,monospace;letter-spacing:.1em}.menu-main[data-v-48dc8be9]{display:flex;gap:.5rem;height:100%;width:100%}.menu-skills[data-v-48dc8be9],.menu-items[data-v-48dc8be9]{display:flex;gap:.5rem;height:100%;width:100%;overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:hsla(0,0%,100%,.2) rgba(0,0,0,0)}.menu-skills[data-v-48dc8be9]::-webkit-scrollbar,.menu-items[data-v-48dc8be9]::-webkit-scrollbar{height:6px}.menu-skills[data-v-48dc8be9]::-webkit-scrollbar-track,.menu-items[data-v-48dc8be9]::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.menu-skills[data-v-48dc8be9]::-webkit-scrollbar-thumb,.menu-items[data-v-48dc8be9]::-webkit-scrollbar-thumb{background:hsla(0,0%,100%,.2);border-radius:3px}.menu-skills[data-v-48dc8be9]::-webkit-scrollbar-thumb:hover,.menu-items[data-v-48dc8be9]::-webkit-scrollbar-thumb:hover{background:hsla(0,0%,100%,.3)}.menu-card[data-v-48dc8be9]{flex:1;min-width:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;padding:1.5rem 1rem;border-radius:1rem;background:linear-gradient(135deg,rgba(255,255,255,0.05),rgba(255,255,255,0.02));border:1px solid hsla(0,0%,100%,.1);transition:all .3s cubic-bezier(0.4,0,0.2,1);cursor:pointer;position:relative;overflow:hidden}.menu-card[data-v-48dc8be9]::before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,0.1),transparent);opacity:0;transition:opacity .3s}.menu-card[data-v-48dc8be9]:hover::before{opacity:1}.menu-card[data-v-48dc8be9]:hover{transform:translateY(-4px) scale(1.02);border-color:hsla(0,0%,100%,.2);box-shadow:0 8px 24px rgba(0,0,0,.4),0 0 0 1px hsla(0,0%,100%,.1) inset}.menu-card span[data-v-48dc8be9]{font-weight:700;white-space:nowrap;font-size:.875rem;color:hsla(0,0%,100%,.9)}.menu-card svg[data-v-48dc8be9]{transition:transform .3s}.menu-card:hover svg[data-v-48dc8be9]{transform:scale(1.1) rotate(5deg)}.icon-blue[data-v-48dc8be9]{color:#38bdf8}.icon-green[data-v-48dc8be9]{color:#4ade80}.icon-yellow[data-v-48dc8be9]{color:#fbbf24}.icon-red[data-v-48dc8be9]{color:#f87171}.skill-card[data-v-48dc8be9],.item-card[data-v-48dc8be9]{flex:0 0 auto;min-width:220px;max-width:280px;width:220px;display:flex;flex-direction:column;justify-content:space-between;position:relative;overflow:hidden;padding:1rem;border-radius:.75rem;background:linear-gradient(135deg,rgba(255,255,255,0.08),rgba(255,255,255,0.03));border:1px solid hsla(0,0%,100%,.1);transition:all .3s cubic-bezier(0.4,0,0.2,1);cursor:pointer}.skill-card[data-v-48dc8be9]:hover:not(.disabled),.item-card[data-v-48dc8be9]:hover:not(.disabled){transform:translateY(-2px);border-color:hsla(0,0%,100%,.2);box-shadow:0 8px 24px rgba(0,0,0,.4),0 0 0 1px hsla(0,0%,100%,.1) inset;background:linear-gradient(135deg,rgba(255,255,255,0.12),rgba(255,255,255,0.05))}.skill-card.disabled[data-v-48dc8be9],.item-card.disabled[data-v-48dc8be9]{opacity:.5;filter:grayscale(0.7);pointer-events:none;cursor:not-allowed}.cooldown-overlay[data-v-48dc8be9]{position:absolute;inset:0;z-index:50;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(15,23,42,.8);backdrop-filter:blur(2px)}.cooldown-overlay svg[data-v-48dc8be9]{color:#38bdf8;margin-bottom:.25rem;animation:pulse-48dc8be9 2s ease-in-out infinite}.cooldown-count[data-v-48dc8be9]{font-size:1.5rem;font-weight:900;color:#fff;letter-spacing:-0.05em}.cooldown-count small[data-v-48dc8be9]{font-size:.625rem;margin-left:2px;vertical-align:top;opacity:.6;font-weight:normal}.skill-header[data-v-48dc8be9],.item-header[data-v-48dc8be9]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.25rem}.skill-name[data-v-48dc8be9]{font-weight:700;font-size:.875rem;color:#38bdf8;overflow:hidden;text-overflow:ellipsis}.skill-name.skill-disabled[data-v-48dc8be9]{color:#94a3b8}.skill-cost[data-v-48dc8be9]{font-size:.625rem;font-family:ui-monospace,monospace;padding:.125rem .25rem;border-radius:.25rem;background:hsla(0,0%,100%,.1);color:#cbd5e1;white-space:nowrap}.skill-cost.cost-danger[data-v-48dc8be9]{background:rgba(239,68,68,.2);color:#fca5a5;border:1px solid rgba(239,68,68,.3)}.skill-desc[data-v-48dc8be9],.item-desc[data-v-48dc8be9]{font-size:.625rem;color:#94a3b8;line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.skill-effect[data-v-48dc8be9]{margin-top:.25rem;padding:.25rem .5rem;background:rgba(56,189,248,.1);border:1px solid rgba(56,189,248,.2);border-radius:.25rem;font-size:.625rem;display:flex;align-items:center;gap:.25rem}.effect-label[data-v-48dc8be9]{color:#94a3b8;font-weight:500}.effect-value[data-v-48dc8be9]{color:#38bdf8;font-weight:600}.skill-type[data-v-48dc8be9]{margin-top:.5rem;font-size:.625rem;text-transform:uppercase;font-weight:700;color:#64748b;transition:color .2s}.skill-type.type-disabled[data-v-48dc8be9]{color:#475569}.item-name[data-v-48dc8be9]{font-weight:700;font-size:.875rem;color:#4ade80}.item-quantity[data-v-48dc8be9]{font-size:.625rem;font-family:ui-monospace,monospace;padding:.125rem .5rem;border-radius:.25rem;background:rgba(16,185,129,.4);border:1px solid rgba(16,185,129,.3);color:#bbf7d0}.item-effect[data-v-48dc8be9]{margin-top:.25rem;display:flex;flex-wrap:wrap;gap:.5rem;font-size:.625rem}.effect-stamina[data-v-48dc8be9]{display:inline-flex;align-items:center;gap:.25rem;padding:.125rem .5rem;background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.3);border-radius:.25rem;color:#4ade80;font-weight:600}.effect-stamina svg[data-v-48dc8be9]{width:12px;height:12px}.effect-pleasure[data-v-48dc8be9]{display:inline-flex;align-items:center;gap:.25rem;padding:.125rem .5rem;background:rgba(236,72,153,.15);border:1px solid rgba(236,72,153,.3);border-radius:.25rem;color:#f472b6;font-weight:600}.effect-pleasure svg[data-v-48dc8be9]{width:12px;height:12px}.back-btn[data-v-48dc8be9]{background:linear-gradient(135deg,rgba(255,255,255,0.1),rgba(255,255,255,0.05));border-radius:.75rem;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700;color:#cbd5e1;min-width:60px;flex-shrink:0;border:1px solid hsla(0,0%,100%,.1);cursor:pointer;transition:all .3s cubic-bezier(0.4,0,0.2,1);padding:.75rem 1rem}.back-btn[data-v-48dc8be9]:hover{background:linear-gradient(135deg,rgba(255,255,255,0.15),rgba(255,255,255,0.1));border-color:hsla(0,0%,100%,.2);transform:translateX(-2px);box-shadow:0 4px 12px rgba(0,0,0,.3)}.empty-items[data-v-48dc8be9]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.empty-text[data-v-48dc8be9]{color:#64748b;font-size:.875rem;text-align:center}.modal-overlay[data-v-48dc8be9]{position:fixed;inset:0;z-index:40;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;padding:1rem;animation:fadeIn-48dc8be9 .3s ease}.climax-modal[data-v-48dc8be9]{background:linear-gradient(to bottom,rgba(88,28,135,0.9),black);border:1px solid rgba(168,85,247,.5);border-radius:1rem;padding:2.5rem;max-width:28rem;width:100%;box-shadow:0 0 50px rgba(168,85,247,.3);text-align:center;position:relative;overflow:hidden}.modal-bg-pattern[data-v-48dc8be9]{position:absolute;inset:0;opacity:.1;background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l30 30-30 30L0 30z' fill='%23fff' fill-opacity='0.1'/%3E%3C/svg%3E");pointer-events:none}.climax-icon[data-v-48dc8be9]{color:#ec4899;margin:0 auto 1rem;animation:pulse-48dc8be9 1.5s ease-in-out infinite}.climax-title[data-v-48dc8be9]{font-size:1.875rem;font-weight:900;color:#fff;margin-bottom:.5rem;letter-spacing:-0.025em}.climax-desc[data-v-48dc8be9]{color:#e9d5ff;margin-bottom:2rem;font-size:.875rem}.climax-actions[data-v-48dc8be9]{display:flex;flex-direction:column;gap:.75rem}.btn[data-v-48dc8be9]{width:100%;padding:1rem;font-weight:700;border-radius:.75rem;display:flex;align-items:center;justify-content:center;gap:.5rem;border:none;cursor:pointer;transition:all .3s;position:relative;overflow:hidden}.btn-process[data-v-48dc8be9]{background:linear-gradient(135deg,#db2777,#ec4899);color:#fff;box-shadow:0 8px 24px rgba(219,39,119,.5),0 0 0 1px hsla(0,0%,100%,.1) inset;font-size:1rem;font-weight:700;letter-spacing:.05em}.btn-process[data-v-48dc8be9]:hover{background:linear-gradient(135deg,#ec4899,#f472b6);transform:translateY(-2px);box-shadow:0 12px 32px rgba(219,39,119,.6),0 0 0 1px hsla(0,0%,100%,.2) inset}.btn-process[data-v-48dc8be9]:active{transform:translateY(0)}.btn-skip[data-v-48dc8be9]{background:hsla(0,0%,100%,.05);color:#cbd5e1;border:1px solid hsla(0,0%,100%,.05)}.btn-skip[data-v-48dc8be9]:hover{background:hsla(0,0%,100%,.1);color:#fff}.result-overlay[data-v-48dc8be9]{position:fixed;inset:0;z-index:50;background:rgba(0,0,0,.8);backdrop-filter:blur(20px);display:flex;align-items:center;justify-content:center;animation:fadeIn-48dc8be9 .3s ease}.result-content[data-v-48dc8be9]{text-align:center;padding:3rem 2rem;background:linear-gradient(135deg,rgba(15,23,42,0.95),rgba(9,9,11,0.98));border-radius:1.5rem;border:1px solid hsla(0,0%,100%,.1);box-shadow:0 20px 60px rgba(0,0,0,.8),0 0 0 1px hsla(0,0%,100%,.05) inset;backdrop-filter:blur(30px);max-width:500px;width:90%;position:relative;overflow:hidden}.result-content[data-v-48dc8be9]::before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 0%,rgba(255,255,255,0.05),transparent 70%);pointer-events:none}.result-title[data-v-48dc8be9]{font-size:4.5rem;font-weight:900;margin-bottom:1rem;letter-spacing:-0.05em;text-shadow:0 0 40px currentColor;position:relative;z-index:1}.result-title.victory[data-v-48dc8be9]{background:linear-gradient(135deg,#fde047,#f59e0b,#f97316);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text;filter:drop-shadow(0 0 20px rgba(253,224,71,0.5))}.result-title.defeat[data-v-48dc8be9]{background:linear-gradient(135deg,#94a3b8,#64748b,#475569);-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text;filter:drop-shadow(0 0 20px rgba(148,163,184,0.3))}.result-subtitle[data-v-48dc8be9]{font-size:1.5rem;color:#cbd5e1;font-weight:400;letter-spacing:.15em;margin-bottom:2.5rem;text-transform:uppercase;position:relative;z-index:1;opacity:.8}.restart-btn[data-v-48dc8be9]{padding:.75rem 2rem;background:#fff;color:#000;font-weight:700;border-radius:9999px;border:none;cursor:pointer;transition:transform .2s}.restart-btn[data-v-48dc8be9]:hover{transform:scale(1.05)}@keyframes fadeIn-48dc8be9{from{opacity:0}to{opacity:1}}@keyframes pulse-48dc8be9{0%,100%{opacity:1}50%{opacity:.5}}.slide-enter-active[data-v-48dc8be9],.slide-leave-active[data-v-48dc8be9]{transition:all .2s ease}.slide-enter-from[data-v-48dc8be9]{opacity:0;transform:translateY(10px)}.slide-leave-to[data-v-48dc8be9]{opacity:0;transform:translateY(-10px)}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>