{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/src/性斗学园/战斗界面/skillDatabase.ts","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/src/性斗学园/战斗界面/combatCalculator.ts","src://tavern_helper_template/src/性斗学园/战斗界面/types.ts","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/性斗学园/战斗界面/constants.ts","src://tavern_helper_template/src/性斗学园/战斗界面/enemyDatabase.ts","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/BackgroundAmbience.vue?1a5e","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/BackgroundAmbience.vue?5afb","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/ProgressBar.vue?1bb9","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/ProgressBar.vue?2a63","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/StatsPanel.vue?4694","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/StatsPanel.vue?b639","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/CharacterPanel.vue?e72e","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/CharacterPanel.vue?ffac","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/CombatLog.vue?71f0","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/CombatLog.vue?77b8","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/Card.vue?a483","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/Card.vue?ca53","webpack://tavern_helper_template/./src/性斗学园/战斗界面/app.vue?e953","webpack://tavern_helper_template/src/性斗学园/战斗界面/app.vue?112b","src://tavern_helper_template/src/性斗学园/战斗界面/index.ts"],"sourcesContent":["/**\n * 战斗界面技能数据库\n * 集中存储所有技能的完整数据\n */\n\nimport { SkillData, SkillType, DamageSource, BuffType } from './types';\n\n// ==================== 通用技能 ====================\n\nexport const COMMON_SKILLS: SkillData[] = [\n  {\n    id: 's_tease',\n    name: '指尖挑逗',\n    description: '用灵巧的指尖在对方敏感处轻柔游走',\n    effectDescription: '造成60%性斗力+5快感伤害',\n    icon: 'HandPointer',\n    type: SkillType.PHYSICAL,\n    staminaCost: 8,\n    cooldown: 0,\n    castTime: 0,\n    damageFormula: [{ source: DamageSource.SEX_POWER, coefficient: 0.6, baseValue: 5 }],\n    accuracy: 95,\n    critModifier: 5,\n    buffs: [{ type: BuffType.SENSITIVE, value: 15, isPercent: true, duration: 2, stackable: true, maxStacks: 3 }],\n    ignoreDefense: false,\n    canBeDodged: true,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '让我来找找你的弱点...',\n  },\n  {\n    id: 's_kiss',\n    name: '深吻',\n    description: '一个令人窒息的深吻,封住对方的唇舌',\n    effectDescription: '造成80%性斗力+300%魅力伤害',\n    icon: 'Kiss',\n    type: SkillType.PHYSICAL,\n    staminaCost: 12,\n    cooldown: 2,\n    castTime: 0,\n    damageFormula: [\n      { source: DamageSource.SEX_POWER, coefficient: 0.8, baseValue: 8 },\n      { source: DamageSource.CHARM, coefficient: 3.0, baseValue: 0 },\n    ],\n    accuracy: 90,\n    critModifier: 10,\n    buffs: [{ type: BuffType.SILENCE, value: 0, isPercent: false, duration: 1, stackable: false }],\n    ignoreDefense: false,\n    canBeDodged: true,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '嘘...安静...',\n  },\n  {\n    id: 's_strip',\n    name: '衣物破坏',\n    description: '粗暴地撕裂对方的衣物',\n    effectDescription: '减少对方忍耐力20%',\n    icon: 'Scissors',\n    type: SkillType.PHYSICAL,\n    staminaCost: 10,\n    cooldown: 3,\n    castTime: 0,\n    damageFormula: [{ source: DamageSource.SEX_POWER, coefficient: 0.4, baseValue: 3 }],\n    accuracy: 85,\n    critModifier: 0,\n    buffs: [{ type: BuffType.DEF_DOWN, value: 20, isPercent: true, duration: 99, stackable: true, maxStacks: 5 }],\n    ignoreDefense: true,\n    canBeDodged: true,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '穿这么多干嘛?',\n  },\n  {\n    id: 's_spank',\n    name: '羞耻拍打',\n    description: '用力拍打对方的臀部',\n    effectDescription: '造成50%性斗力+4伤害,附加羞耻状态',\n    icon: 'Hand',\n    type: SkillType.PHYSICAL,\n    staminaCost: 6,\n    cooldown: 1,\n    castTime: 0,\n    damageFormula: [{ source: DamageSource.SEX_POWER, coefficient: 0.5, baseValue: 4 }],\n    accuracy: 100,\n    critModifier: 15,\n    buffs: [{ type: BuffType.SHAME, value: 8, isPercent: false, duration: 2, stackable: true, maxStacks: 5 }],\n    ignoreDefense: false,\n    canBeDodged: false,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '听这声音,真是色情呢...',\n  },\n  {\n    id: 's_dirtytalk',\n    name: '污言秽语',\n    description: '用下流的言语刺激对方',\n    effectDescription: '造成500%魅力伤害,降低意志力5%',\n    icon: 'Comment',\n    type: SkillType.MENTAL,\n    staminaCost: 5,\n    cooldown: 0,\n    castTime: 0,\n    damageFormula: [{ source: DamageSource.CHARM, coefficient: 5.0, baseValue: 3 }],\n    accuracy: 100,\n    critModifier: 5,\n    buffs: [{ type: BuffType.WILLPOWER_DOWN, value: 5, isPercent: true, duration: 2, stackable: true, maxStacks: 4 }],\n    ignoreDefense: true,\n    canBeDodged: false,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '你这个淫乱的家伙...',\n  },\n  {\n    id: 's_observe',\n    name: '弱点洞察',\n    description: '仔细观察对方的反应',\n    effectDescription: '下次攻击暴击率+50%',\n    icon: 'Eye',\n    type: SkillType.SUPPORT,\n    staminaCost: 6,\n    cooldown: 3,\n    castTime: 0,\n    damageFormula: [],\n    accuracy: 100,\n    critModifier: 0,\n    buffs: [\n      { type: BuffType.FOCUS, value: 50, isPercent: true, duration: 1, stackable: false },\n      { type: BuffType.CRIT_UP, value: 30, isPercent: true, duration: 2, stackable: false },\n    ],\n    ignoreDefense: false,\n    canBeDodged: false,\n    canBeReflected: false,\n    hitCount: 0,\n    voiceLine: '找到了...',\n  },\n  {\n    id: 's_taunt',\n    name: '嘲讽挑衅',\n    description: '用轻蔑的语气嘲讽对方',\n    effectDescription: '对方攻击+20%但防御-25%',\n    icon: 'Ghost',\n    staminaCost: 8,\n    cooldown: 2,\n    castTime: 0,\n    damageFormula: [{ source: DamageSource.CHARM, coefficient: 3.0, baseValue: 2 }],\n    accuracy: 100,\n    critModifier: 0,\n    buffs: [\n      { type: BuffType.ATK_UP, value: 20, isPercent: true, duration: 2, stackable: false },\n      { type: BuffType.DEF_DOWN, value: 25, isPercent: true, duration: 2, stackable: false },\n    ],\n    ignoreDefense: true,\n    canBeDodged: false,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '就这?杂鱼~',\n  },\n  {\n    id: 's_rest',\n    name: '喘息',\n    description: '短暂的休息来恢复体力',\n    effectDescription: '恢复15%耐力,防御提升15%',\n    icon: 'Bed',\n    type: SkillType.SUPPORT,\n    staminaCost: 0,\n    cooldown: 4,\n    castTime: 0,\n    damageFormula: [],\n    accuracy: 100,\n    critModifier: 0,\n    buffs: [\n      { type: BuffType.REGEN, value: 15, isPercent: true, duration: 2, stackable: false },\n      { type: BuffType.DEF_UP, value: 15, isPercent: true, duration: 2, stackable: false },\n    ],\n    ignoreDefense: false,\n    canBeDodged: false,\n    canBeReflected: false,\n    hitCount: 0,\n    voiceLine: '让我歇一下...',\n  },\n];\n\n// ==================== 高级技能 ====================\n\nexport const ADVANCED_SKILLS: SkillData[] = [\n  {\n    id: 's_massage',\n    name: '精油按摩',\n    description: '涂抹精油进行全身按摩',\n    effectDescription: '造成120%性斗力伤害,防御-15%,敏感+25%',\n    icon: 'Droplets',\n    type: SkillType.PHYSICAL,\n    staminaCost: 18,\n    cooldown: 4,\n    castTime: 1,\n    damageFormula: [{ source: DamageSource.SEX_POWER, coefficient: 1.2, baseValue: 10 }],\n    accuracy: 100,\n    critModifier: 0,\n    buffs: [\n      { type: BuffType.DEF_DOWN, value: 15, isPercent: true, duration: 3, stackable: false },\n      { type: BuffType.SENSITIVE, value: 25, isPercent: true, duration: 3, stackable: false },\n    ],\n    ignoreDefense: false,\n    canBeDodged: false,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '放松...让我来服侍你...',\n  },\n  {\n    id: 's_bind',\n    name: '束缚',\n    description: '用绳索限制对方行动',\n    effectDescription: '造成30%性斗力伤害,束缚2回合',\n    icon: 'Chain',\n    type: SkillType.CONTROL,\n    staminaCost: 18,\n    cooldown: 5,\n    castTime: 0,\n    damageFormula: [{ source: DamageSource.SEX_POWER, coefficient: 0.3, baseValue: 5 }],\n    accuracy: 80,\n    critModifier: 0,\n    buffs: [\n      { type: BuffType.BIND, value: 0, isPercent: false, duration: 2, stackable: false },\n      { type: BuffType.DODGE_DOWN, value: 30, isPercent: true, duration: 2, stackable: false },\n    ],\n    ignoreDefense: false,\n    canBeDodged: true,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '乖乖不要动...',\n  },\n  {\n    id: 's_pheromone',\n    name: '费洛蒙',\n    description: '释放催情气息',\n    effectDescription: '使对方进入发情状态',\n    icon: 'Wind',\n    type: SkillType.CHARM,\n    staminaCost: 20,\n    cooldown: 5,\n    castTime: 0,\n    damageFormula: [{ source: DamageSource.CHARM, coefficient: 3.0, baseValue: 0 }],\n    accuracy: 100,\n    critModifier: 0,\n    buffs: [{ type: BuffType.HEAT, value: 10, isPercent: false, duration: 4, stackable: false }],\n    ignoreDefense: true,\n    canBeDodged: false,\n    canBeReflected: false,\n    hitCount: 1,\n    voiceLine: '闻到了吗?这就是我的味道...',\n  },\n];\n\n// ==================== 所有技能 ====================\n\nexport const ALL_SKILLS: SkillData[] = [...COMMON_SKILLS, ...ADVANCED_SKILLS];\n\n/** 按ID获取技能 */\nexport function getSkillById(id: string): SkillData | undefined {\n  return ALL_SKILLS.find(skill => skill.id === id);\n}\n\n/** 按类型获取技能 */\nexport function getSkillsByType(type: SkillType): SkillData[] {\n  return ALL_SKILLS.filter(skill => skill.type === type);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","/**\n * 战斗计算系统\n * 实现伤害计算、闪避暴击判定等核心战斗逻辑\n */\n\nimport { Character, SkillData, DamageSource, BuffType, StatusEffect } from './types';\n\n/**\n * 战斗结果\n */\nexport interface CombatResult {\n  damage: number;\n  isCritical: boolean;\n  isDodged: boolean;\n  actualDamage: number;\n  logs: string[];\n}\n\n/**\n * 计算技能基础伤害\n * @param attacker 攻击者\n * @param skill 技能数据\n * @returns 基础伤害值\n */\nexport function calculateBaseDamage(attacker: Character, skill: SkillData): number {\n  let totalDamage = 0;\n\n  for (const component of skill.damageFormula) {\n    let sourceValue = 0;\n\n    switch (component.source) {\n      case DamageSource.SEX_POWER:\n        sourceValue = attacker.stats.sexPower;\n        break;\n      case DamageSource.CHARM:\n        sourceValue = attacker.stats.charm;\n        break;\n      case DamageSource.LUCK:\n        sourceValue = attacker.stats.luck;\n        break;\n      case DamageSource.WILLPOWER:\n        sourceValue = attacker.stats.willpower;\n        break;\n      case DamageSource.FIXED:\n        sourceValue = 1;\n        break;\n    }\n\n    totalDamage += sourceValue * component.coefficient + component.baseValue;\n  }\n\n  return Math.max(0, Math.floor(totalDamage));\n}\n\n/**\n * 应用非线性减伤模型\n * 公式: 最终伤害 = 基础伤害 * 忍耐力 / (忍耐力 + 100)\n * @param baseDamage 基础伤害\n * @param targetEndurance 目标的忍耐力\n * @param ignoreDefense 是否忽视防御\n * @returns 减伤后的伤害\n */\nexport function applyDefenseReduction(baseDamage: number, targetEndurance: number, ignoreDefense: boolean): number {\n  if (ignoreDefense) {\n    return baseDamage;\n  }\n\n  // 非线性减伤公式\n  const defenseFactor = targetEndurance / (targetEndurance + 100);\n  const finalDamage = baseDamage * (1 - defenseFactor);\n\n  return Math.max(1, Math.floor(finalDamage));\n}\n\n/**\n * 判定是否闪避\n * @param attackerLuck 攻击者幸运\n * @param targetEvasion 目标闪避率\n * @param skillAccuracy 技能命中率\n * @param canBeDodged 技能是否可被闪避\n * @returns 是否闪避成功\n */\nexport function checkDodge(\n  attackerLuck: number,\n  targetEvasion: number,\n  skillAccuracy: number,\n  canBeDodged: boolean,\n): boolean {\n  if (!canBeDodged) {\n    return false;\n  }\n\n  // 计算最终命中率 = 技能基础命中率 - 目标闪避率 + (攻击者幸运 / 10)\n  const finalAccuracy = skillAccuracy - targetEvasion + attackerLuck / 10;\n\n  // 命中率最低10%,最高95%\n  const clampedAccuracy = Math.max(10, Math.min(95, finalAccuracy));\n\n  // 随机判定\n  const roll = Math.random() * 100;\n  return roll >= clampedAccuracy;\n}\n\n/**\n * 判定是否暴击\n * @param attackerCrit 攻击者暴击率\n * @param attackerLuck 攻击者幸运\n * @param skillCritModifier 技能暴击修正\n * @returns 是否暴击\n */\nexport function checkCritical(attackerCrit: number, attackerLuck: number, skillCritModifier: number): boolean {\n  // 计算最终暴击率 = 基础暴击率 + (幸运 / 5) + 技能修正\n  const finalCritRate = attackerCrit + attackerLuck / 5 + skillCritModifier;\n\n  // 暴击率最低0%,最高80%\n  const clampedCritRate = Math.max(0, Math.min(80, finalCritRate));\n\n  // 随机判定\n  const roll = Math.random() * 100;\n  return roll < clampedCritRate;\n}\n\n/**\n * 应用buff效果到伤害\n * @param damage 原始伤害\n * @param attacker 攻击者\n * @param target 目标\n * @returns 修正后的伤害\n */\nexport function applyBuffModifiers(damage: number, attacker: Character, target: Character): number {\n  let modifier = 1.0;\n\n  // 检查攻击者的攻击力buff\n  for (const effect of attacker.statusEffects) {\n    if (effect.effect.type === BuffType.ATK_UP && effect.effect.isPercent) {\n      modifier += effect.effect.value / 100;\n    } else if (effect.effect.type === BuffType.ATK_DOWN && effect.effect.isPercent) {\n      modifier -= effect.effect.value / 100;\n    }\n  }\n\n  // 检查目标的防御力buff\n  for (const effect of target.statusEffects) {\n    if (effect.effect.type === BuffType.DEF_UP && effect.effect.isPercent) {\n      modifier -= effect.effect.value / 100;\n    } else if (effect.effect.type === BuffType.DEF_DOWN && effect.effect.isPercent) {\n      modifier += effect.effect.value / 100;\n    } else if (effect.effect.type === BuffType.SENSITIVE && effect.effect.isPercent) {\n      modifier += effect.effect.value / 100;\n    }\n  }\n\n  return Math.max(1, Math.floor(damage * modifier));\n}\n\n/**\n * 执行完整的战斗计算\n * @param attacker 攻击者\n * @param target 目标\n * @param skill 技能数据\n * @returns 战斗结果\n */\nexport function executeAttack(attacker: Character, target: Character, skill: SkillData): CombatResult {\n  const logs: string[] = [];\n  const result: CombatResult = {\n    damage: 0,\n    isCritical: false,\n    isDodged: false,\n    actualDamage: 0,\n    logs: [],\n  };\n\n  // 1. 计算基础伤害\n  const baseDamage = calculateBaseDamage(attacker, skill);\n  logs.push(`基础伤害: ${baseDamage}`);\n\n  // 2. 判定闪避\n  const dodged = checkDodge(attacker.stats.luck, target.stats.evasion, skill.accuracy, skill.canBeDodged);\n  if (dodged) {\n    result.isDodged = true;\n    result.logs = logs;\n    logs.push(`${target.name} 闪避了攻击!`);\n    return result;\n  }\n\n  // 3. 判定暴击\n  const critical = checkCritical(attacker.stats.crit, attacker.stats.luck, skill.critModifier);\n  result.isCritical = critical;\n  let finalDamage = baseDamage;\n  if (critical) {\n    finalDamage = Math.floor(baseDamage * 2);\n    logs.push(`暴击! 伤害翻倍: ${finalDamage}`);\n  }\n\n  // 4. 应用防御减伤\n  finalDamage = applyDefenseReduction(finalDamage, target.stats.baseEndurance, skill.ignoreDefense);\n  if (!skill.ignoreDefense) {\n    logs.push(`防御减伤后: ${finalDamage}`);\n  }\n\n  // 5. 应用buff修正\n  finalDamage = applyBuffModifiers(finalDamage, attacker, target);\n  logs.push(`最终伤害: ${finalDamage}`);\n\n  result.damage = baseDamage;\n  result.actualDamage = finalDamage;\n  result.logs = logs;\n\n  return result;\n}\n\n/**\n * 应用技能的buff效果\n * @param target 目标角色\n * @param skill 技能数据\n */\nexport function applySkillBuffs(target: Character, skill: SkillData): string[] {\n  const logs: string[] = [];\n\n  for (const buff of skill.buffs) {\n    // 检查是否已有相同类型的buff\n    const existingBuffIndex = target.statusEffects.findIndex(effect => effect.effect.type === buff.type);\n\n    if (existingBuffIndex >= 0 && !buff.stackable) {\n      // 不可叠加,刷新持续时间\n      target.statusEffects[existingBuffIndex].duration = buff.duration;\n      logs.push(`刷新了 ${target.statusEffects[existingBuffIndex].name} 的持续时间`);\n    } else if (existingBuffIndex >= 0 && buff.stackable) {\n      // 可叠加,检查层数限制\n      const currentStacks = target.statusEffects.filter(effect => effect.effect.type === buff.type).length;\n      if (!buff.maxStacks || currentStacks < buff.maxStacks) {\n        // 添加新层\n        const newEffect: StatusEffect = {\n          id: `${buff.type}_${Date.now()}`,\n          name: getBuffName(buff.type),\n          duration: buff.duration,\n          icon: '🎭',\n          effect: buff,\n          type: isDebuff(buff.type) ? 'debuff' : 'buff',\n        };\n        target.statusEffects.push(newEffect);\n        logs.push(`添加了 ${newEffect.name} (${currentStacks + 1}层)`);\n      } else {\n        logs.push(`${getBuffName(buff.type)} 已达最大层数`);\n      }\n    } else {\n      // 添加新buff\n      const newEffect: StatusEffect = {\n        id: `${buff.type}_${Date.now()}`,\n        name: getBuffName(buff.type),\n        duration: buff.duration,\n        icon: '🎭',\n        effect: buff,\n        type: isDebuff(buff.type) ? 'debuff' : 'buff',\n      };\n      target.statusEffects.push(newEffect);\n      logs.push(`添加了 ${newEffect.name}`);\n    }\n  }\n\n  return logs;\n}\n\n/**\n * 更新所有状态效果的持续时间\n * @param character 角色\n */\nexport function updateStatusEffects(character: Character): string[] {\n  const logs: string[] = [];\n\n  // 减少持续时间并移除过期的效果\n  character.statusEffects = character.statusEffects.filter(effect => {\n    effect.duration--;\n    if (effect.duration <= 0) {\n      logs.push(`${character.name} 的 ${effect.name} 效果消失了`);\n      return false;\n    }\n    return true;\n  });\n\n  // 处理持续伤害/回复效果\n  for (const effect of character.statusEffects) {\n    if (effect.effect.type === BuffType.DOT_LUST) {\n      const lustChange = effect.effect.value;\n      character.stats.currentPleasure += lustChange;\n      logs.push(`${character.name} 受到持续快感影响 (${lustChange > 0 ? '+' : ''}${lustChange})`);\n    } else if (effect.effect.type === BuffType.REGEN) {\n      const regenValue = effect.effect.isPercent\n        ? Math.floor((character.stats.maxEndurance * effect.effect.value) / 100)\n        : effect.effect.value;\n      character.stats.currentEndurance = Math.min(\n        character.stats.maxEndurance,\n        character.stats.currentEndurance + regenValue,\n      );\n      logs.push(`${character.name} 回复了 ${regenValue} 点耐力`);\n    }\n  }\n\n  return logs;\n}\n\n/**\n * 获取buff的中文名称\n */\nfunction getBuffName(type: BuffType): string {\n  const names: Record<BuffType, string> = {\n    [BuffType.ATK_UP]: '攻击提升',\n    [BuffType.DEF_UP]: '防御提升',\n    [BuffType.ATK_DOWN]: '攻击下降',\n    [BuffType.DEF_DOWN]: '防御下降',\n    [BuffType.SENSITIVE]: '敏感',\n    [BuffType.WILLPOWER_DOWN]: '意志下降',\n    [BuffType.SILENCE]: '沉默',\n    [BuffType.BIND]: '束缚',\n    [BuffType.DODGE_DOWN]: '闪避下降',\n    [BuffType.CRIT_UP]: '暴击提升',\n    [BuffType.FOCUS]: '集中',\n    [BuffType.SHAME]: '羞耻',\n    [BuffType.HEAT]: '发情',\n    [BuffType.FEAR]: '恐惧',\n    [BuffType.DOT_LUST]: '持续快感',\n    [BuffType.REGEN]: '持续回复',\n    [BuffType.ENDURANCE_UP]: '忍耐提升',\n  };\n  return names[type] || '未知效果';\n}\n\n/**\n * 判断是否为debuff\n */\nfunction isDebuff(type: BuffType): boolean {\n  const debuffs = [\n    BuffType.ATK_DOWN,\n    BuffType.DEF_DOWN,\n    BuffType.SENSITIVE,\n    BuffType.WILLPOWER_DOWN,\n    BuffType.SILENCE,\n    BuffType.BIND,\n    BuffType.DODGE_DOWN,\n    BuffType.SHAME,\n    BuffType.HEAT,\n    BuffType.FEAR,\n    BuffType.DOT_LUST,\n  ];\n  return debuffs.includes(type);\n}\n","/**\n * 战斗界面类型定义\n * 与MVU变量结构对应\n */\n\nexport type StatType = 'sexPower' | 'endurance' | 'evasion' | 'crit' | 'charm' | 'luck' | 'willpower';\n\n/** 战斗属性 - 对应MVU变量 */\nexport interface CombatStats {\n  maxEndurance: number; // 核心状态._最大耐力\n  currentEndurance: number; // 核心状态._耐力\n  maxPleasure: number; // 核心状态._最大快感\n  currentPleasure: number; // 核心状态._快感\n  willpower: number; // 核心状态._意志力\n  climaxCount: number; // 性斗系统.$高潮次数\n  maxClimaxCount: number; // 性斗系统.胜负规则.高潮次数上限\n\n  // 七大核心属性\n  sexPower: number; // 性斗系统.$实时性斗力\n  baseEndurance: number; // 性斗系统.$实时忍耐力\n  evasion: number; // 核心状态.$闪避率\n  crit: number; // 核心状态.$暴击率\n  charm: number; // 核心状态._魅力\n  luck: number; // 核心状态._幸运\n  baseWillpower: number; // 核心状态.$基础意志力\n}\n\n/** 技能伤害来源 */\nexport enum DamageSource {\n  SEX_POWER = 'sex_power',\n  CHARM = 'charm',\n  LUCK = 'luck',\n  WILLPOWER = 'willpower',\n  FIXED = 'fixed',\n}\n\n/** 技能类型 */\nexport enum SkillType {\n  PHYSICAL = 'physical',\n  MENTAL = 'mental',\n  CHARM = 'charm',\n  SUPPORT = 'support',\n  CONTROL = 'control',\n  ULTIMATE = 'ultimate',\n}\n\n/** Buff类型 */\nexport enum BuffType {\n  ATK_UP = 'atk_up',\n  DEF_UP = 'def_up',\n  ATK_DOWN = 'atk_down',\n  DEF_DOWN = 'def_down',\n  SENSITIVE = 'sensitive',\n  WILLPOWER_DOWN = 'willpower_down',\n  SILENCE = 'silence',\n  BIND = 'bind',\n  DODGE_DOWN = 'dodge_down',\n  CRIT_UP = 'crit_up',\n  FOCUS = 'focus',\n  SHAME = 'shame',\n  HEAT = 'heat',\n  FEAR = 'fear',\n  DOT_LUST = 'dot_lust',\n  REGEN = 'regen',\n  ENDURANCE_UP = 'endurance_up',\n}\n\n/** Buff效果 */\nexport interface BuffEffect {\n  type: BuffType;\n  value: number;\n  isPercent: boolean;\n  duration: number;\n  stackable: boolean;\n  maxStacks?: number;\n}\n\n/** 伤害公式组件 */\nexport interface DamageComponent {\n  source: DamageSource;\n  coefficient: number;\n  baseValue: number;\n}\n\n/** 技能数据 */\nexport interface SkillData {\n  id: string;\n  name: string;\n  description: string;\n  effectDescription: string;\n  icon?: string;\n  type: SkillType;\n  staminaCost: number;\n  cooldown: number;\n  castTime: number;\n  damageFormula: DamageComponent[];\n  accuracy: number;\n  critModifier: number;\n  buffs: BuffEffect[];\n  ignoreDefense: boolean;\n  canBeDodged: boolean;\n  canBeReflected: boolean;\n  hitCount: number;\n  voiceLine?: string;\n}\n\n/** 技能实例 (运行时) */\nexport interface Skill {\n  id: string;\n  name: string;\n  description: string;\n  cost: number;\n  type: SkillType;\n  cooldown: number;\n  currentCooldown: number;\n  data: SkillData;\n}\n\n/** 物品 */\nexport interface Item {\n  id: string;\n  name: string;\n  description: string;\n  quantity: number;\n  effect: (user: Character, target: Character) => CombatLogEntry;\n}\n\n/** 角色 */\nexport interface Character {\n  id: string;\n  name: string;\n  avatarUrl: string;\n  stats: CombatStats;\n  skills: Skill[];\n  items: Item[];\n  isPlayer: boolean;\n  statusEffects: StatusEffect[];\n}\n\n/** 状态效果 (运行时) */\nexport interface StatusEffect {\n  id: string;\n  name: string;\n  duration: number;\n  icon: string;\n  effect: BuffEffect;\n  type: 'buff' | 'debuff';\n}\n\n/** 战斗日志条目 */\nexport interface CombatLogEntry {\n  id: string;\n  turn: number;\n  message: string;\n  source: string;\n  type: 'damage' | 'heal' | 'info' | 'critical';\n}\n\n/** 回合状态 */\nexport interface TurnState {\n  currentTurn: number;\n  phase: 'playerInput' | 'processing' | 'enemyAction' | 'victory' | 'defeat' | 'climaxResolution';\n  enemyIntention: Skill | null;\n  climaxTarget: 'player' | 'enemy' | null;\n}\n\n/** MVU数据结构 - 对应[initvar].yaml */\nexport interface MvuStatData {\n  角色基础: {\n    _等级: number;\n    经验值: number;\n    _声望: number;\n    _段位: string;\n    段位积分: number;\n  };\n  核心状态: {\n    $最大耐力: number;\n    $耐力: number;\n    $最大快感: number;\n    $快感: number;\n    堕落度: number;\n    _潜力: number;\n    _魅力: number;\n    $基础魅力: number;\n    _幸运: number;\n    $基础幸运: number;\n    $基础性斗力: number;\n    $基础忍耐力: number;\n    _闪避率: number;\n    $基础闪避率: number;\n    _暴击率: number;\n    $基础暴击率: number;\n    意志力: number;\n    $基础意志力: number;\n  };\n  临时状态: {\n    状态列表: Record<string, number>;\n    加成统计: BonusStats;\n  };\n  永久状态: {\n    状态列表: string[];\n    加成统计: BonusStats;\n  };\n  性斗系统: {\n    对手名称: string;\n    性斗类型: string;\n    胜负规则: {\n      高潮次数上限: number;\n      允许认输: boolean;\n    };\n    当前回合: number;\n    行动日志: Record<string, string[]>;\n    高潮次数: number;\n    实时性斗力: number;\n    实时忍耐力: number;\n    对手耐力: number;\n    对手最大耐力: number;\n    对手快感: number;\n    对手最大快感: number;\n    对手高潮次数: number;\n    对手性斗力: number;\n    对手忍耐力: number;\n    对手魅力: number;\n    对手幸运: number;\n    对手闪避率: number;\n    对手暴击率: number;\n    对手临时状态: {\n      状态列表: Record<string, number>;\n      加成统计: BonusStats;\n    };\n    对手技能冷却: Record<string, number>;\n    对手可用技能: Record<string, any>;\n    技能冷却: Record<string, number>;\n    可用技能: Record<string, any>;\n    战斗物品: Record<string, number>;\n  };\n  物品系统: {\n    学园金币: number;\n    背包: Record<string, any>;\n    _装备栏: {\n      主装备: { 名称: string; 等级: string; 加成属性: any; 描述: string };\n      副装备: { 名称: string; 等级: string; 加成属性: any; 描述: string };\n      饰品1: { 名称: string; 等级: string; 加成属性: any; 描述: string };\n      饰品2: { 名称: string; 等级: string; 加成属性: any; 描述: string };\n      特殊装备: { 名称: string; 等级: string; 加成属性: any; 描述: string };\n    };\n    装备总加成: BonusStats;\n  };\n  技能系统: {\n    主动技能: Record<string, any>;\n    被动技能: Record<string, any>;\n  };\n}\n\n/** 加成统计 */\nexport interface BonusStats {\n  魅力加成: number;\n  幸运加成: number;\n  基础性斗力加成: number;\n  基础性斗力成算: number;\n  基础忍耐力加成: number;\n  基础忍耐力成算: number;\n  闪避率加成: number;\n  暴击率加成: number;\n  意志力加成: number;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import type { Character, Skill, Item, CombatLogEntry } from './types';\n\n// 创建日志辅助函数\nconst createLog = (msg: string, source: string, type: CombatLogEntry['type'] = 'info'): CombatLogEntry => ({\n  id: Math.random().toString(36).substr(2, 9),\n  turn: 0,\n  message: msg,\n  source,\n  type,\n});\n\n// --- 玩家技能 ---\nexport const PLAYER_SKILLS: Skill[] = [\n  {\n    id: 's1',\n    name: '挑逗言语',\n    description: '轻声细语，攻击敌方精神，造成少量快感伤害。',\n    cost: 5,\n    type: 'attack',\n    cooldown: 0,\n    currentCooldown: 0,\n    effect: (user, target) => {\n      const dmg = Math.floor(user.stats.charm * 1.5 + user.stats.sexPower * 0.5);\n      target.stats.currentPleasure += dmg;\n      return createLog(`${user.name} 使用 [挑逗言语]，消耗体力，造成了 ${dmg} 点快感！`, 'player', 'damage');\n    },\n  },\n  {\n    id: 's2',\n    name: '绝对领域',\n    description: '调整姿态，大幅提升本回合闪避率。',\n    cost: 15,\n    type: 'buff',\n    cooldown: 3,\n    currentCooldown: 0,\n    effect: (user, _target) => {\n      return createLog(`${user.name} 展开 [绝对领域]，消耗体力提升闪避！`, 'player', 'info');\n    },\n  },\n  {\n    id: 's3',\n    name: '必杀·纯爱战神',\n    description: '消耗大量体力，造成基于性斗力的巨额伤害。',\n    cost: 40,\n    type: 'ultimate',\n    cooldown: 5,\n    currentCooldown: 0,\n    effect: (user, target) => {\n      const dmg = Math.floor(user.stats.sexPower * 3.5);\n      target.stats.currentPleasure += dmg;\n      return createLog(`${user.name} 发动 [必杀·纯爱战神]，造成 ${dmg} 点暴击快感！`, 'player', 'critical');\n    },\n  },\n];\n\n// --- 敌人技能 ---\nexport const ENEMY_SKILLS: Skill[] = [\n  {\n    id: 'e1',\n    name: '强硬手段',\n    description: '无视防御的粗暴攻击，削减耐力。',\n    cost: 0,\n    type: 'attack',\n    cooldown: 0,\n    currentCooldown: 0,\n    effect: (user, target) => {\n      const dmg = 15;\n      target.stats.currentEndurance -= dmg;\n      return createLog(`${user.name} 使用 [强硬手段]，你的耐力减少了 ${dmg}！`, 'enemy', 'damage');\n    },\n  },\n  {\n    id: 'e2',\n    name: '深渊凝视',\n    description: '降低对手的耐力。',\n    cost: 0,\n    type: 'debuff',\n    cooldown: 2,\n    currentCooldown: 0,\n    effect: (user, target) => {\n      const dmg = 10;\n      target.stats.currentEndurance -= dmg;\n      return createLog(`${user.name} 施展 [深渊凝视]，你的耐力被削弱了 ${dmg} 点。`, 'enemy', 'damage');\n    },\n  },\n  {\n    id: 'e3',\n    name: '触手纠缠',\n    description: '造成持续快感。',\n    cost: 0,\n    type: 'attack',\n    cooldown: 3,\n    currentCooldown: 0,\n    effect: (user, target) => {\n      const dmg = 25;\n      target.stats.currentPleasure += dmg;\n      return createLog(`${user.name} 使用 [触手纠缠]，快感上升了 ${dmg} 点！`, 'enemy', 'damage');\n    },\n  },\n];\n\n// --- 玩家物品 ---\nexport const PLAYER_ITEMS: Item[] = [\n  {\n    id: 'i1',\n    name: '强走饮料',\n    description: '恢复 30 点耐力。',\n    quantity: 3,\n    effect: (user, _target) => {\n      user.stats.currentEndurance = Math.min(user.stats.maxEndurance, user.stats.currentEndurance + 30);\n      return createLog(`${user.name} 喝下 [强走饮料]，耐力恢复了。`, 'player', 'heal');\n    },\n  },\n  {\n    id: 'i2',\n    name: '抑制剂',\n    description: '减少 20 点当前快感。',\n    quantity: 2,\n    effect: (user, _target) => {\n      user.stats.currentPleasure = Math.max(0, user.stats.currentPleasure - 20);\n      return createLog(`${user.name} 注射了 [抑制剂]，身体稍微冷却下来。`, 'player', 'heal');\n    },\n  },\n];\n\n// --- 创建默认角色数据 ---\nexport function createDefaultPlayer(): Character {\n  return {\n    id: 'player',\n    name: '学园偶像',\n    avatarUrl: 'https://picsum.photos/400/600?random=1',\n    isPlayer: true,\n    statusEffects: [],\n    items: PLAYER_ITEMS.map(i => ({ ...i })),\n    skills: PLAYER_SKILLS.map(s => ({ ...s })),\n    stats: {\n      maxEndurance: 100,\n      currentEndurance: 100,\n      maxPleasure: 100,\n      currentPleasure: 0,\n      willpower: 100,\n      baseWillpower: 100,\n      climaxCount: 0,\n      maxClimaxCount: 3,\n      sexPower: 25,\n      baseEndurance: 15,\n      evasion: 10,\n      crit: 5,\n      charm: 30,\n      luck: 15,\n    },\n  };\n}\n\nexport function createDefaultEnemy(): Character {\n  return {\n    id: 'enemy',\n    name: '风纪委员长',\n    avatarUrl: 'https://picsum.photos/400/600?random=2',\n    isPlayer: false,\n    statusEffects: [],\n    items: [],\n    skills: ENEMY_SKILLS.map(s => ({ ...s })),\n    stats: {\n      maxEndurance: 150,\n      currentEndurance: 150,\n      maxPleasure: 100,\n      currentPleasure: 0,\n      willpower: 80,\n      baseWillpower: 80,\n      climaxCount: 0,\n      maxClimaxCount: 3,\n      sexPower: 20,\n      baseEndurance: 20,\n      evasion: 5,\n      crit: 10,\n      charm: 10,\n      luck: 5,\n    },\n  };\n}\n\n// --- 高潮文本 ---\nexport const CLIMAX_TEXTS = [\n  (name: string) => `${name} 身体弓起，眼神失焦，无法抑制地颤抖着...`,\n  (name: string) => `剧烈的快感如潮水般淹没了 ${name} 的理智...`,\n  (name: string) => `${name} 发出了甜美的悲鸣，身体彻底瘫软下来...`,\n];\n","/**\n * 性斗学园敌人角色数据库\n * 根据世界书人物条目创建，使用新的技能系统\n */\n\nimport type { Character, Skill } from './types';\nimport { getSkillById } from './skillDatabase';\n\n/**\n * 从技能ID创建技能实例\n */\nfunction createSkillFromId(skillId: string): Skill | null {\n  const skillData = getSkillById(skillId);\n  if (!skillData) {\n    console.warn(`技能 ${skillId} 不存在`);\n    return null;\n  }\n  return {\n    id: skillData.id,\n    name: skillData.name,\n    description: skillData.description,\n    cost: skillData.staminaCost,\n    type: skillData.type,\n    cooldown: skillData.cooldown,\n    currentCooldown: 0,\n    data: skillData,\n  };\n}\n\n/**\n * 从技能ID数组创建技能列表\n */\nfunction createSkills(skillIds: string[]): Skill[] {\n  return skillIds.map(id => createSkillFromId(id)).filter(skill => skill !== null) as Skill[];\n}\n\n/**\n * 敌人数据接口\n */\nexport interface EnemyData {\n  name: string;\n  avatarUrl: string;\n  stats: {\n    charm: number;\n    luck: number;\n    evasion: number;\n    crit: number;\n    willpower: number;\n    sexPower: number;\n    baseEndurance: number;\n    maxEndurance: number;\n    maxPleasure: number;\n    maxClimaxCount: number;\n  };\n  skillIds: string[];\n  description: string;\n}\n\n// ==================== 角色数据库 ====================\n\nexport const ENEMY_DATABASE: Record<string, EnemyData> = {\n  // ========== 最高层 ==========\n  '伊甸·阿斯莫德': {\n    name: '伊甸·阿斯莫德',\n    avatarUrl: 'https://picsum.photos/400/600?random=101',\n    stats: {\n      charm: 100,\n      luck: 100,\n      evasion: 50,\n      crit: 50,\n      willpower: 200,\n      sexPower: 100,\n      baseEndurance: 90,\n      maxEndurance: 300,\n      maxPleasure: 200,\n      maxClimaxCount: 5,\n    },\n    skillIds: ['s_kiss', 's_massage', 's_bind', 's_pheromone'],\n    description: '学园的神秘创办者与最高领导者',\n  },\n\n  // ========== 教师团队 ==========\n  白石响子: {\n    name: '白石响子',\n    avatarUrl: 'https://picsum.photos/400/600?random=85',\n    stats: {\n      charm: 90,\n      luck: 60,\n      evasion: 20,\n      crit: 15,\n      willpower: 180,\n      sexPower: 80,\n      baseEndurance: 70,\n      maxEndurance: 200,\n      maxPleasure: 120,\n      maxClimaxCount: 4,\n    },\n    skillIds: ['s_tease', 's_spank', 's_dirtytalk', 's_taunt'],\n    description: '风纪委员长，铁腕女王',\n  },\n\n  '艾琳·海德': {\n    name: '艾琳·海德',\n    avatarUrl: 'https://picsum.photos/400/600?random=88',\n    stats: {\n      charm: 85,\n      luck: 55,\n      evasion: 22,\n      crit: 18,\n      willpower: 170,\n      sexPower: 75,\n      baseEndurance: 65,\n      maxEndurance: 190,\n      maxPleasure: 115,\n      maxClimaxCount: 4,\n    },\n    skillIds: ['s_tease', 's_kiss', 's_observe', 's_rest'],\n    description: '教导主任，严厉但内心温柔',\n  },\n\n  '卡洛琳·兰德尔': {\n    name: '卡洛琳·兰德尔',\n    avatarUrl: 'https://picsum.photos/400/600?random=86',\n    stats: {\n      charm: 75,\n      luck: 50,\n      evasion: 30,\n      crit: 25,\n      willpower: 160,\n      sexPower: 70,\n      baseEndurance: 60,\n      maxEndurance: 180,\n      maxPleasure: 110,\n      maxClimaxCount: 3,\n    },\n    skillIds: ['s_strip', 's_spank', 's_taunt'],\n    description: '教学副院长',\n  },\n\n  '蕾西·布莱克': {\n    name: '蕾西·布莱克',\n    avatarUrl: 'https://picsum.photos/400/600?random=87',\n    stats: {\n      charm: 70,\n      luck: 60,\n      evasion: 15,\n      crit: 20,\n      willpower: 150,\n      sexPower: 65,\n      baseEndurance: 55,\n      maxEndurance: 170,\n      maxPleasure: 105,\n      maxClimaxCount: 3,\n    },\n    skillIds: ['s_tease', 's_dirtytalk', 's_observe'],\n    description: '训育老师',\n  },\n\n  '米莉娅·格林伍德': {\n    name: '米莉娅·格林伍德',\n    avatarUrl: 'https://picsum.photos/400/600?random=89',\n    stats: {\n      charm: 75,\n      luck: 55,\n      evasion: 18,\n      crit: 15,\n      willpower: 145,\n      sexPower: 60,\n      baseEndurance: 50,\n      maxEndurance: 165,\n      maxPleasure: 100,\n      maxClimaxCount: 3,\n    },\n    skillIds: ['s_kiss', 's_dirtytalk', 's_rest'],\n    description: '保健老师',\n  },\n\n  '塞西莉亚·罗森': {\n    name: '塞西莉亚·罗森',\n    avatarUrl: 'https://picsum.photos/400/600?random=90',\n    stats: {\n      charm: 80,\n      luck: 65,\n      evasion: 25,\n      crit: 20,\n      willpower: 165,\n      sexPower: 70,\n      baseEndurance: 60,\n      maxEndurance: 175,\n      maxPleasure: 110,\n      maxClimaxCount: 3,\n    },\n    skillIds: ['s_tease', 's_kiss', 's_pheromone'],\n    description: '生理卫生课老师',\n  },\n\n  // ========== 学生 - 高年级 ==========\n  '莉莉安娜·蒙特古': {\n    name: '莉莉安娜·蒙特古',\n    avatarUrl: 'https://picsum.photos/400/600?random=91',\n    stats: {\n      charm: 70,\n      luck: 50,\n      evasion: 35,\n      crit: 30,\n      willpower: 170,\n      sexPower: 75,\n      baseEndurance: 65,\n      maxEndurance: 200,\n      maxPleasure: 120,\n      maxClimaxCount: 4,\n    },\n    skillIds: ['s_strip', 's_spank', 's_observe', 's_bind'],\n    description: '风纪委员会成员，高年级学生',\n  },\n\n  '索菲亚·克劳斯': {\n    name: '索菲亚·克劳斯',\n    avatarUrl: 'https://picsum.photos/400/600?random=92',\n    stats: {\n      charm: 95,\n      luck: 80,\n      evasion: 40,\n      crit: 45,\n      willpower: 190,\n      sexPower: 85,\n      baseEndurance: 75,\n      maxEndurance: 250,\n      maxPleasure: 150,\n      maxClimaxCount: 5,\n    },\n    skillIds: ['s_kiss', 's_massage', 's_pheromone', 's_observe'],\n    description: '学生会会长',\n  },\n\n  '克莱尔·温斯顿': {\n    name: '克莱尔·温斯顿',\n    avatarUrl: 'https://picsum.photos/400/600?random=93',\n    stats: {\n      charm: 60,\n      luck: 55,\n      evasion: 15,\n      crit: 12,\n      willpower: 140,\n      sexPower: 55,\n      baseEndurance: 45,\n      maxEndurance: 160,\n      maxPleasure: 100,\n      maxClimaxCount: 3,\n    },\n    skillIds: ['s_tease', 's_dirtytalk', 's_rest'],\n    description: '普通高年级学生',\n  },\n\n  // ========== 学生 - 中年级 ==========\n  '伊莎贝拉·德雷克': {\n    name: '伊莎贝拉·德雷克',\n    avatarUrl: 'https://picsum.photos/400/600?random=94',\n    stats: {\n      charm: 95,\n      luck: 75,\n      evasion: 35,\n      crit: 40,\n      willpower: 200,\n      sexPower: 80,\n      baseEndurance: 70,\n      maxEndurance: 220,\n      maxPleasure: 140,\n      maxClimaxCount: 4,\n    },\n    skillIds: ['s_kiss', 's_spank', 's_massage', 's_observe'],\n    description: '中年级顶尖学生',\n  },\n\n  '艾米丽·布朗': {\n    name: '艾米丽·布朗',\n    avatarUrl: 'https://picsum.photos/400/600?random=95',\n    stats: {\n      charm: 70,\n      luck: 50,\n      evasion: 28,\n      crit: 25,\n      willpower: 155,\n      sexPower: 65,\n      baseEndurance: 55,\n      maxEndurance: 170,\n      maxPleasure: 105,\n      maxClimaxCount: 3,\n    },\n    skillIds: ['s_tease', 's_strip', 's_rest'],\n    description: '中年级学生',\n  },\n};\n\n/**\n * 将敌人数据转换为完整的角色对象\n */\nexport function getEnemyByName(name: string): Character | undefined {\n  const enemyData = ENEMY_DATABASE[name];\n  if (!enemyData) {\n    return undefined;\n  }\n\n  return {\n    id: name,\n    name: enemyData.name,\n    avatarUrl: enemyData.avatarUrl,\n    isPlayer: false,\n    statusEffects: [],\n    items: [],\n    skills: createSkills(enemyData.skillIds),\n    stats: {\n      maxEndurance: enemyData.stats.maxEndurance,\n      currentEndurance: enemyData.stats.maxEndurance,\n      maxPleasure: enemyData.stats.maxPleasure,\n      currentPleasure: 0,\n      willpower: enemyData.stats.willpower,\n      baseWillpower: enemyData.stats.willpower,\n      climaxCount: 0,\n      maxClimaxCount: enemyData.stats.maxClimaxCount,\n      sexPower: enemyData.stats.sexPower,\n      baseEndurance: enemyData.stats.baseEndurance,\n      evasion: enemyData.stats.evasion,\n      crit: enemyData.stats.crit,\n      charm: enemyData.stats.charm,\n      luck: enemyData.stats.luck,\n    },\n  };\n}\n\n/**\n * 获取所有敌人名称列表\n */\nexport function getAllEnemyNames(): string[] {\n  return Object.keys(ENEMY_DATABASE);\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"bg-ambience\" };\nimport { ref, onMounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'BackgroundAmbience',\n    setup(__props) {\n        const dustParticles = ref([]);\n        const petals = ref([]);\n        onMounted(() => {\n            // 生成漂浮尘埃\n            dustParticles.value = Array.from({ length: 20 }).map((_, i) => ({\n                id: i,\n                left: Math.random() * 100,\n                delay: Math.random() * -20,\n                duration: 15 + Math.random() * 20,\n            }));\n            // 生成花瓣\n            petals.value = Array.from({ length: 8 }).map((_, i) => ({\n                id: i + 100,\n                left: Math.random() * 100,\n                delay: Math.random() * -20,\n                duration: 10 + Math.random() * 15,\n                scale: 0.5 + Math.random() * 0.5,\n            }));\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 基础渐变 \"),\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"bg-gradient\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 纹理叠加 \"),\n                _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"bg-texture\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 光晕效果 \"),\n                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"glow glow-top\" }, null, -1 /* CACHED */)),\n                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"glow glow-bottom\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 漂浮尘埃 \"),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(dustParticles.value, (particle) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: particle.id,\n                        class: \"dust-particle\",\n                        style: _normalizeStyle({\n                            left: `${particle.left}%`,\n                            animationDelay: `${particle.delay}s`,\n                            animationDuration: `${particle.duration}s`,\n                        })\n                    }, null, 4 /* STYLE */));\n                }), 128 /* KEYED_FRAGMENT */)),\n                _createCommentVNode(\" 飘落花瓣 \"),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(petals.value, (petal) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: petal.id,\n                        class: \"petal\",\n                        style: _normalizeStyle({\n                            left: `${petal.left}%`,\n                            transform: `scale(${petal.scale})`,\n                            animationDelay: `${petal.delay}s`,\n                            animationDuration: `${petal.duration}s`,\n                        })\n                    }, null, 4 /* STYLE */));\n                }), 128 /* KEYED_FRAGMENT */)),\n                _createCommentVNode(\" 闪烁阴影 \"),\n                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"flicker-overlay\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 暗角 \"),\n                _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"vignette\" }, null, -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./BackgroundAmbience.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BackgroundAmbience.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./BackgroundAmbience.vue?vue&type=style&index=0&id=5c5045ec&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5c5045ec\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"progress-container\" };\nconst _hoisted_2 = { class: \"progress-header\" };\nconst _hoisted_3 = { class: \"progress-label\" };\nconst _hoisted_4 = [\"innerHTML\"];\nconst _hoisted_5 = {\n    key: 0,\n    class: \"progress-value\"\n};\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ProgressBar',\n    props: {\n        value: {},\n        max: {},\n        color: {},\n        label: { default: '' },\n        showValue: { type: Boolean, default: true },\n        size: { default: 'md' },\n        icon: { default: '' }\n    },\n    setup(__props) {\n        const props = __props;\n        const percentage = computed(() => {\n            return Math.min(Math.max((props.value / props.max) * 100, 0), 100);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"span\", _hoisted_3, [\n                        (__props.icon)\n                            ? (_openBlock(), _createElementBlock(\"span\", {\n                                key: 0,\n                                class: \"progress-icon\",\n                                innerHTML: __props.icon\n                            }, null, 8 /* PROPS */, _hoisted_4))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createTextVNode(\" \" + _toDisplayString(__props.label), 1 /* TEXT */)\n                    ]),\n                    (__props.showValue)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(__props.value) + \" / \" + _toDisplayString(__props.max), 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"progress-track\", `track-${__props.color}`])\n                }, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"progress-fill\", `fill-${__props.color}`]),\n                        style: _normalizeStyle({ width: `${percentage.value}%` })\n                    }, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"div\", { class: \"shimmer\" }, null, -1 /* CACHED */)\n                        ]))], 6 /* CLASS, STYLE */)\n                ], 2 /* CLASS */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ProgressBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProgressBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ProgressBar.vue?vue&type=style&index=0&id=07aaeb53&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-07aaeb53\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"stat-item\" };\nconst _hoisted_2 = { class: \"stat-value\" };\nconst _hoisted_3 = { class: \"stat-item\" };\nconst _hoisted_4 = { class: \"stat-value\" };\nconst _hoisted_5 = { class: \"stat-item\" };\nconst _hoisted_6 = { class: \"stat-value\" };\nconst _hoisted_7 = { class: \"stat-item\" };\nconst _hoisted_8 = { class: \"stat-value\" };\nconst _hoisted_9 = { class: \"stat-item\" };\nconst _hoisted_10 = { class: \"stat-value\" };\nconst _hoisted_11 = { class: \"stat-item\" };\nconst _hoisted_12 = { class: \"stat-value\" };\nconst _hoisted_13 = { class: \"stat-item stat-full\" };\nconst _hoisted_14 = { class: \"stat-value\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StatsPanel',\n    props: {\n        stats: {},\n        compact: { type: Boolean, default: false }\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"stats-panel\", { 'stats-compact': __props.compact }])\n            }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"stat-info text-pink-400\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"14\",\n                            height: \"14\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\" })\n                        ]),\n                        _createElementVNode(\"span\", { class: \"stat-label\" }, \"性斗力\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(__props.stats.sexPower), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"stat-info text-green-400\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"14\",\n                            height: \"14\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\" })\n                        ]),\n                        _createElementVNode(\"span\", { class: \"stat-label\" }, \"忍耐力\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_4, _toDisplayString(__props.stats.baseEndurance), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _cache[2] || (_cache[2] = _createStaticVNode(\"<div class=\\\"stat-info text-cyan-400\\\" data-v-0a8a4b1c><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" data-v-0a8a4b1c><path d=\\\"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2\\\" data-v-0a8a4b1c></path><path d=\\\"M9.6 4.6A2 2 0 1 1 11 8H2\\\" data-v-0a8a4b1c></path><path d=\\\"M12.6 19.4A2 2 0 1 0 14 16H2\\\" data-v-0a8a4b1c></path></svg><span class=\\\"stat-label\\\" data-v-0a8a4b1c>闪避率</span></div>\", 1)),\n                    _createElementVNode(\"span\", _hoisted_6, _toDisplayString(__props.stats.evasion) + \"%\", 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    _cache[3] || (_cache[3] = _createStaticVNode(\"<div class=\\\"stat-info text-orange-400\\\" data-v-0a8a4b1c><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" data-v-0a8a4b1c><circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"10\\\" data-v-0a8a4b1c></circle><line x1=\\\"22\\\" y1=\\\"12\\\" x2=\\\"18\\\" y2=\\\"12\\\" data-v-0a8a4b1c></line><line x1=\\\"6\\\" y1=\\\"12\\\" x2=\\\"2\\\" y2=\\\"12\\\" data-v-0a8a4b1c></line><line x1=\\\"12\\\" y1=\\\"6\\\" x2=\\\"12\\\" y2=\\\"2\\\" data-v-0a8a4b1c></line><line x1=\\\"12\\\" y1=\\\"22\\\" x2=\\\"12\\\" y2=\\\"18\\\" data-v-0a8a4b1c></line></svg><span class=\\\"stat-label\\\" data-v-0a8a4b1c>暴击率</span></div>\", 1)),\n                    _createElementVNode(\"span\", _hoisted_8, _toDisplayString(__props.stats.crit) + \"%\", 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_9, [\n                    _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"stat-info text-rose-400\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"14\",\n                            height: \"14\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\" })\n                        ]),\n                        _createElementVNode(\"span\", { class: \"stat-label\" }, \"魅力\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(__props.stats.charm), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_11, [\n                    _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"stat-info text-yellow-400\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"14\",\n                            height: \"14\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\" })\n                        ]),\n                        _createElementVNode(\"span\", { class: \"stat-label\" }, \"幸运\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_12, _toDisplayString(__props.stats.luck), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_13, [\n                    _cache[6] || (_cache[6] = _createStaticVNode(\"<div class=\\\"stat-info text-purple-400\\\" data-v-0a8a4b1c><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" data-v-0a8a4b1c><path d=\\\"M12 2a8 8 0 1 0 8 8H4a8 8 0 1 0 8-8z\\\" data-v-0a8a4b1c></path><path d=\\\"M12 2v8\\\" data-v-0a8a4b1c></path><path d=\\\"m4.93 10.93 1.41 1.41\\\" data-v-0a8a4b1c></path><path d=\\\"m2 18 2 2\\\" data-v-0a8a4b1c></path><path d=\\\"m22 18-2 2\\\" data-v-0a8a4b1c></path><path d=\\\"m17.66 12.34 1.41-1.41\\\" data-v-0a8a4b1c></path></svg><span class=\\\"stat-label\\\" data-v-0a8a4b1c>意志力</span></div>\", 1)),\n                    _createElementVNode(\"span\", _hoisted_14, _toDisplayString(__props.stats.willpower), 1 /* TEXT */)\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StatsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatsPanel.vue?vue&type=style&index=0&id=0a8a4b1c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0a8a4b1c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"character-panel\" };\nconst _hoisted_2 = { class: \"name-text\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"intention-hint\"\n};\nconst _hoisted_4 = { class: \"avatar-container\" };\nconst _hoisted_5 = [\"src\", \"alt\"];\nconst _hoisted_6 = {\n    key: 0,\n    class: \"mobile-warning\"\n};\nconst _hoisted_7 = { class: \"stats-overlay\" };\nconst _hoisted_8 = { class: \"bars-container\" };\nconst _hoisted_9 = { class: \"climax-bar\" };\nimport ProgressBar from './ProgressBar.vue';\nimport StatsPanel from './StatsPanel.vue';\nconst activityIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"/></svg>`;\nconst heartIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\"/><path d=\"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27\"/></svg>`;\nconst zapIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"/></svg>`;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CharacterPanel',\n    props: {\n        character: {},\n        isEnemy: { type: Boolean },\n        turnState: {},\n        enemyIntention: {}\n    },\n    setup(__props) {\n        // 图标SVG\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 名称标签 \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"name-badge\", __props.isEnemy ? 'badge-enemy' : 'badge-player'])\n                }, [\n                    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(__props.character.name), 1 /* TEXT */),\n                    _createCommentVNode(\" 敌人预告提示 \"),\n                    (__props.isEnemy && __props.turnState.phase === 'playerInput' && __props.enemyIntention)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"intention-icon\" }, \"⚠️\", -1 /* CACHED */)),\n                            _createTextVNode(\" 预告: \" + _toDisplayString(__props.enemyIntention.name), 1 /* TEXT */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 2 /* CLASS */),\n                _createCommentVNode(\" 头像与悬停属性 \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"avatar-glow\", __props.isEnemy ? 'glow-enemy' : 'glow-player'])\n                    }, null, 2 /* CLASS */),\n                    _createElementVNode(\"img\", {\n                        src: __props.character.avatarUrl,\n                        alt: __props.character.name,\n                        class: _normalizeClass([\"avatar-image\", {\n                                'avatar-enemy': __props.isEnemy,\n                                'avatar-player': !__props.isEnemy,\n                                'avatar-pulse': __props.turnState.phase === 'processing' && !__props.isEnemy,\n                                'avatar-scale': __props.turnState.phase === 'enemyAction' && __props.isEnemy,\n                                'avatar-climax': __props.turnState.phase === 'climaxResolution' && __props.turnState.climaxTarget === (__props.isEnemy ? 'enemy' : 'player'),\n                            }])\n                    }, null, 10 /* CLASS, PROPS */, _hoisted_5),\n                    _createCommentVNode(\" 移动端预告图标 \"),\n                    (__props.isEnemy && __props.turnState.phase === 'playerInput' && __props.enemyIntention)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"span\", null, \"!\", -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" 属性悬停面板 \"),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"overlay-title\" }, \"详细属性\", -1 /* CACHED */)),\n                        _createVNode(StatsPanel, {\n                            stats: __props.character.stats,\n                            compact: \"\"\n                        }, null, 8 /* PROPS */, [\"stats\"])\n                    ])\n                ]),\n                _createCommentVNode(\" 状态条 \"),\n                _createElementVNode(\"div\", _hoisted_8, [\n                    _createVNode(ProgressBar, {\n                        value: __props.character.stats.currentEndurance,\n                        max: __props.character.stats.maxEndurance,\n                        color: \"green\",\n                        label: \"体力\",\n                        \"show-value\": true,\n                        icon: activityIcon\n                    }, null, 8 /* PROPS */, [\"value\", \"max\"]),\n                    _createVNode(ProgressBar, {\n                        value: __props.character.stats.currentPleasure,\n                        max: __props.character.stats.maxPleasure,\n                        color: \"pink\",\n                        label: \"快感\",\n                        \"show-value\": true,\n                        icon: heartIcon\n                    }, null, 8 /* PROPS */, [\"value\", \"max\"]),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                        _createVNode(ProgressBar, {\n                            value: __props.character.stats.climaxCount,\n                            max: __props.character.stats.maxClimaxCount,\n                            color: \"purple\",\n                            label: \"高潮\",\n                            \"show-value\": true,\n                            icon: zapIcon\n                        }, null, 8 /* PROPS */, [\"value\", \"max\"])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CharacterPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CharacterPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CharacterPanel.vue?vue&type=style&index=0&id=75f7a09e&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-75f7a09e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"log-toggle\" };\nconst _hoisted_2 = {\n    key: 0,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2\"\n};\nconst _hoisted_3 = {\n    key: 1,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2\"\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"log-preview\"\n};\nconst _hoisted_5 = { class: \"log-turn\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"log-empty\"\n};\nconst _hoisted_7 = { class: \"log-turn\" };\nimport { ref, watch, nextTick } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CombatLog',\n    props: {\n        logs: {}\n    },\n    setup(__props) {\n        const props = __props;\n        const isExpanded = ref(true);\n        const bottomRef = ref(null);\n        // 自动滚动到底部\n        watch(() => props.logs.length, () => {\n            if (isExpanded.value) {\n                nextTick(() => {\n                    bottomRef.value?.scrollIntoView({ behavior: 'smooth' });\n                });\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"combat-log\", { 'log-expanded': isExpanded.value }])\n            }, [\n                _createCommentVNode(\" 头部切换栏 \"),\n                _createElementVNode(\"div\", {\n                    class: \"log-header\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (isExpanded.value = !isExpanded.value))\n                }, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"log-title\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"12\",\n                            height: \"12\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" })\n                        ]),\n                        _createElementVNode(\"span\", null, \"战斗日志\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        (isExpanded.value)\n                            ? (_openBlock(), _createElementBlock(\"svg\", _hoisted_2, [...(_cache[1] || (_cache[1] = [\n                                    _createElementVNode(\"path\", { d: \"m6 9 6 6 6-6\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : (_openBlock(), _createElementBlock(\"svg\", _hoisted_3, [...(_cache[2] || (_cache[2] = [\n                                    _createElementVNode(\"path\", { d: \"m18 15-6-6-6 6\" }, null, -1 /* CACHED */)\n                                ]))]))\n                    ])\n                ]),\n                _createCommentVNode(\" 折叠时显示最新日志 \"),\n                (!isExpanded.value && __props.logs.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                        _createElementVNode(\"span\", _hoisted_5, \"[\" + _toDisplayString(__props.logs[__props.logs.length - 1].turn) + \"]\", 1 /* TEXT */),\n                        _createTextVNode(\" \" + _toDisplayString(__props.logs[__props.logs.length - 1].message), 1 /* TEXT */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" 展开的日志列表 \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"log-content\", { 'log-hidden': !isExpanded.value }])\n                }, [\n                    (__props.logs.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, \"战斗即将开始...\"))\n                        : _createCommentVNode(\"v-if\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.logs, (log) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: log.id,\n                            class: _normalizeClass([\"log-entry\", {\n                                    'log-critical': log.type === 'critical',\n                                    'log-damage': log.type === 'damage',\n                                    'log-heal': log.type === 'heal',\n                                    'log-info': log.type === 'info',\n                                }])\n                        }, [\n                            _createElementVNode(\"span\", _hoisted_7, \"[\" + _toDisplayString(log.turn) + \"]\", 1 /* TEXT */),\n                            _createTextVNode(\" \" + _toDisplayString(log.message), 1 /* TEXT */)\n                        ], 2 /* CLASS */));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createElementVNode(\"div\", {\n                        ref_key: \"bottomRef\",\n                        ref: bottomRef\n                    }, null, 512 /* NEED_PATCH */)\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CombatLog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CombatLog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CombatLog.vue?vue&type=style&index=0&id=81b1ad36&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-81b1ad36\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { renderSlot as _renderSlot, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Card',\n    props: {\n        hover: { type: Boolean, default: false }\n    },\n    emits: [\"click\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"card\", { 'card-hover': __props.hover }]),\n                onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('click')))\n            }, [\n                _renderSlot(_ctx.$slots, \"default\")\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Card.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Card.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Card.vue?vue&type=style&index=0&id=61077dd9&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-61077dd9\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Teleport as _Teleport, createBlock as _createBlock, normalizeClass as _normalizeClass, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, Transition as _Transition, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"combat-wrapper\" };\nconst _hoisted_2 = { class: \"combat-header\" };\nconst _hoisted_3 = { class: \"header-right\" };\nconst _hoisted_4 = { class: \"turn-counter\" };\nconst _hoisted_5 = { class: \"phase-indicator\" };\nconst _hoisted_6 = { class: \"combat-arena\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"modal-overlay\"\n};\nconst _hoisted_8 = { class: \"climax-modal\" };\nconst _hoisted_9 = { class: \"climax-desc\" };\nconst _hoisted_10 = { class: \"climax-actions\" };\nconst _hoisted_11 = { class: \"combat-footer\" };\nconst _hoisted_12 = { class: \"footer-content\" };\nconst _hoisted_13 = { class: \"log-section\" };\nconst _hoisted_14 = { class: \"action-section\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"action-header\"\n};\nconst _hoisted_16 = {\n    key: 1,\n    class: \"action-header\"\n};\nconst _hoisted_17 = { class: \"waiting-text\" };\nconst _hoisted_18 = { class: \"action-grid\" };\nconst _hoisted_19 = {\n    key: 0,\n    class: \"processing-overlay\"\n};\nconst _hoisted_20 = {\n    key: \"main\",\n    class: \"menu-main\"\n};\nconst _hoisted_21 = {\n    key: \"skills\",\n    class: \"menu-skills\"\n};\nconst _hoisted_22 = {\n    key: 0,\n    class: \"cooldown-overlay\"\n};\nconst _hoisted_23 = { class: \"cooldown-count\" };\nconst _hoisted_24 = { class: \"skill-header\" };\nconst _hoisted_25 = { class: \"skill-desc\" };\nconst _hoisted_26 = {\n    key: \"items\",\n    class: \"menu-items\"\n};\nconst _hoisted_27 = { class: \"item-header\" };\nconst _hoisted_28 = { class: \"item-name\" };\nconst _hoisted_29 = { class: \"item-quantity\" };\nconst _hoisted_30 = { class: \"item-desc\" };\nconst _hoisted_31 = {\n    key: 0,\n    class: \"result-overlay\"\n};\nconst _hoisted_32 = { class: \"result-content\" };\nimport { ref, reactive, watch, onMounted } from 'vue';\nimport { createDefaultPlayer, createDefaultEnemy, CLIMAX_TEXTS } from './constants';\nimport { getEnemyByName } from './enemyDatabase';\nimport BackgroundAmbience from './components/BackgroundAmbience.vue';\nimport CharacterPanel from './components/CharacterPanel.vue';\nimport CombatLog from './components/CombatLog.vue';\nimport Card from './components/Card.vue';\n// ================= 状态 =================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        const player = ref(createDefaultPlayer());\n        const enemy = ref(createDefaultEnemy());\n        const turnState = reactive({\n            currentTurn: 1,\n            phase: 'playerInput',\n            enemyIntention: null,\n            climaxTarget: null,\n        });\n        const logs = ref([]);\n        const activeMenu = ref('main');\n        // ================= MVU 集成 =================\n        async function loadFromMvu() {\n            try {\n                await waitGlobalInitialized('Mvu');\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n                if (!mvuData?.stat_data)\n                    return;\n                const data = mvuData.stat_data;\n                // 获取统一的高潮次数上限 (双方共享)\n                const maxClimaxCount = _.get(data, '性斗系统.胜负规则.高潮次数上限', 3);\n                // 同步玩家数据\n                player.value.stats.maxEndurance = _.get(data, '核心状态.$最大耐力', 100);\n                player.value.stats.currentEndurance = _.get(data, '核心状态.$耐力', 100);\n                player.value.stats.maxPleasure = _.get(data, '核心状态.$最大快感', 100);\n                player.value.stats.currentPleasure = _.get(data, '核心状态.$快感', 0);\n                player.value.stats.willpower = _.get(data, '核心状态.意志力', 100);\n                player.value.stats.charm = _.get(data, '核心状态._魅力', 10);\n                player.value.stats.luck = _.get(data, '核心状态._幸运', 10);\n                player.value.stats.evasion = _.get(data, '核心状态._闪避率', 0);\n                player.value.stats.crit = _.get(data, '核心状态._暴击率', 0);\n                player.value.stats.sexPower = _.get(data, '性斗系统.实时性斗力', 25);\n                player.value.stats.baseEndurance = _.get(data, '性斗系统.实时忍耐力', 15);\n                player.value.stats.climaxCount = _.get(data, '性斗系统.高潮次数', 0);\n                player.value.stats.maxClimaxCount = maxClimaxCount;\n                // 加载玩家技能\n                const availableSkills = _.get(data, '性斗系统.$可用技能', {});\n                const skillIds = Object.keys(availableSkills);\n                if (skillIds.length > 0) {\n                    const { getSkillById } = await import('./skillDatabase');\n                    player.value.skills = skillIds\n                        .map(skillId => {\n                        const skillData = getSkillById(skillId);\n                        if (!skillData)\n                            return null;\n                        // 获取技能当前冷却\n                        const currentCooldown = _.get(data, `性斗系统.$技能冷却.${skillId}`, 0);\n                        return {\n                            id: skillData.id,\n                            name: skillData.name,\n                            description: skillData.description,\n                            cost: skillData.staminaCost,\n                            type: skillData.type,\n                            cooldown: skillData.cooldown,\n                            currentCooldown,\n                            data: skillData,\n                        };\n                    })\n                        .filter(skill => skill !== null);\n                    console.info('[战斗界面] 已加载玩家技能:', player.value.skills.map(s => s.name));\n                }\n                // 获取对手名称\n                const enemyName = _.get(data, '性斗系统.对手名称', '');\n                console.info('[战斗界面] 对手名称:', enemyName);\n                // 从数据库加载敌人数据\n                if (enemyName && enemyName !== '') {\n                    const loadedEnemy = getEnemyByName(enemyName);\n                    if (loadedEnemy) {\n                        enemy.value = loadedEnemy;\n                        console.info('[战斗界面] 已从数据库加载敌人:', enemyName);\n                        // 同步MVU中的对手数据到数据库加载的敌人\n                        const existingEndurance = _.get(data, '性斗系统.对手耐力');\n                        const existingPleasure = _.get(data, '性斗系统.对手快感');\n                        const existingClimaxCount = _.get(data, '性斗系统.对手高潮次数');\n                        if (existingEndurance !== undefined) {\n                            enemy.value.stats.currentEndurance = existingEndurance;\n                        }\n                        if (existingPleasure !== undefined) {\n                            enemy.value.stats.currentPleasure = existingPleasure;\n                        }\n                        if (existingClimaxCount !== undefined) {\n                            enemy.value.stats.climaxCount = existingClimaxCount;\n                        }\n                        // 使用统一的高潮次数上限覆盖数据库中的值\n                        enemy.value.stats.maxClimaxCount = maxClimaxCount;\n                        // 加载敌人技能冷却\n                        const enemySkillCooldowns = _.get(data, '性斗系统.对手技能冷却', {});\n                        enemy.value.skills.forEach(skill => {\n                            const cooldown = enemySkillCooldowns[skill.id];\n                            if (cooldown !== undefined) {\n                                skill.currentCooldown = cooldown;\n                            }\n                        });\n                        // 将数据库中的完整数据写回MVU\n                        await saveMvuEnemyData();\n                    }\n                    else {\n                        console.warn('[战斗界面] 数据库中未找到敌人:', enemyName, '，使用MVU数据');\n                        // 从MVU加载现有数据作为后备\n                        loadEnemyFromMvuData(data, maxClimaxCount);\n                    }\n                }\n                else {\n                    // 没有对手名称，使用MVU中的数据\n                    loadEnemyFromMvuData(data, maxClimaxCount);\n                }\n                // 同步回合数\n                turnState.currentTurn = _.get(data, '性斗系统.当前回合', 1);\n                console.info('[战斗界面] 已从MVU加载数据');\n            }\n            catch (e) {\n                console.warn('[战斗界面] MVU加载失败，使用默认数据', e);\n            }\n        }\n        // 从MVU数据加载敌人（后备方案）\n        function loadEnemyFromMvuData(data, maxClimaxCount) {\n            const enemyName = _.get(data, '性斗系统.对手名称', '风纪委员长');\n            if (enemyName)\n                enemy.value.name = enemyName;\n            enemy.value.stats.maxEndurance = _.get(data, '性斗系统.对手最大耐力', 150);\n            enemy.value.stats.currentEndurance = _.get(data, '性斗系统.对手耐力', 150);\n            enemy.value.stats.maxPleasure = _.get(data, '性斗系统.对手最大快感', 100);\n            enemy.value.stats.currentPleasure = _.get(data, '性斗系统.对手快感', 0);\n            enemy.value.stats.climaxCount = _.get(data, '性斗系统.对手高潮次数', 0);\n            enemy.value.stats.maxClimaxCount = maxClimaxCount; // 使用统一的高潮次数上限\n            enemy.value.stats.sexPower = _.get(data, '性斗系统.对手性斗力', 20);\n            enemy.value.stats.baseEndurance = _.get(data, '性斗系统.对手忍耐力', 20);\n            enemy.value.stats.charm = _.get(data, '性斗系统.对手魅力', 10);\n            enemy.value.stats.luck = _.get(data, '性斗系统.对手幸运', 5);\n            enemy.value.stats.evasion = _.get(data, '性斗系统.对手闪避率', 5);\n            enemy.value.stats.crit = _.get(data, '性斗系统.对手暴击率', 10);\n        }\n        // 保存敌人完整数据到MVU\n        async function saveMvuEnemyData() {\n            try {\n                if (typeof Mvu === 'undefined')\n                    return;\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n                if (!mvuData)\n                    return;\n                // 更新敌人的完整数据\n                _.set(mvuData.stat_data, '性斗系统.对手名称', enemy.value.name);\n                _.set(mvuData.stat_data, '性斗系统.对手最大耐力', enemy.value.stats.maxEndurance);\n                _.set(mvuData.stat_data, '性斗系统.对手耐力', enemy.value.stats.currentEndurance);\n                _.set(mvuData.stat_data, '性斗系统.对手最大快感', enemy.value.stats.maxPleasure);\n                _.set(mvuData.stat_data, '性斗系统.对手快感', enemy.value.stats.currentPleasure);\n                _.set(mvuData.stat_data, '性斗系统.对手高潮次数', enemy.value.stats.climaxCount);\n                _.set(mvuData.stat_data, '性斗系统.对手性斗力', enemy.value.stats.sexPower);\n                _.set(mvuData.stat_data, '性斗系统.对手忍耐力', enemy.value.stats.baseEndurance);\n                _.set(mvuData.stat_data, '性斗系统.对手魅力', enemy.value.stats.charm);\n                _.set(mvuData.stat_data, '性斗系统.对手幸运', enemy.value.stats.luck);\n                _.set(mvuData.stat_data, '性斗系统.对手闪避率', enemy.value.stats.evasion);\n                _.set(mvuData.stat_data, '性斗系统.对手暴击率', enemy.value.stats.crit);\n                await Mvu.replaceMvuData(mvuData, { type: 'message', message_id: 'latest' });\n                console.info('[战斗界面] 已保存敌人完整数据到MVU');\n            }\n            catch (e) {\n                console.warn('[战斗界面] 保存敌人数据失败', e);\n            }\n        }\n        async function saveToMvu() {\n            try {\n                if (typeof Mvu === 'undefined')\n                    return;\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n                if (!mvuData)\n                    return;\n                // 保存玩家技能冷却\n                const playerSkillCooldowns = {};\n                player.value.skills.forEach(skill => {\n                    playerSkillCooldowns[skill.id] = skill.currentCooldown;\n                });\n                // 保存敌人技能冷却\n                const enemySkillCooldowns = {};\n                enemy.value.skills.forEach(skill => {\n                    enemySkillCooldowns[skill.id] = skill.currentCooldown;\n                });\n                const updates = {\n                    // 玩家数据\n                    '核心状态.$耐力': player.value.stats.currentEndurance,\n                    '核心状态.$快感': player.value.stats.currentPleasure,\n                    '性斗系统.当前回合': turnState.currentTurn,\n                    '性斗系统.高潮次数': player.value.stats.climaxCount,\n                    '性斗系统.$技能冷却': playerSkillCooldowns,\n                    // 敌人数据\n                    '性斗系统.对手名称': enemy.value.name,\n                    '性斗系统.对手耐力': enemy.value.stats.currentEndurance,\n                    '性斗系统.对手快感': enemy.value.stats.currentPleasure,\n                    '性斗系统.对手高潮次数': enemy.value.stats.climaxCount,\n                    '性斗系统.对手最大耐力': enemy.value.stats.maxEndurance,\n                    '性斗系统.对手最大快感': enemy.value.stats.maxPleasure,\n                    '性斗系统.对手性斗力': enemy.value.stats.sexPower,\n                    '性斗系统.对手忍耐力': enemy.value.stats.baseEndurance,\n                    '性斗系统.对手魅力': enemy.value.stats.charm,\n                    '性斗系统.对手幸运': enemy.value.stats.luck,\n                    '性斗系统.对手闪避率': enemy.value.stats.evasion,\n                    '性斗系统.对手暴击率': enemy.value.stats.crit,\n                    '性斗系统.对手技能冷却': enemySkillCooldowns,\n                };\n                for (const [path, value] of Object.entries(updates)) {\n                    _.set(mvuData.stat_data, path, value);\n                }\n                await Mvu.replaceMvuData(mvuData, { type: 'message', message_id: 'latest' });\n            }\n            catch (e) {\n                console.warn('[战斗界面] MVU保存失败', e);\n            }\n        }\n        // ================= 辅助函数 =================\n        function addLog(message, source, type = 'info') {\n            logs.value.push({\n                id: Math.random().toString(36).substr(2, 9),\n                turn: turnState.currentTurn,\n                message,\n                source,\n                type,\n            });\n        }\n        function cloneCharacter(char) {\n            return {\n                ...char,\n                stats: { ...char.stats },\n                skills: char.skills.map(s => ({ ...s })),\n                items: char.items.map(i => ({ ...i })),\n                statusEffects: [...char.statusEffects],\n            };\n        }\n        function getPhaseText(phase) {\n            const texts = {\n                playerInput: '玩家回合',\n                processing: '结算中',\n                enemyAction: '敌方行动',\n                victory: '胜利',\n                defeat: '败北',\n                climaxResolution: '高潮处理',\n            };\n            return texts[phase];\n        }\n        function isSkillDisabled(skill) {\n            return skill.currentCooldown > 0 || player.value.stats.currentEndurance < skill.cost;\n        }\n        // ================= 战斗逻辑 =================\n        function determineEnemyIntention() {\n            const skill = enemy.value.skills[Math.floor(Math.random() * enemy.value.skills.length)];\n            turnState.enemyIntention = skill;\n        }\n        function handlePlayerSkill(skill) {\n            if (turnState.phase !== 'playerInput')\n                return;\n            if (isSkillDisabled(skill)) {\n                addLog(skill.currentCooldown > 0 ? '技能冷却中！' : '耐力不足！', 'system', 'info');\n                return;\n            }\n            turnState.phase = 'processing';\n            const nextPlayer = cloneCharacter(player.value);\n            const nextEnemy = cloneCharacter(enemy.value);\n            // 消耗耐力\n            nextPlayer.stats.currentEndurance -= skill.cost;\n            // 设置冷却\n            const skillIndex = nextPlayer.skills.findIndex(s => s.id === skill.id);\n            if (skillIndex !== -1) {\n                nextPlayer.skills[skillIndex].currentCooldown = skill.cooldown;\n            }\n            // 使用新的战斗计算系统\n            import('./combatCalculator').then(({ executeAttack, applySkillBuffs }) => {\n                const result = executeAttack(nextPlayer, nextEnemy, skill.data);\n                // 记录战斗日志\n                addLog(`${nextPlayer.name} 使用了 ${skill.name}！`, 'player', 'info');\n                if (result.isDodged) {\n                    addLog(`${nextEnemy.name} 闪避了攻击！`, 'system', 'info');\n                }\n                else {\n                    if (result.isCritical) {\n                        addLog(`暴击！造成 ${result.actualDamage} 点快感伤害！`, 'player', 'critical');\n                    }\n                    else {\n                        addLog(`造成 ${result.actualDamage} 点快感伤害`, 'player', 'damage');\n                    }\n                    // 应用伤害\n                    nextEnemy.stats.currentPleasure = Math.min(nextEnemy.stats.maxPleasure, nextEnemy.stats.currentPleasure + result.actualDamage);\n                    // 应用buff效果\n                    const buffLogs = applySkillBuffs(nextEnemy, skill.data);\n                    buffLogs.forEach(log => addLog(log, 'system', 'info'));\n                }\n                // 更新状态\n                player.value = nextPlayer;\n                enemy.value = nextEnemy;\n                // 检查是否高潮\n                if (nextEnemy.stats.currentPleasure >= nextEnemy.stats.maxPleasure) {\n                    turnState.climaxTarget = 'enemy';\n                    turnState.phase = 'climaxResolution';\n                }\n                else {\n                    setTimeout(handleEnemyTurn, 1000);\n                }\n            });\n        }\n        function handlePlayerItem(item) {\n            if (turnState.phase !== 'playerInput' || item.quantity <= 0)\n                return;\n            turnState.phase = 'processing';\n            const nextPlayer = cloneCharacter(player.value);\n            const nextEnemy = cloneCharacter(enemy.value);\n            const itemIndex = nextPlayer.items.findIndex(i => i.id === item.id);\n            if (itemIndex > -1) {\n                nextPlayer.items[itemIndex].quantity -= 1;\n            }\n            const log = item.effect(nextPlayer, nextEnemy);\n            addLog(log.message, log.source, log.type);\n            player.value = nextPlayer;\n            enemy.value = nextEnemy;\n            activeMenu.value = 'main';\n            if (nextEnemy.stats.currentPleasure < nextEnemy.stats.maxPleasure &&\n                nextPlayer.stats.currentPleasure < nextPlayer.stats.maxPleasure) {\n                setTimeout(handleEnemyTurn, 1000);\n            }\n        }\n        function handleEnemyTurn() {\n            turnState.phase = 'enemyAction';\n            setTimeout(() => {\n                if (!turnState.enemyIntention)\n                    return;\n                const nextPlayer = cloneCharacter(player.value);\n                const nextEnemy = cloneCharacter(enemy.value);\n                const skill = nextEnemy.skills.find(s => s.id === turnState.enemyIntention?.id) || nextEnemy.skills[0];\n                if (!skill)\n                    return;\n                // 使用新的战斗计算系统\n                import('./combatCalculator').then(({ executeAttack, applySkillBuffs }) => {\n                    const result = executeAttack(nextEnemy, nextPlayer, skill.data);\n                    // 记录战斗日志\n                    addLog(`${nextEnemy.name} 使用了 ${skill.name}！`, 'enemy', 'info');\n                    if (result.isDodged) {\n                        addLog(`你闪避了攻击！`, 'system', 'info');\n                    }\n                    else {\n                        if (result.isCritical) {\n                            addLog(`暴击！受到 ${result.actualDamage} 点快感伤害！`, 'enemy', 'critical');\n                        }\n                        else {\n                            addLog(`受到 ${result.actualDamage} 点快感伤害`, 'enemy', 'damage');\n                        }\n                        // 应用伤害\n                        nextPlayer.stats.currentPleasure = Math.min(nextPlayer.stats.maxPleasure, nextPlayer.stats.currentPleasure + result.actualDamage);\n                        // 应用buff效果\n                        const buffLogs = applySkillBuffs(nextPlayer, skill.data);\n                        buffLogs.forEach(log => addLog(log, 'system', 'info'));\n                    }\n                    // 更新状态\n                    player.value = nextPlayer;\n                    enemy.value = nextEnemy;\n                    // 检查是否高潮\n                    if (nextPlayer.stats.currentPleasure >= nextPlayer.stats.maxPleasure) {\n                        turnState.climaxTarget = 'player';\n                        turnState.phase = 'climaxResolution';\n                    }\n                    else {\n                        setTimeout(startNewTurn, 1000);\n                    }\n                });\n            }, 1000);\n        }\n        function startNewTurn() {\n            turnState.currentTurn++;\n            turnState.phase = 'playerInput';\n            determineEnemyIntention();\n            // 回合开始回复\n            player.value.stats.currentEndurance = Math.min(player.value.stats.maxEndurance, player.value.stats.currentEndurance + 5);\n            // 冷却递减\n            player.value.skills.forEach(s => {\n                if (s.currentCooldown > 0)\n                    s.currentCooldown--;\n            });\n            enemy.value.skills.forEach(s => {\n                if (s.currentCooldown > 0)\n                    s.currentCooldown--;\n            });\n            // 更新状态效果\n            import('./combatCalculator').then(({ updateStatusEffects }) => {\n                const playerLogs = updateStatusEffects(player.value);\n                const enemyLogs = updateStatusEffects(enemy.value);\n                playerLogs.forEach(log => addLog(log, 'system', 'info'));\n                enemyLogs.forEach(log => addLog(log, 'system', 'info'));\n            });\n            addLog(`--- 第 ${turnState.currentTurn} 回合 ---`, 'system', 'info');\n            saveToMvu();\n        }\n        function handleClimaxResolution(action) {\n            const targetIsEnemy = turnState.climaxTarget === 'enemy';\n            const char = targetIsEnemy ? enemy.value : player.value;\n            if (action === 'process') {\n                const text = CLIMAX_TEXTS[Math.floor(Math.random() * CLIMAX_TEXTS.length)](char.name);\n                addLog(`>>> [过程] ${text}`, 'system', 'critical');\n            }\n            else {\n                addLog(`${char.name} 达到了高潮！ (过程略)`, 'system', 'info');\n            }\n            const newChar = cloneCharacter(char);\n            newChar.stats.currentPleasure = 0;\n            newChar.stats.climaxCount += 1;\n            if (targetIsEnemy) {\n                enemy.value = newChar;\n            }\n            else {\n                player.value = newChar;\n            }\n            // 检查游戏结束\n            if (newChar.stats.climaxCount >= newChar.stats.maxClimaxCount) {\n                turnState.phase = targetIsEnemy ? 'victory' : 'defeat';\n                turnState.climaxTarget = null;\n                addLog(targetIsEnemy ? '对手彻底崩溃！战斗胜利！' : '你彻底崩溃... 败北。', 'system', 'critical');\n                saveToMvu();\n                return;\n            }\n            // 继续战斗\n            if (targetIsEnemy) {\n                setTimeout(handleEnemyTurn, 500);\n            }\n            else {\n                setTimeout(startNewTurn, 500);\n            }\n            turnState.climaxTarget = null;\n        }\n        function handleSurrender() {\n            addLog('不能逃跑！这是尊严之战！', 'system', 'info');\n        }\n        function handleRestart() {\n            window.location.reload();\n        }\n        // ================= 状态监听 =================\n        watch([\n            () => player.value.stats.currentPleasure,\n            () => player.value.stats.currentEndurance,\n            () => enemy.value.stats.currentPleasure,\n            () => enemy.value.stats.currentEndurance,\n        ], () => {\n            if (turnState.phase === 'climaxResolution' || turnState.phase === 'victory' || turnState.phase === 'defeat')\n                return;\n            // 检查体力耗尽\n            if (enemy.value.stats.currentEndurance <= 0) {\n                turnState.phase = 'victory';\n                addLog('对手体力耗尽！战斗胜利！', 'system', 'critical');\n                saveToMvu();\n                return;\n            }\n            if (player.value.stats.currentEndurance <= 0) {\n                turnState.phase = 'defeat';\n                addLog('你体力耗尽... 败北。', 'system', 'damage');\n                saveToMvu();\n                return;\n            }\n            // 检查高潮\n            if (enemy.value.stats.currentPleasure >= enemy.value.stats.maxPleasure) {\n                turnState.phase = 'climaxResolution';\n                turnState.climaxTarget = 'enemy';\n                return;\n            }\n            if (player.value.stats.currentPleasure >= player.value.stats.maxPleasure) {\n                turnState.phase = 'climaxResolution';\n                turnState.climaxTarget = 'player';\n                return;\n            }\n        });\n        // ================= 初始化 =================\n        onMounted(async () => {\n            await loadFromMvu();\n            addLog(`遭遇了 ${enemy.value.name} !`, 'system');\n            determineEnemyIntention();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 背景效果 \"),\n                _createVNode(BackgroundAmbience),\n                _createCommentVNode(\" 顶部标题栏 \"),\n                _createElementVNode(\"header\", _hoisted_2, [\n                    _cache[7] || (_cache[7] = _createStaticVNode(\"<div class=\\\"header-left\\\" data-v-a1509984><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" class=\\\"terminal-icon\\\" data-v-a1509984><path d=\\\"m4 17 6-6-6-6\\\" data-v-a1509984></path><path d=\\\"M12 19h8\\\" data-v-a1509984></path></svg><div data-v-a1509984><h1 class=\\\"title\\\" data-v-a1509984>性斗学园</h1></div></div>\", 1)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, \"TURN \" + _toDisplayString(turnState.currentTurn), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_5, _toDisplayString(getPhaseText(turnState.phase)), 1 /* TEXT */)\n                    ])\n                ]),\n                _createCommentVNode(\" 主战斗区域 \"),\n                _createElementVNode(\"main\", _hoisted_6, [\n                    _createCommentVNode(\" 玩家角色 \"),\n                    _createVNode(CharacterPanel, {\n                        character: player.value,\n                        \"is-enemy\": false,\n                        \"turn-state\": turnState,\n                        \"enemy-intention\": turnState.enemyIntention\n                    }, null, 8 /* PROPS */, [\"character\", \"turn-state\", \"enemy-intention\"]),\n                    _createCommentVNode(\" VS 分隔线 \"),\n                    _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"vs-divider\" }, [\n                        _createElementVNode(\"div\", { class: \"divider-line\" }),\n                        _createElementVNode(\"span\", { class: \"vs-text\" }, \"VS\"),\n                        _createElementVNode(\"div\", { class: \"divider-line\" })\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\" 敌人角色 \"),\n                    _createVNode(CharacterPanel, {\n                        character: enemy.value,\n                        \"is-enemy\": true,\n                        \"turn-state\": turnState,\n                        \"enemy-intention\": turnState.enemyIntention\n                    }, null, 8 /* PROPS */, [\"character\", \"turn-state\", \"enemy-intention\"])\n                ]),\n                _createCommentVNode(\" 高潮处理弹窗 \"),\n                (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                    (turnState.phase === 'climaxResolution')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"modal-bg-pattern\" }, null, -1 /* CACHED */)),\n                                _cache[12] || (_cache[12] = _createElementVNode(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    width: \"64\",\n                                    height: \"64\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    \"stroke-width\": \"2\",\n                                    class: \"climax-icon\"\n                                }, [\n                                    _createElementVNode(\"path\", { d: \"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\" }),\n                                    _createElementVNode(\"path\", { d: \"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27\" })\n                                ], -1 /* CACHED */)),\n                                _cache[13] || (_cache[13] = _createElementVNode(\"h2\", { class: \"climax-title\" }, \"高潮降临\", -1 /* CACHED */)),\n                                _createElementVNode(\"p\", _hoisted_9, _toDisplayString(turnState.climaxTarget === 'enemy' ? enemy.value.name : player.value.name) + \" 已经达到了极限... \", 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"btn btn-process\",\n                                        onClick: _cache[0] || (_cache[0] = ($event) => (handleClimaxResolution('process')))\n                                    }, [...(_cache[9] || (_cache[9] = [\n                                            _createElementVNode(\"svg\", {\n                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                width: \"20\",\n                                                height: \"20\",\n                                                viewBox: \"0 0 24 24\",\n                                                fill: \"none\",\n                                                stroke: \"currentColor\",\n                                                \"stroke-width\": \"2\"\n                                            }, [\n                                                _createElementVNode(\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" })\n                                            ], -1 /* CACHED */),\n                                            _createTextVNode(\" 输出过程 \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"btn btn-skip\",\n                                        onClick: _cache[1] || (_cache[1] = ($event) => (handleClimaxResolution('skip')))\n                                    }, [...(_cache[10] || (_cache[10] = [\n                                            _createElementVNode(\"svg\", {\n                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                width: \"20\",\n                                                height: \"20\",\n                                                viewBox: \"0 0 24 24\",\n                                                fill: \"none\",\n                                                stroke: \"currentColor\",\n                                                \"stroke-width\": \"2\"\n                                            }, [\n                                                _createElementVNode(\"polygon\", { points: \"5 4 15 12 5 20 5 4\" }),\n                                                _createElementVNode(\"line\", {\n                                                    x1: \"19\",\n                                                    y1: \"5\",\n                                                    x2: \"19\",\n                                                    y2: \"19\"\n                                                })\n                                            ], -1 /* CACHED */),\n                                            _createTextVNode(\" 跳过过程 \", -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])),\n                _createCommentVNode(\" 底部操作区域 \"),\n                _createElementVNode(\"footer\", _hoisted_11, [\n                    _createElementVNode(\"div\", _hoisted_12, [\n                        _createCommentVNode(\" 战斗日志 \"),\n                        _createElementVNode(\"div\", _hoisted_13, [\n                            _createVNode(CombatLog, { logs: logs.value }, null, 8 /* PROPS */, [\"logs\"])\n                        ]),\n                        _createCommentVNode(\" 操作菜单 \"),\n                        _createElementVNode(\"div\", _hoisted_14, [\n                            _createCommentVNode(\" 菜单标题 \"),\n                            (turnState.phase === 'playerInput')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                    _createElementVNode(\"button\", {\n                                        class: _normalizeClass([\"tab-btn\", { active: activeMenu.value === 'main' }]),\n                                        onClick: _cache[2] || (_cache[2] = ($event) => (activeMenu.value = 'main'))\n                                    }, \" 行动 \", 2 /* CLASS */),\n                                    _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"tab-divider\" }, null, -1 /* CACHED */)),\n                                    _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"action-hint\" }, \"请选择你的行动\", -1 /* CACHED */))\n                                ]))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                                    _createElementVNode(\"span\", _hoisted_17, _toDisplayString(turnState.phase === 'climaxResolution' ? '等待抉择...' : '等待行动结算...'), 1 /* TEXT */)\n                                ])),\n                            _createCommentVNode(\" 操作按钮区 \"),\n                            _createElementVNode(\"div\", _hoisted_18, [\n                                _createCommentVNode(\" 处理中遮罩 \"),\n                                (turnState.phase !== 'playerInput' && turnState.phase !== 'climaxResolution')\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [...(_cache[16] || (_cache[16] = [\n                                            _createElementVNode(\"span\", null, \"计算中...\", -1 /* CACHED */)\n                                        ]))]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createVNode(_Transition, {\n                                    name: \"slide\",\n                                    mode: \"out-in\"\n                                }, {\n                                    default: _withCtx(() => [\n                                        (activeMenu.value === 'main')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                                                _createVNode(Card, {\n                                                    hover: \"\",\n                                                    onClick: _cache[3] || (_cache[3] = ($event) => (activeMenu.value = 'skills')),\n                                                    class: \"menu-card\"\n                                                }, {\n                                                    default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                                                            _createElementVNode(\"svg\", {\n                                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                                width: \"32\",\n                                                                height: \"32\",\n                                                                viewBox: \"0 0 24 24\",\n                                                                fill: \"none\",\n                                                                stroke: \"currentColor\",\n                                                                \"stroke-width\": \"2\",\n                                                                class: \"icon-blue\"\n                                                            }, [\n                                                                _createElementVNode(\"path\", { d: \"M14.5 17.5 3 6V3h3l11.5 11.5\" }),\n                                                                _createElementVNode(\"path\", { d: \"M13 19l6-6\" }),\n                                                                _createElementVNode(\"path\", { d: \"m16 16 4 4\" }),\n                                                                _createElementVNode(\"path\", { d: \"m19 21 2-2\" })\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"span\", null, \"战斗技能\", -1 /* CACHED */)\n                                                        ]))]),\n                                                    _: 1 /* STABLE */\n                                                }),\n                                                _createVNode(Card, {\n                                                    hover: \"\",\n                                                    onClick: _cache[4] || (_cache[4] = ($event) => (activeMenu.value = 'items')),\n                                                    class: \"menu-card\"\n                                                }, {\n                                                    default: _withCtx(() => [...(_cache[18] || (_cache[18] = [\n                                                            _createElementVNode(\"svg\", {\n                                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                                width: \"32\",\n                                                                height: \"32\",\n                                                                viewBox: \"0 0 24 24\",\n                                                                fill: \"none\",\n                                                                stroke: \"currentColor\",\n                                                                \"stroke-width\": \"2\",\n                                                                class: \"icon-green\"\n                                                            }, [\n                                                                _createElementVNode(\"path\", { d: \"M4 20V10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2Z\" }),\n                                                                _createElementVNode(\"path\", { d: \"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2\" })\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"span\", null, \"物品背包\", -1 /* CACHED */)\n                                                        ]))]),\n                                                    _: 1 /* STABLE */\n                                                }),\n                                                _createVNode(Card, {\n                                                    hover: \"\",\n                                                    onClick: handleSurrender,\n                                                    class: \"menu-card\"\n                                                }, {\n                                                    default: _withCtx(() => [...(_cache[19] || (_cache[19] = [\n                                                            _createElementVNode(\"svg\", {\n                                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                                width: \"32\",\n                                                                height: \"32\",\n                                                                viewBox: \"0 0 24 24\",\n                                                                fill: \"none\",\n                                                                stroke: \"currentColor\",\n                                                                \"stroke-width\": \"2\",\n                                                                class: \"icon-red\"\n                                                            }, [\n                                                                _createElementVNode(\"path\", { d: \"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z\" }),\n                                                                _createElementVNode(\"line\", {\n                                                                    x1: \"4\",\n                                                                    y1: \"22\",\n                                                                    x2: \"4\",\n                                                                    y2: \"15\"\n                                                                })\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"span\", null, \"投降\", -1 /* CACHED */)\n                                                        ]))]),\n                                                    _: 1 /* STABLE */\n                                                })\n                                            ]))\n                                            : (activeMenu.value === 'skills')\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(player.value.skills, (skill) => {\n                                                        return (_openBlock(), _createBlock(Card, {\n                                                            key: skill.id,\n                                                            hover: !isSkillDisabled(skill),\n                                                            onClick: ($event) => (handlePlayerSkill(skill)),\n                                                            class: _normalizeClass([\"skill-card\", { disabled: isSkillDisabled(skill) }])\n                                                        }, {\n                                                            default: _withCtx(() => [\n                                                                (skill.currentCooldown > 0)\n                                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                                                                        _cache[21] || (_cache[21] = _createElementVNode(\"svg\", {\n                                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                                            width: \"20\",\n                                                                            height: \"20\",\n                                                                            viewBox: \"0 0 24 24\",\n                                                                            fill: \"none\",\n                                                                            stroke: \"currentColor\",\n                                                                            \"stroke-width\": \"2\"\n                                                                        }, [\n                                                                            _createElementVNode(\"circle\", {\n                                                                                cx: \"12\",\n                                                                                cy: \"12\",\n                                                                                r: \"10\"\n                                                                            }),\n                                                                            _createElementVNode(\"polyline\", { points: \"12 6 12 12 16 14\" })\n                                                                        ], -1 /* CACHED */)),\n                                                                        _createElementVNode(\"span\", _hoisted_23, [\n                                                                            _createTextVNode(_toDisplayString(skill.currentCooldown), 1 /* TEXT */),\n                                                                            _cache[20] || (_cache[20] = _createElementVNode(\"small\", null, \"T\", -1 /* CACHED */))\n                                                                        ])\n                                                                    ]))\n                                                                    : _createCommentVNode(\"v-if\", true),\n                                                                _createElementVNode(\"div\", _hoisted_24, [\n                                                                    _createElementVNode(\"span\", {\n                                                                        class: _normalizeClass([\"skill-name\", { 'skill-disabled': isSkillDisabled(skill) }])\n                                                                    }, _toDisplayString(skill.name), 3 /* TEXT, CLASS */),\n                                                                    _createElementVNode(\"span\", {\n                                                                        class: _normalizeClass([\"skill-cost\", { 'cost-danger': player.value.stats.currentEndurance < skill.cost }])\n                                                                    }, _toDisplayString(skill.cost) + \" SP\", 3 /* TEXT, CLASS */)\n                                                                ]),\n                                                                _createElementVNode(\"p\", _hoisted_25, _toDisplayString(skill.description), 1 /* TEXT */),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: _normalizeClass([\"skill-type\", { 'type-disabled': isSkillDisabled(skill) }])\n                                                                }, _toDisplayString(skill.type), 3 /* TEXT, CLASS */)\n                                                            ]),\n                                                            _: 2 /* DYNAMIC */\n                                                        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"hover\", \"onClick\", \"class\"]));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"back-btn\",\n                                                        onClick: _cache[5] || (_cache[5] = ($event) => (activeMenu.value = 'main'))\n                                                    }, \"返回\")\n                                                ]))\n                                                : (activeMenu.value === 'items')\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(player.value.items, (item) => {\n                                                            return (_openBlock(), _createBlock(Card, {\n                                                                key: item.id,\n                                                                hover: item.quantity > 0,\n                                                                onClick: ($event) => (handlePlayerItem(item)),\n                                                                class: _normalizeClass([\"item-card\", { disabled: item.quantity === 0 }])\n                                                            }, {\n                                                                default: _withCtx(() => [\n                                                                    _createElementVNode(\"div\", _hoisted_27, [\n                                                                        _createElementVNode(\"span\", _hoisted_28, _toDisplayString(item.name), 1 /* TEXT */),\n                                                                        _createElementVNode(\"span\", _hoisted_29, \"x\" + _toDisplayString(item.quantity), 1 /* TEXT */)\n                                                                    ]),\n                                                                    _createElementVNode(\"p\", _hoisted_30, _toDisplayString(item.description), 1 /* TEXT */)\n                                                                ]),\n                                                                _: 2 /* DYNAMIC */\n                                                            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"hover\", \"onClick\", \"class\"]));\n                                                        }), 128 /* KEYED_FRAGMENT */)),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"back-btn\",\n                                                            onClick: _cache[6] || (_cache[6] = ($event) => (activeMenu.value = 'main'))\n                                                        }, \"返回\")\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _: 1 /* STABLE */\n                                })\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" 胜负结算遮罩 \"),\n                    (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                        (turnState.phase === 'victory' || turnState.phase === 'defeat')\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _createElementVNode(\"h2\", {\n                                        class: _normalizeClass([\"result-title\", turnState.phase])\n                                    }, _toDisplayString(turnState.phase === 'victory' ? '完全胜利' : '彻底败北'), 3 /* TEXT, CLASS */),\n                                    _cache[22] || (_cache[22] = _createElementVNode(\"p\", { class: \"result-subtitle\" }, \"战斗结束\", -1 /* CACHED */)),\n                                    _createElementVNode(\"button\", {\n                                        class: \"restart-btn\",\n                                        onClick: handleRestart\n                                    }, \"重新开始\")\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=a1509984&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a1509984\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport './index.scss';\nimport App from './app.vue';\n\n$(() => {\n  // 创建并挂载Vue应用\n  const app = createApp(App);\n  app.mount('#app');\n\n  console.info('[性斗学园] 战斗界面已加载');\n});\n\n// 卸载时清理\n$(window).on('pagehide', () => {\n  console.info('[性斗学园] 战斗界面已卸载');\n});\n"],"names":["ALL_SKILLS","id","name","description","effectDescription","icon","type","PHYSICAL","staminaCost","cooldown","castTime","damageFormula","source","SEX_POWER","coefficient","baseValue","accuracy","critModifier","buffs","SENSITIVE","value","isPercent","duration","stackable","maxStacks","ignoreDefense","canBeDodged","canBeReflected","hitCount","voiceLine","CHARM","SILENCE","DEF_DOWN","SHAME","MENTAL","WILLPOWER_DOWN","SUPPORT","FOCUS","CRIT_UP","ATK_UP","REGEN","DEF_UP","CONTROL","BIND","DODGE_DOWN","HEAT","getSkillById","find","skill","exports","sfc","props","target","__vccOpts","key","val","executeAttack","attacker","logs","result","damage","isCritical","isDodged","actualDamage","baseDamage","totalDamage","component","sourceValue","stats","sexPower","charm","LUCK","luck","WILLPOWER","willpower","FIXED","Math","max","floor","calculateBaseDamage","push","attackerLuck","targetEvasion","skillAccuracy","finalAccuracy","clampedAccuracy","min","random","checkDodge","evasion","critical","attackerCrit","skillCritModifier","finalCritRate","clampedCritRate","checkCritical","crit","finalDamage","targetEndurance","applyDefenseReduction","baseEndurance","modifier","effect","statusEffects","ATK_DOWN","applyBuffModifiers","applySkillBuffs","buff","existingBuffIndex","findIndex","currentStacks","filter","length","newEffect","Date","now","getBuffName","isDebuff","updateStatusEffects","character","DOT_LUST","lustChange","currentPleasure","regenValue","maxEndurance","currentEndurance","FEAR","ENDURANCE_UP","includes","DamageSource","SkillType","BuffType","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","d","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Vue","createLog","msg","toString","substr","turn","message","PLAYER_SKILLS","cost","currentCooldown","user","dmg","_target","ENEMY_SKILLS","PLAYER_ITEMS","quantity","CLIMAX_TEXTS","createSkills","skillIds","map","skillId","skillData","data","console","warn","createSkillFromId","ENEMY_DATABASE","avatarUrl","maxPleasure","maxClimaxCount","_hoisted_1","class","__name","setup","__props","dustParticles","ref","petals","onMounted","Array","from","_","i","left","delay","scale","_ctx","_cache","particle","style","animationDelay","animationDuration","petal","transform","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","color","label","default","showValue","Boolean","size","percentage","computed","innerHTML","width","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","compact","xmlns","height","viewBox","fill","stroke","points","isEnemy","turnState","enemyIntention","phase","src","alt","climaxTarget","StatsPanel","ProgressBar","climaxCount","isExpanded","bottomRef","watch","nextTick","scrollIntoView","behavior","onClick","$event","log","ref_key","hover","emits","$emit","$slots","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","player","isPlayer","items","skills","s","baseWillpower","enemy","reactive","currentTurn","activeMenu","async","loadFromMvu","waitGlobalInitialized","mvuData","Mvu","getMvuData","message_id","stat_data","availableSkills","keys","info","enemyName","loadedEnemy","enemyData","getEnemyByName","existingEndurance","existingPleasure","existingClimaxCount","enemySkillCooldowns","forEach","set","replaceMvuData","e","saveMvuEnemyData","loadEnemyFromMvuData","saveToMvu","playerSkillCooldowns","updates","path","entries","addLog","cloneCharacter","char","isSkillDisabled","determineEnemyIntention","handleEnemyTurn","setTimeout","nextPlayer","nextEnemy","then","startNewTurn","playerLogs","enemyLogs","handleClimaxResolution","action","targetIsEnemy","newChar","handleSurrender","handleRestart","window","location","reload","BackgroundAmbience","playerInput","processing","enemyAction","victory","defeat","climaxResolution","CharacterPanel","to","x1","y1","x2","y2","CombatLog","active","mode","Card","skillIndex","disabled","cx","cy","r","item","itemIndex","$","createApp","mount","on"],"ignoreList":[],"sourceRoot":""}