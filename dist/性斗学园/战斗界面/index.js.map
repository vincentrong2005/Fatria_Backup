{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/性斗学园/战斗界面/constants.ts","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/BackgroundAmbience.vue?1a5e","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/BackgroundAmbience.vue?2a16","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/ProgressBar.vue?1bb9","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/ProgressBar.vue?ca52","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/StatsPanel.vue?4694","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/StatsPanel.vue?8625","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/CharacterPanel.vue?e72e","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/CharacterPanel.vue?3e40","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/CombatLog.vue?71f0","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/CombatLog.vue?df08","webpack://tavern_helper_template/./src/性斗学园/战斗界面/components/Card.vue?a483","webpack://tavern_helper_template/src/性斗学园/战斗界面/components/Card.vue?913d","webpack://tavern_helper_template/./src/性斗学园/战斗界面/app.vue?e953","webpack://tavern_helper_template/src/性斗学园/战斗界面/app.vue?7dbb","src://tavern_helper_template/src/性斗学园/战斗界面/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import type { Character, Skill, Item, CombatLogEntry } from './types';\r\n\r\n// 创建日志辅助函数\r\nconst createLog = (msg: string, source: string, type: CombatLogEntry['type'] = 'info'): CombatLogEntry => ({\r\n  id: Math.random().toString(36).substr(2, 9),\r\n  turn: 0,\r\n  message: msg,\r\n  source,\r\n  type\r\n});\r\n\r\n// --- 玩家技能 ---\r\nexport const PLAYER_SKILLS: Skill[] = [\r\n  {\r\n    id: 's1',\r\n    name: '挑逗言语',\r\n    description: '轻声细语，攻击敌方精神，造成少量快感伤害。',\r\n    cost: 5,\r\n    type: 'attack',\r\n    cooldown: 0,\r\n    currentCooldown: 0,\r\n    effect: (user, target) => {\r\n      const dmg = Math.floor(user.stats.charm * 1.5 + user.stats.sexPower * 0.5);\r\n      target.stats.currentPleasure += dmg;\r\n      return createLog(`${user.name} 使用 [挑逗言语]，消耗体力，造成了 ${dmg} 点快感！`, 'player', 'damage');\r\n    }\r\n  },\r\n  {\r\n    id: 's2',\r\n    name: '绝对领域',\r\n    description: '调整姿态，大幅提升本回合闪避率。',\r\n    cost: 15,\r\n    type: 'buff',\r\n    cooldown: 3,\r\n    currentCooldown: 0,\r\n    effect: (user, _target) => {\r\n      return createLog(`${user.name} 展开 [绝对领域]，消耗体力提升闪避！`, 'player', 'info');\r\n    }\r\n  },\r\n  {\r\n    id: 's3',\r\n    name: '必杀·纯爱战神',\r\n    description: '消耗大量体力，造成基于性斗力的巨额伤害。',\r\n    cost: 40,\r\n    type: 'ultimate',\r\n    cooldown: 5,\r\n    currentCooldown: 0,\r\n    effect: (user, target) => {\r\n      const dmg = Math.floor(user.stats.sexPower * 3.5);\r\n      target.stats.currentPleasure += dmg;\r\n      return createLog(`${user.name} 发动 [必杀·纯爱战神]，造成 ${dmg} 点暴击快感！`, 'player', 'critical');\r\n    }\r\n  }\r\n];\r\n\r\n// --- 敌人技能 ---\r\nexport const ENEMY_SKILLS: Skill[] = [\r\n  {\r\n    id: 'e1',\r\n    name: '强硬手段',\r\n    description: '无视防御的粗暴攻击，削减耐力。',\r\n    cost: 0,\r\n    type: 'attack',\r\n    cooldown: 0,\r\n    currentCooldown: 0,\r\n    effect: (user, target) => {\r\n      const dmg = 15;\r\n      target.stats.currentEndurance -= dmg;\r\n      return createLog(`${user.name} 使用 [强硬手段]，你的耐力减少了 ${dmg}！`, 'enemy', 'damage');\r\n    }\r\n  },\r\n  {\r\n    id: 'e2',\r\n    name: '深渊凝视',\r\n    description: '降低对手的耐力。',\r\n    cost: 0,\r\n    type: 'debuff',\r\n    cooldown: 2,\r\n    currentCooldown: 0,\r\n    effect: (user, target) => {\r\n      const dmg = 10;\r\n      target.stats.currentEndurance -= dmg;\r\n      return createLog(`${user.name} 施展 [深渊凝视]，你的耐力被削弱了 ${dmg} 点。`, 'enemy', 'damage');\r\n    }\r\n  },\r\n  {\r\n    id: 'e3',\r\n    name: '触手纠缠',\r\n    description: '造成持续快感。',\r\n    cost: 0,\r\n    type: 'attack',\r\n    cooldown: 3,\r\n    currentCooldown: 0,\r\n    effect: (user, target) => {\r\n      const dmg = 25;\r\n      target.stats.currentPleasure += dmg;\r\n      return createLog(`${user.name} 使用 [触手纠缠]，快感上升了 ${dmg} 点！`, 'enemy', 'damage');\r\n    }\r\n  }\r\n];\r\n\r\n// --- 玩家物品 ---\r\nexport const PLAYER_ITEMS: Item[] = [\r\n  {\r\n    id: 'i1',\r\n    name: '强走饮料',\r\n    description: '恢复 30 点耐力。',\r\n    quantity: 3,\r\n    effect: (user, _target) => {\r\n      user.stats.currentEndurance = Math.min(user.stats.maxEndurance, user.stats.currentEndurance + 30);\r\n      return createLog(`${user.name} 喝下 [强走饮料]，耐力恢复了。`, 'player', 'heal');\r\n    }\r\n  },\r\n  {\r\n    id: 'i2',\r\n    name: '抑制剂',\r\n    description: '减少 20 点当前快感。',\r\n    quantity: 2,\r\n    effect: (user, _target) => {\r\n      user.stats.currentPleasure = Math.max(0, user.stats.currentPleasure - 20);\r\n      return createLog(`${user.name} 注射了 [抑制剂]，身体稍微冷却下来。`, 'player', 'heal');\r\n    }\r\n  }\r\n];\r\n\r\n// --- 创建默认角色数据 ---\r\nexport function createDefaultPlayer(): Character {\r\n  return {\r\n    id: 'player',\r\n    name: '学园偶像',\r\n    avatarUrl: 'https://picsum.photos/400/600?random=1',\r\n    isPlayer: true,\r\n    statusEffects: [],\r\n    items: PLAYER_ITEMS.map(i => ({ ...i })),\r\n    skills: PLAYER_SKILLS.map(s => ({ ...s })),\r\n    stats: {\r\n      maxEndurance: 100,\r\n      currentEndurance: 100,\r\n      maxPleasure: 100,\r\n      currentPleasure: 0,\r\n      willpower: 100,\r\n      baseWillpower: 100,\r\n      climaxCount: 0,\r\n      maxClimaxCount: 3,\r\n      sexPower: 25,\r\n      baseEndurance: 15,\r\n      evasion: 10,\r\n      crit: 5,\r\n      charm: 30,\r\n      luck: 15,\r\n    }\r\n  };\r\n}\r\n\r\nexport function createDefaultEnemy(): Character {\r\n  return {\r\n    id: 'enemy',\r\n    name: '风纪委员长',\r\n    avatarUrl: 'https://picsum.photos/400/600?random=2',\r\n    isPlayer: false,\r\n    statusEffects: [],\r\n    items: [],\r\n    skills: ENEMY_SKILLS.map(s => ({ ...s })),\r\n    stats: {\r\n      maxEndurance: 150,\r\n      currentEndurance: 150,\r\n      maxPleasure: 100,\r\n      currentPleasure: 0,\r\n      willpower: 80,\r\n      baseWillpower: 80,\r\n      climaxCount: 0,\r\n      maxClimaxCount: 3,\r\n      sexPower: 20,\r\n      baseEndurance: 20,\r\n      evasion: 5,\r\n      crit: 10,\r\n      charm: 10,\r\n      luck: 5,\r\n    }\r\n  };\r\n}\r\n\r\n// --- 高潮文本 ---\r\nexport const CLIMAX_TEXTS = [\r\n  (name: string) => `${name} 身体弓起，眼神失焦，无法抑制地颤抖着...`,\r\n  (name: string) => `剧烈的快感如潮水般淹没了 ${name} 的理智...`,\r\n  (name: string) => `${name} 发出了甜美的悲鸣，身体彻底瘫软下来...`\r\n];\r\n\r\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"bg-ambience\" };\nimport { ref, onMounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'BackgroundAmbience',\n    setup(__props) {\n        const dustParticles = ref([]);\n        const petals = ref([]);\n        onMounted(() => {\n            // 生成漂浮尘埃\n            dustParticles.value = Array.from({ length: 20 }).map((_, i) => ({\n                id: i,\n                left: Math.random() * 100,\n                delay: Math.random() * -20,\n                duration: 15 + Math.random() * 20,\n            }));\n            // 生成花瓣\n            petals.value = Array.from({ length: 8 }).map((_, i) => ({\n                id: i + 100,\n                left: Math.random() * 100,\n                delay: Math.random() * -20,\n                duration: 10 + Math.random() * 15,\n                scale: 0.5 + Math.random() * 0.5,\n            }));\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 基础渐变 \"),\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"bg-gradient\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 纹理叠加 \"),\n                _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"bg-texture\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 光晕效果 \"),\n                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"glow glow-top\" }, null, -1 /* CACHED */)),\n                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"glow glow-bottom\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 漂浮尘埃 \"),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(dustParticles.value, (particle) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: particle.id,\n                        class: \"dust-particle\",\n                        style: _normalizeStyle({\n                            left: `${particle.left}%`,\n                            animationDelay: `${particle.delay}s`,\n                            animationDuration: `${particle.duration}s`\n                        })\n                    }, null, 4 /* STYLE */));\n                }), 128 /* KEYED_FRAGMENT */)),\n                _createCommentVNode(\" 飘落花瓣 \"),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(petals.value, (petal) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: petal.id,\n                        class: \"petal\",\n                        style: _normalizeStyle({\n                            left: `${petal.left}%`,\n                            transform: `scale(${petal.scale})`,\n                            animationDelay: `${petal.delay}s`,\n                            animationDuration: `${petal.duration}s`\n                        })\n                    }, null, 4 /* STYLE */));\n                }), 128 /* KEYED_FRAGMENT */)),\n                _createCommentVNode(\" 闪烁阴影 \"),\n                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"flicker-overlay\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" 暗角 \"),\n                _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"vignette\" }, null, -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./BackgroundAmbience.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BackgroundAmbience.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./BackgroundAmbience.vue?vue&type=style&index=0&id=53d6146c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53d6146c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"progress-container\" };\nconst _hoisted_2 = { class: \"progress-header\" };\nconst _hoisted_3 = { class: \"progress-label\" };\nconst _hoisted_4 = [\"innerHTML\"];\nconst _hoisted_5 = {\n    key: 0,\n    class: \"progress-value\"\n};\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ProgressBar',\n    props: {\n        value: {},\n        max: {},\n        color: {},\n        label: { default: '' },\n        showValue: { type: Boolean, default: true },\n        size: { default: 'md' },\n        icon: { default: '' }\n    },\n    setup(__props) {\n        const props = __props;\n        const percentage = computed(() => {\n            return Math.min(Math.max((props.value / props.max) * 100, 0), 100);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"span\", _hoisted_3, [\n                        (__props.icon)\n                            ? (_openBlock(), _createElementBlock(\"span\", {\n                                key: 0,\n                                class: \"progress-icon\",\n                                innerHTML: __props.icon\n                            }, null, 8 /* PROPS */, _hoisted_4))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createTextVNode(\" \" + _toDisplayString(__props.label), 1 /* TEXT */)\n                    ]),\n                    (__props.showValue)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(__props.value) + \" / \" + _toDisplayString(__props.max), 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"progress-track\", `track-${__props.color}`])\n                }, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"progress-fill\", `fill-${__props.color}`]),\n                        style: _normalizeStyle({ width: `${percentage.value}%` })\n                    }, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"div\", { class: \"shimmer\" }, null, -1 /* CACHED */)\n                        ]))], 6 /* CLASS, STYLE */)\n                ], 2 /* CLASS */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ProgressBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProgressBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ProgressBar.vue?vue&type=style&index=0&id=4b793ca7&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4b793ca7\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"stat-item\" };\nconst _hoisted_2 = { class: \"stat-value\" };\nconst _hoisted_3 = { class: \"stat-item\" };\nconst _hoisted_4 = { class: \"stat-value\" };\nconst _hoisted_5 = { class: \"stat-item\" };\nconst _hoisted_6 = { class: \"stat-value\" };\nconst _hoisted_7 = { class: \"stat-item\" };\nconst _hoisted_8 = { class: \"stat-value\" };\nconst _hoisted_9 = { class: \"stat-item\" };\nconst _hoisted_10 = { class: \"stat-value\" };\nconst _hoisted_11 = { class: \"stat-item\" };\nconst _hoisted_12 = { class: \"stat-value\" };\nconst _hoisted_13 = { class: \"stat-item stat-full\" };\nconst _hoisted_14 = { class: \"stat-value\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StatsPanel',\n    props: {\n        stats: {},\n        compact: { type: Boolean, default: false }\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"stats-panel\", { 'stats-compact': __props.compact }])\n            }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"stat-info text-pink-400\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"14\",\n                            height: \"14\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\" })\n                        ]),\n                        _createElementVNode(\"span\", { class: \"stat-label\" }, \"性斗力\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(__props.stats.sexPower), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"stat-info text-green-400\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"14\",\n                            height: \"14\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\" })\n                        ]),\n                        _createElementVNode(\"span\", { class: \"stat-label\" }, \"忍耐力\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_4, _toDisplayString(__props.stats.baseEndurance), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _cache[2] || (_cache[2] = _createStaticVNode(\"<div class=\\\"stat-info text-cyan-400\\\" data-v-53582338><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" data-v-53582338><path d=\\\"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2\\\" data-v-53582338></path><path d=\\\"M9.6 4.6A2 2 0 1 1 11 8H2\\\" data-v-53582338></path><path d=\\\"M12.6 19.4A2 2 0 1 0 14 16H2\\\" data-v-53582338></path></svg><span class=\\\"stat-label\\\" data-v-53582338>闪避率</span></div>\", 1)),\n                    _createElementVNode(\"span\", _hoisted_6, _toDisplayString(__props.stats.evasion) + \"%\", 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    _cache[3] || (_cache[3] = _createStaticVNode(\"<div class=\\\"stat-info text-orange-400\\\" data-v-53582338><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" data-v-53582338><circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"10\\\" data-v-53582338></circle><line x1=\\\"22\\\" y1=\\\"12\\\" x2=\\\"18\\\" y2=\\\"12\\\" data-v-53582338></line><line x1=\\\"6\\\" y1=\\\"12\\\" x2=\\\"2\\\" y2=\\\"12\\\" data-v-53582338></line><line x1=\\\"12\\\" y1=\\\"6\\\" x2=\\\"12\\\" y2=\\\"2\\\" data-v-53582338></line><line x1=\\\"12\\\" y1=\\\"22\\\" x2=\\\"12\\\" y2=\\\"18\\\" data-v-53582338></line></svg><span class=\\\"stat-label\\\" data-v-53582338>暴击率</span></div>\", 1)),\n                    _createElementVNode(\"span\", _hoisted_8, _toDisplayString(__props.stats.crit) + \"%\", 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_9, [\n                    _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"stat-info text-rose-400\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"14\",\n                            height: \"14\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\" })\n                        ]),\n                        _createElementVNode(\"span\", { class: \"stat-label\" }, \"魅力\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(__props.stats.charm), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_11, [\n                    _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"stat-info text-yellow-400\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"14\",\n                            height: \"14\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\" })\n                        ]),\n                        _createElementVNode(\"span\", { class: \"stat-label\" }, \"幸运\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_12, _toDisplayString(__props.stats.luck), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_13, [\n                    _cache[6] || (_cache[6] = _createStaticVNode(\"<div class=\\\"stat-info text-purple-400\\\" data-v-53582338><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"14\\\" height=\\\"14\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" data-v-53582338><path d=\\\"M12 2a8 8 0 1 0 8 8H4a8 8 0 1 0 8-8z\\\" data-v-53582338></path><path d=\\\"M12 2v8\\\" data-v-53582338></path><path d=\\\"m4.93 10.93 1.41 1.41\\\" data-v-53582338></path><path d=\\\"m2 18 2 2\\\" data-v-53582338></path><path d=\\\"m22 18-2 2\\\" data-v-53582338></path><path d=\\\"m17.66 12.34 1.41-1.41\\\" data-v-53582338></path></svg><span class=\\\"stat-label\\\" data-v-53582338>意志力</span></div>\", 1)),\n                    _createElementVNode(\"span\", _hoisted_14, _toDisplayString(__props.stats.willpower), 1 /* TEXT */)\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StatsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatsPanel.vue?vue&type=style&index=0&id=53582338&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53582338\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"character-panel\" };\nconst _hoisted_2 = { class: \"name-text\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"intention-hint\"\n};\nconst _hoisted_4 = { class: \"avatar-container\" };\nconst _hoisted_5 = [\"src\", \"alt\"];\nconst _hoisted_6 = {\n    key: 0,\n    class: \"mobile-warning\"\n};\nconst _hoisted_7 = { class: \"stats-overlay\" };\nconst _hoisted_8 = { class: \"bars-container\" };\nconst _hoisted_9 = { class: \"climax-bar\" };\nimport ProgressBar from './ProgressBar.vue';\nimport StatsPanel from './StatsPanel.vue';\nconst activityIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"/></svg>`;\nconst heartIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\"/><path d=\"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27\"/></svg>`;\nconst zapIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"/></svg>`;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CharacterPanel',\n    props: {\n        character: {},\n        isEnemy: { type: Boolean },\n        turnState: {},\n        enemyIntention: {}\n    },\n    setup(__props) {\n        // 图标SVG\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 名称标签 \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"name-badge\", __props.isEnemy ? 'badge-enemy' : 'badge-player'])\n                }, [\n                    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(__props.character.name), 1 /* TEXT */),\n                    _createCommentVNode(\" 敌人预告提示 \"),\n                    (__props.isEnemy && __props.turnState.phase === 'playerInput' && __props.enemyIntention)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"intention-icon\" }, \"⚠️\", -1 /* CACHED */)),\n                            _createTextVNode(\" 预告: \" + _toDisplayString(__props.enemyIntention.name), 1 /* TEXT */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 2 /* CLASS */),\n                _createCommentVNode(\" 头像与悬停属性 \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"avatar-glow\", __props.isEnemy ? 'glow-enemy' : 'glow-player'])\n                    }, null, 2 /* CLASS */),\n                    _createElementVNode(\"img\", {\n                        src: __props.character.avatarUrl,\n                        alt: __props.character.name,\n                        class: _normalizeClass([\"avatar-image\", {\n                                'avatar-enemy': __props.isEnemy,\n                                'avatar-player': !__props.isEnemy,\n                                'avatar-pulse': __props.turnState.phase === 'processing' && !__props.isEnemy,\n                                'avatar-scale': __props.turnState.phase === 'enemyAction' && __props.isEnemy,\n                                'avatar-climax': __props.turnState.phase === 'climaxResolution' && __props.turnState.climaxTarget === (__props.isEnemy ? 'enemy' : 'player')\n                            }])\n                    }, null, 10 /* CLASS, PROPS */, _hoisted_5),\n                    _createCommentVNode(\" 移动端预告图标 \"),\n                    (__props.isEnemy && __props.turnState.phase === 'playerInput' && __props.enemyIntention)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"span\", null, \"!\", -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" 属性悬停面板 \"),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"overlay-title\" }, \"详细属性\", -1 /* CACHED */)),\n                        _createVNode(StatsPanel, {\n                            stats: __props.character.stats,\n                            compact: \"\"\n                        }, null, 8 /* PROPS */, [\"stats\"])\n                    ])\n                ]),\n                _createCommentVNode(\" 状态条 \"),\n                _createElementVNode(\"div\", _hoisted_8, [\n                    _createVNode(ProgressBar, {\n                        value: __props.character.stats.currentEndurance,\n                        max: __props.character.stats.maxEndurance,\n                        color: \"green\",\n                        label: \"体力\",\n                        \"show-value\": true,\n                        icon: activityIcon\n                    }, null, 8 /* PROPS */, [\"value\", \"max\"]),\n                    _createVNode(ProgressBar, {\n                        value: __props.character.stats.currentPleasure,\n                        max: __props.character.stats.maxPleasure,\n                        color: \"pink\",\n                        label: \"快感\",\n                        \"show-value\": true,\n                        icon: heartIcon\n                    }, null, 8 /* PROPS */, [\"value\", \"max\"]),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                        _createVNode(ProgressBar, {\n                            value: __props.character.stats.climaxCount,\n                            max: __props.character.stats.maxClimaxCount,\n                            color: \"purple\",\n                            label: \"高潮\",\n                            \"show-value\": true,\n                            icon: zapIcon\n                        }, null, 8 /* PROPS */, [\"value\", \"max\"])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CharacterPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CharacterPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CharacterPanel.vue?vue&type=style&index=0&id=499692c8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-499692c8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"log-toggle\" };\nconst _hoisted_2 = {\n    key: 0,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2\"\n};\nconst _hoisted_3 = {\n    key: 1,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2\"\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"log-preview\"\n};\nconst _hoisted_5 = { class: \"log-turn\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"log-empty\"\n};\nconst _hoisted_7 = { class: \"log-turn\" };\nimport { ref, watch, nextTick } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CombatLog',\n    props: {\n        logs: {}\n    },\n    setup(__props) {\n        const props = __props;\n        const isExpanded = ref(true);\n        const bottomRef = ref(null);\n        // 自动滚动到底部\n        watch(() => props.logs.length, () => {\n            if (isExpanded.value) {\n                nextTick(() => {\n                    bottomRef.value?.scrollIntoView({ behavior: 'smooth' });\n                });\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"combat-log\", { 'log-expanded': isExpanded.value }])\n            }, [\n                _createCommentVNode(\" 头部切换栏 \"),\n                _createElementVNode(\"div\", {\n                    class: \"log-header\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (isExpanded.value = !isExpanded.value))\n                }, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"log-title\" }, [\n                        _createElementVNode(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            width: \"12\",\n                            height: \"12\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            \"stroke-width\": \"2\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" })\n                        ]),\n                        _createElementVNode(\"span\", null, \"战斗日志\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        (isExpanded.value)\n                            ? (_openBlock(), _createElementBlock(\"svg\", _hoisted_2, [...(_cache[1] || (_cache[1] = [\n                                    _createElementVNode(\"path\", { d: \"m6 9 6 6 6-6\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : (_openBlock(), _createElementBlock(\"svg\", _hoisted_3, [...(_cache[2] || (_cache[2] = [\n                                    _createElementVNode(\"path\", { d: \"m18 15-6-6-6 6\" }, null, -1 /* CACHED */)\n                                ]))]))\n                    ])\n                ]),\n                _createCommentVNode(\" 折叠时显示最新日志 \"),\n                (!isExpanded.value && __props.logs.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                        _createElementVNode(\"span\", _hoisted_5, \"[\" + _toDisplayString(__props.logs[__props.logs.length - 1].turn) + \"]\", 1 /* TEXT */),\n                        _createTextVNode(\" \" + _toDisplayString(__props.logs[__props.logs.length - 1].message), 1 /* TEXT */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" 展开的日志列表 \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"log-content\", { 'log-hidden': !isExpanded.value }])\n                }, [\n                    (__props.logs.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, \"战斗即将开始...\"))\n                        : _createCommentVNode(\"v-if\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.logs, (log) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: log.id,\n                            class: _normalizeClass([\"log-entry\", {\n                                    'log-critical': log.type === 'critical',\n                                    'log-damage': log.type === 'damage',\n                                    'log-heal': log.type === 'heal',\n                                    'log-info': log.type === 'info'\n                                }])\n                        }, [\n                            _createElementVNode(\"span\", _hoisted_7, \"[\" + _toDisplayString(log.turn) + \"]\", 1 /* TEXT */),\n                            _createTextVNode(\" \" + _toDisplayString(log.message), 1 /* TEXT */)\n                        ], 2 /* CLASS */));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createElementVNode(\"div\", {\n                        ref_key: \"bottomRef\",\n                        ref: bottomRef\n                    }, null, 512 /* NEED_PATCH */)\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CombatLog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CombatLog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CombatLog.vue?vue&type=style&index=0&id=528f8d62&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-528f8d62\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { renderSlot as _renderSlot, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Card',\n    props: {\n        hover: { type: Boolean, default: false }\n    },\n    emits: [\"click\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"card\", { 'card-hover': __props.hover }]),\n                onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('click')))\n            }, [\n                _renderSlot(_ctx.$slots, \"default\")\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Card.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Card.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Card.vue?vue&type=style&index=0&id=8e4963ea&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8e4963ea\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Teleport as _Teleport, createBlock as _createBlock, normalizeClass as _normalizeClass, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, Transition as _Transition, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"combat-wrapper\" };\nconst _hoisted_2 = { class: \"combat-header\" };\nconst _hoisted_3 = { class: \"header-right\" };\nconst _hoisted_4 = { class: \"turn-counter\" };\nconst _hoisted_5 = { class: \"phase-indicator\" };\nconst _hoisted_6 = { class: \"combat-arena\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"modal-overlay\"\n};\nconst _hoisted_8 = { class: \"climax-modal\" };\nconst _hoisted_9 = { class: \"climax-desc\" };\nconst _hoisted_10 = { class: \"climax-actions\" };\nconst _hoisted_11 = { class: \"combat-footer\" };\nconst _hoisted_12 = { class: \"footer-content\" };\nconst _hoisted_13 = { class: \"log-section\" };\nconst _hoisted_14 = { class: \"action-section\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"action-header\"\n};\nconst _hoisted_16 = {\n    key: 1,\n    class: \"action-header\"\n};\nconst _hoisted_17 = { class: \"waiting-text\" };\nconst _hoisted_18 = { class: \"action-grid\" };\nconst _hoisted_19 = {\n    key: 0,\n    class: \"processing-overlay\"\n};\nconst _hoisted_20 = {\n    key: \"main\",\n    class: \"menu-main\"\n};\nconst _hoisted_21 = {\n    key: \"skills\",\n    class: \"menu-skills\"\n};\nconst _hoisted_22 = {\n    key: 0,\n    class: \"cooldown-overlay\"\n};\nconst _hoisted_23 = { class: \"cooldown-count\" };\nconst _hoisted_24 = { class: \"skill-header\" };\nconst _hoisted_25 = { class: \"skill-desc\" };\nconst _hoisted_26 = {\n    key: \"items\",\n    class: \"menu-items\"\n};\nconst _hoisted_27 = { class: \"item-header\" };\nconst _hoisted_28 = { class: \"item-name\" };\nconst _hoisted_29 = { class: \"item-quantity\" };\nconst _hoisted_30 = { class: \"item-desc\" };\nconst _hoisted_31 = {\n    key: 0,\n    class: \"result-overlay\"\n};\nconst _hoisted_32 = { class: \"result-content\" };\nimport { ref, reactive, watch, onMounted } from 'vue';\nimport { createDefaultPlayer, createDefaultEnemy, CLIMAX_TEXTS } from './constants';\nimport BackgroundAmbience from './components/BackgroundAmbience.vue';\nimport CharacterPanel from './components/CharacterPanel.vue';\nimport CombatLog from './components/CombatLog.vue';\nimport Card from './components/Card.vue';\n// ================= 状态 =================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'app',\n    setup(__props) {\n        const player = ref(createDefaultPlayer());\n        const enemy = ref(createDefaultEnemy());\n        const turnState = reactive({\n            currentTurn: 1,\n            phase: 'playerInput',\n            enemyIntention: null,\n            climaxTarget: null\n        });\n        const logs = ref([]);\n        const activeMenu = ref('main');\n        // ================= MVU 集成 =================\n        async function loadFromMvu() {\n            try {\n                await waitGlobalInitialized('Mvu');\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n                if (!mvuData?.stat_data)\n                    return;\n                const data = mvuData.stat_data;\n                // 同步玩家数据\n                player.value.stats.maxEndurance = _.get(data, '核心状态._最大耐力', 100);\n                player.value.stats.currentEndurance = _.get(data, '核心状态._耐力', 100);\n                player.value.stats.maxPleasure = _.get(data, '核心状态._最大快感', 100);\n                player.value.stats.currentPleasure = _.get(data, '核心状态._快感', 0);\n                player.value.stats.willpower = _.get(data, '核心状态._意志力', 100);\n                player.value.stats.charm = _.get(data, '核心状态._魅力', 10);\n                player.value.stats.luck = _.get(data, '核心状态._幸运', 10);\n                player.value.stats.evasion = _.get(data, '核心状态.$闪避率', 0);\n                player.value.stats.crit = _.get(data, '核心状态.$暴击率', 0);\n                player.value.stats.sexPower = _.get(data, '性斗系统.$实时性斗力', 25);\n                player.value.stats.baseEndurance = _.get(data, '性斗系统.$实时忍耐力', 15);\n                player.value.stats.climaxCount = _.get(data, '性斗系统.$高潮次数', 0);\n                player.value.stats.maxClimaxCount = _.get(data, '性斗系统.胜负规则.高潮次数上限', 3);\n                // 同步敌人数据\n                const enemyName = _.get(data, '性斗系统.对手名称', '');\n                if (enemyName)\n                    enemy.value.name = enemyName;\n                enemy.value.stats.maxEndurance = _.get(data, '性斗系统.$对手最大耐力', 150);\n                enemy.value.stats.currentEndurance = _.get(data, '性斗系统.$对手耐力', 150);\n                enemy.value.stats.maxPleasure = _.get(data, '性斗系统.$对手最大快感', 100);\n                enemy.value.stats.currentPleasure = _.get(data, '性斗系统.$对手快感', 0);\n                enemy.value.stats.climaxCount = _.get(data, '性斗系统.$对手高潮次数', 0);\n                enemy.value.stats.sexPower = _.get(data, '性斗系统.$对手性斗力', 20);\n                enemy.value.stats.baseEndurance = _.get(data, '性斗系统.$对手忍耐力', 20);\n                enemy.value.stats.charm = _.get(data, '性斗系统.$对手魅力', 10);\n                enemy.value.stats.luck = _.get(data, '性斗系统.$对手幸运', 5);\n                enemy.value.stats.evasion = _.get(data, '性斗系统.$对手闪避率', 5);\n                enemy.value.stats.crit = _.get(data, '性斗系统.$对手暴击率', 10);\n                // 同步回合数\n                turnState.currentTurn = _.get(data, '性斗系统.$当前回合', 1);\n                console.info('[战斗界面] 已从MVU加载数据');\n            }\n            catch (e) {\n                console.warn('[战斗界面] MVU加载失败，使用默认数据', e);\n            }\n        }\n        async function saveToMvu() {\n            try {\n                if (typeof Mvu === 'undefined')\n                    return;\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n                if (!mvuData)\n                    return;\n                const updates = {\n                    '核心状态._耐力': player.value.stats.currentEndurance,\n                    '核心状态._快感': player.value.stats.currentPleasure,\n                    '性斗系统.$当前回合': turnState.currentTurn,\n                    '性斗系统.$高潮次数': player.value.stats.climaxCount,\n                    '性斗系统.$对手耐力': enemy.value.stats.currentEndurance,\n                    '性斗系统.$对手快感': enemy.value.stats.currentPleasure,\n                    '性斗系统.$对手高潮次数': enemy.value.stats.climaxCount,\n                };\n                for (const [path, value] of Object.entries(updates)) {\n                    _.set(mvuData.stat_data, path, value);\n                }\n                await Mvu.replaceMvuData(mvuData, { type: 'message', message_id: 'latest' });\n            }\n            catch (e) {\n                console.warn('[战斗界面] MVU保存失败', e);\n            }\n        }\n        // ================= 辅助函数 =================\n        function addLog(message, source, type = 'info') {\n            logs.value.push({\n                id: Math.random().toString(36).substr(2, 9),\n                turn: turnState.currentTurn,\n                message,\n                source,\n                type\n            });\n        }\n        function cloneCharacter(char) {\n            return {\n                ...char,\n                stats: { ...char.stats },\n                skills: char.skills.map(s => ({ ...s })),\n                items: char.items.map(i => ({ ...i })),\n                statusEffects: [...char.statusEffects]\n            };\n        }\n        function getPhaseText(phase) {\n            const texts = {\n                playerInput: '玩家回合',\n                processing: '结算中',\n                enemyAction: '敌方行动',\n                victory: '胜利',\n                defeat: '败北',\n                climaxResolution: '高潮处理'\n            };\n            return texts[phase];\n        }\n        function isSkillDisabled(skill) {\n            return skill.currentCooldown > 0 || player.value.stats.currentEndurance < skill.cost;\n        }\n        // ================= 战斗逻辑 =================\n        function determineEnemyIntention() {\n            const skill = enemy.value.skills[Math.floor(Math.random() * enemy.value.skills.length)];\n            turnState.enemyIntention = skill;\n        }\n        function handlePlayerSkill(skill) {\n            if (turnState.phase !== 'playerInput')\n                return;\n            if (isSkillDisabled(skill)) {\n                addLog(skill.currentCooldown > 0 ? '技能冷却中！' : '耐力不足！', 'system', 'info');\n                return;\n            }\n            turnState.phase = 'processing';\n            const nextPlayer = cloneCharacter(player.value);\n            const nextEnemy = cloneCharacter(enemy.value);\n            nextPlayer.stats.currentEndurance -= skill.cost;\n            const skillIndex = nextPlayer.skills.findIndex(s => s.id === skill.id);\n            if (skillIndex !== -1) {\n                nextPlayer.skills[skillIndex].currentCooldown = skill.cooldown;\n            }\n            const log = skill.effect(nextPlayer, nextEnemy);\n            addLog(log.message, log.source, log.type);\n            player.value = nextPlayer;\n            enemy.value = nextEnemy;\n            if (nextEnemy.stats.currentPleasure < nextEnemy.stats.maxPleasure) {\n                setTimeout(handleEnemyTurn, 1000);\n            }\n        }\n        function handlePlayerItem(item) {\n            if (turnState.phase !== 'playerInput' || item.quantity <= 0)\n                return;\n            turnState.phase = 'processing';\n            const nextPlayer = cloneCharacter(player.value);\n            const nextEnemy = cloneCharacter(enemy.value);\n            const itemIndex = nextPlayer.items.findIndex(i => i.id === item.id);\n            if (itemIndex > -1) {\n                nextPlayer.items[itemIndex].quantity -= 1;\n            }\n            const log = item.effect(nextPlayer, nextEnemy);\n            addLog(log.message, log.source, log.type);\n            player.value = nextPlayer;\n            enemy.value = nextEnemy;\n            activeMenu.value = 'main';\n            if (nextEnemy.stats.currentPleasure < nextEnemy.stats.maxPleasure &&\n                nextPlayer.stats.currentPleasure < nextPlayer.stats.maxPleasure) {\n                setTimeout(handleEnemyTurn, 1000);\n            }\n        }\n        function handleEnemyTurn() {\n            turnState.phase = 'enemyAction';\n            setTimeout(() => {\n                if (!turnState.enemyIntention)\n                    return;\n                const nextPlayer = cloneCharacter(player.value);\n                const nextEnemy = cloneCharacter(enemy.value);\n                const skill = nextEnemy.skills.find(s => s.id === turnState.enemyIntention?.id) || nextEnemy.skills[0];\n                if (skill?.effect) {\n                    const log = skill.effect(nextEnemy, nextPlayer);\n                    addLog(log.message, log.source, log.type);\n                }\n                player.value = nextPlayer;\n                enemy.value = nextEnemy;\n                if (nextPlayer.stats.currentPleasure < nextPlayer.stats.maxPleasure) {\n                    setTimeout(startNewTurn, 1000);\n                }\n            }, 1000);\n        }\n        function startNewTurn() {\n            turnState.currentTurn++;\n            turnState.phase = 'playerInput';\n            determineEnemyIntention();\n            // 回合开始回复\n            player.value.stats.currentEndurance = Math.min(player.value.stats.maxEndurance, player.value.stats.currentEndurance + 5);\n            // 冷却递减\n            player.value.skills.forEach(s => {\n                if (s.currentCooldown > 0)\n                    s.currentCooldown--;\n            });\n            addLog(`--- 第 ${turnState.currentTurn} 回合 ---`, 'system', 'info');\n            saveToMvu();\n        }\n        function handleClimaxResolution(action) {\n            const targetIsEnemy = turnState.climaxTarget === 'enemy';\n            const char = targetIsEnemy ? enemy.value : player.value;\n            if (action === 'process') {\n                const text = CLIMAX_TEXTS[Math.floor(Math.random() * CLIMAX_TEXTS.length)](char.name);\n                addLog(`>>> [过程] ${text}`, 'system', 'critical');\n            }\n            else {\n                addLog(`${char.name} 达到了高潮！ (过程略)`, 'system', 'info');\n            }\n            const newChar = cloneCharacter(char);\n            newChar.stats.currentPleasure = 0;\n            newChar.stats.climaxCount += 1;\n            if (targetIsEnemy) {\n                enemy.value = newChar;\n            }\n            else {\n                player.value = newChar;\n            }\n            // 检查游戏结束\n            if (newChar.stats.climaxCount >= newChar.stats.maxClimaxCount) {\n                turnState.phase = targetIsEnemy ? 'victory' : 'defeat';\n                turnState.climaxTarget = null;\n                addLog(targetIsEnemy ? '对手彻底崩溃！战斗胜利！' : '你彻底崩溃... 败北。', 'system', 'critical');\n                saveToMvu();\n                return;\n            }\n            // 继续战斗\n            if (targetIsEnemy) {\n                setTimeout(handleEnemyTurn, 500);\n            }\n            else {\n                setTimeout(startNewTurn, 500);\n            }\n            turnState.climaxTarget = null;\n        }\n        function handleSurrender() {\n            addLog('不能逃跑！这是尊严之战！', 'system', 'info');\n        }\n        function handleRestart() {\n            window.location.reload();\n        }\n        // ================= 状态监听 =================\n        watch([\n            () => player.value.stats.currentPleasure,\n            () => player.value.stats.currentEndurance,\n            () => enemy.value.stats.currentPleasure,\n            () => enemy.value.stats.currentEndurance\n        ], () => {\n            if (turnState.phase === 'climaxResolution' || turnState.phase === 'victory' || turnState.phase === 'defeat')\n                return;\n            // 检查体力耗尽\n            if (enemy.value.stats.currentEndurance <= 0) {\n                turnState.phase = 'victory';\n                addLog('对手体力耗尽！战斗胜利！', 'system', 'critical');\n                saveToMvu();\n                return;\n            }\n            if (player.value.stats.currentEndurance <= 0) {\n                turnState.phase = 'defeat';\n                addLog('你体力耗尽... 败北。', 'system', 'damage');\n                saveToMvu();\n                return;\n            }\n            // 检查高潮\n            if (enemy.value.stats.currentPleasure >= enemy.value.stats.maxPleasure) {\n                turnState.phase = 'climaxResolution';\n                turnState.climaxTarget = 'enemy';\n                return;\n            }\n            if (player.value.stats.currentPleasure >= player.value.stats.maxPleasure) {\n                turnState.phase = 'climaxResolution';\n                turnState.climaxTarget = 'player';\n                return;\n            }\n        });\n        // ================= 初始化 =================\n        onMounted(async () => {\n            await loadFromMvu();\n            addLog(`遭遇了 ${enemy.value.name} !`, 'system');\n            determineEnemyIntention();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 背景效果 \"),\n                _createVNode(BackgroundAmbience),\n                _createCommentVNode(\" 顶部标题栏 \"),\n                _createElementVNode(\"header\", _hoisted_2, [\n                    _cache[7] || (_cache[7] = _createStaticVNode(\"<div class=\\\"header-left\\\" data-v-246b4dcf><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" class=\\\"terminal-icon\\\" data-v-246b4dcf><path d=\\\"m4 17 6-6-6-6\\\" data-v-246b4dcf></path><path d=\\\"M12 19h8\\\" data-v-246b4dcf></path></svg><div data-v-246b4dcf><h1 class=\\\"title\\\" data-v-246b4dcf>性斗学园</h1></div></div>\", 1)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, \"TURN \" + _toDisplayString(turnState.currentTurn), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_5, _toDisplayString(getPhaseText(turnState.phase)), 1 /* TEXT */)\n                    ])\n                ]),\n                _createCommentVNode(\" 主战斗区域 \"),\n                _createElementVNode(\"main\", _hoisted_6, [\n                    _createCommentVNode(\" 玩家角色 \"),\n                    _createVNode(CharacterPanel, {\n                        character: player.value,\n                        \"is-enemy\": false,\n                        \"turn-state\": turnState,\n                        \"enemy-intention\": turnState.enemyIntention\n                    }, null, 8 /* PROPS */, [\"character\", \"turn-state\", \"enemy-intention\"]),\n                    _createCommentVNode(\" VS 分隔线 \"),\n                    _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"vs-divider\" }, [\n                        _createElementVNode(\"div\", { class: \"divider-line\" }),\n                        _createElementVNode(\"span\", { class: \"vs-text\" }, \"VS\"),\n                        _createElementVNode(\"div\", { class: \"divider-line\" })\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\" 敌人角色 \"),\n                    _createVNode(CharacterPanel, {\n                        character: enemy.value,\n                        \"is-enemy\": true,\n                        \"turn-state\": turnState,\n                        \"enemy-intention\": turnState.enemyIntention\n                    }, null, 8 /* PROPS */, [\"character\", \"turn-state\", \"enemy-intention\"])\n                ]),\n                _createCommentVNode(\" 高潮处理弹窗 \"),\n                (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                    (turnState.phase === 'climaxResolution')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"modal-bg-pattern\" }, null, -1 /* CACHED */)),\n                                _cache[12] || (_cache[12] = _createElementVNode(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    width: \"64\",\n                                    height: \"64\",\n                                    viewBox: \"0 0 24 24\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    \"stroke-width\": \"2\",\n                                    class: \"climax-icon\"\n                                }, [\n                                    _createElementVNode(\"path\", { d: \"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\" }),\n                                    _createElementVNode(\"path\", { d: \"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27\" })\n                                ], -1 /* CACHED */)),\n                                _cache[13] || (_cache[13] = _createElementVNode(\"h2\", { class: \"climax-title\" }, \"高潮降临\", -1 /* CACHED */)),\n                                _createElementVNode(\"p\", _hoisted_9, _toDisplayString(turnState.climaxTarget === 'enemy' ? enemy.value.name : player.value.name) + \" 已经达到了极限... \", 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"btn btn-process\",\n                                        onClick: _cache[0] || (_cache[0] = ($event) => (handleClimaxResolution('process')))\n                                    }, [...(_cache[9] || (_cache[9] = [\n                                            _createElementVNode(\"svg\", {\n                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                width: \"20\",\n                                                height: \"20\",\n                                                viewBox: \"0 0 24 24\",\n                                                fill: \"none\",\n                                                stroke: \"currentColor\",\n                                                \"stroke-width\": \"2\"\n                                            }, [\n                                                _createElementVNode(\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" })\n                                            ], -1 /* CACHED */),\n                                            _createTextVNode(\" 输出过程 \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"btn btn-skip\",\n                                        onClick: _cache[1] || (_cache[1] = ($event) => (handleClimaxResolution('skip')))\n                                    }, [...(_cache[10] || (_cache[10] = [\n                                            _createElementVNode(\"svg\", {\n                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                width: \"20\",\n                                                height: \"20\",\n                                                viewBox: \"0 0 24 24\",\n                                                fill: \"none\",\n                                                stroke: \"currentColor\",\n                                                \"stroke-width\": \"2\"\n                                            }, [\n                                                _createElementVNode(\"polygon\", { points: \"5 4 15 12 5 20 5 4\" }),\n                                                _createElementVNode(\"line\", {\n                                                    x1: \"19\",\n                                                    y1: \"5\",\n                                                    x2: \"19\",\n                                                    y2: \"19\"\n                                                })\n                                            ], -1 /* CACHED */),\n                                            _createTextVNode(\" 跳过过程 \", -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])),\n                _createCommentVNode(\" 底部操作区域 \"),\n                _createElementVNode(\"footer\", _hoisted_11, [\n                    _createElementVNode(\"div\", _hoisted_12, [\n                        _createCommentVNode(\" 战斗日志 \"),\n                        _createElementVNode(\"div\", _hoisted_13, [\n                            _createVNode(CombatLog, { logs: logs.value }, null, 8 /* PROPS */, [\"logs\"])\n                        ]),\n                        _createCommentVNode(\" 操作菜单 \"),\n                        _createElementVNode(\"div\", _hoisted_14, [\n                            _createCommentVNode(\" 菜单标题 \"),\n                            (turnState.phase === 'playerInput')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                    _createElementVNode(\"button\", {\n                                        class: _normalizeClass([\"tab-btn\", { active: activeMenu.value === 'main' }]),\n                                        onClick: _cache[2] || (_cache[2] = ($event) => (activeMenu.value = 'main'))\n                                    }, \"行动\", 2 /* CLASS */),\n                                    _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"tab-divider\" }, null, -1 /* CACHED */)),\n                                    _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"action-hint\" }, \"请选择你的行动\", -1 /* CACHED */))\n                                ]))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                                    _createElementVNode(\"span\", _hoisted_17, _toDisplayString(turnState.phase === 'climaxResolution' ? '等待抉择...' : '等待行动结算...'), 1 /* TEXT */)\n                                ])),\n                            _createCommentVNode(\" 操作按钮区 \"),\n                            _createElementVNode(\"div\", _hoisted_18, [\n                                _createCommentVNode(\" 处理中遮罩 \"),\n                                (turnState.phase !== 'playerInput' && turnState.phase !== 'climaxResolution')\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [...(_cache[16] || (_cache[16] = [\n                                            _createElementVNode(\"span\", null, \"计算中...\", -1 /* CACHED */)\n                                        ]))]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createVNode(_Transition, {\n                                    name: \"slide\",\n                                    mode: \"out-in\"\n                                }, {\n                                    default: _withCtx(() => [\n                                        (activeMenu.value === 'main')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                                                _createVNode(Card, {\n                                                    hover: \"\",\n                                                    onClick: _cache[3] || (_cache[3] = ($event) => (activeMenu.value = 'skills')),\n                                                    class: \"menu-card\"\n                                                }, {\n                                                    default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                                                            _createElementVNode(\"svg\", {\n                                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                                width: \"32\",\n                                                                height: \"32\",\n                                                                viewBox: \"0 0 24 24\",\n                                                                fill: \"none\",\n                                                                stroke: \"currentColor\",\n                                                                \"stroke-width\": \"2\",\n                                                                class: \"icon-blue\"\n                                                            }, [\n                                                                _createElementVNode(\"path\", { d: \"M14.5 17.5 3 6V3h3l11.5 11.5\" }),\n                                                                _createElementVNode(\"path\", { d: \"M13 19l6-6\" }),\n                                                                _createElementVNode(\"path\", { d: \"m16 16 4 4\" }),\n                                                                _createElementVNode(\"path\", { d: \"m19 21 2-2\" })\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"span\", null, \"战斗技能\", -1 /* CACHED */)\n                                                        ]))]),\n                                                    _: 1 /* STABLE */\n                                                }),\n                                                _createVNode(Card, {\n                                                    hover: \"\",\n                                                    onClick: _cache[4] || (_cache[4] = ($event) => (activeMenu.value = 'items')),\n                                                    class: \"menu-card\"\n                                                }, {\n                                                    default: _withCtx(() => [...(_cache[18] || (_cache[18] = [\n                                                            _createElementVNode(\"svg\", {\n                                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                                width: \"32\",\n                                                                height: \"32\",\n                                                                viewBox: \"0 0 24 24\",\n                                                                fill: \"none\",\n                                                                stroke: \"currentColor\",\n                                                                \"stroke-width\": \"2\",\n                                                                class: \"icon-green\"\n                                                            }, [\n                                                                _createElementVNode(\"path\", { d: \"M4 20V10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2Z\" }),\n                                                                _createElementVNode(\"path\", { d: \"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2\" })\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"span\", null, \"物品背包\", -1 /* CACHED */)\n                                                        ]))]),\n                                                    _: 1 /* STABLE */\n                                                }),\n                                                _createVNode(Card, {\n                                                    hover: \"\",\n                                                    onClick: handleSurrender,\n                                                    class: \"menu-card\"\n                                                }, {\n                                                    default: _withCtx(() => [...(_cache[19] || (_cache[19] = [\n                                                            _createElementVNode(\"svg\", {\n                                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                                width: \"32\",\n                                                                height: \"32\",\n                                                                viewBox: \"0 0 24 24\",\n                                                                fill: \"none\",\n                                                                stroke: \"currentColor\",\n                                                                \"stroke-width\": \"2\",\n                                                                class: \"icon-red\"\n                                                            }, [\n                                                                _createElementVNode(\"path\", { d: \"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z\" }),\n                                                                _createElementVNode(\"line\", {\n                                                                    x1: \"4\",\n                                                                    y1: \"22\",\n                                                                    x2: \"4\",\n                                                                    y2: \"15\"\n                                                                })\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"span\", null, \"投降\", -1 /* CACHED */)\n                                                        ]))]),\n                                                    _: 1 /* STABLE */\n                                                })\n                                            ]))\n                                            : (activeMenu.value === 'skills')\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(player.value.skills, (skill) => {\n                                                        return (_openBlock(), _createBlock(Card, {\n                                                            key: skill.id,\n                                                            hover: !isSkillDisabled(skill),\n                                                            onClick: ($event) => (handlePlayerSkill(skill)),\n                                                            class: _normalizeClass([\"skill-card\", { disabled: isSkillDisabled(skill) }])\n                                                        }, {\n                                                            default: _withCtx(() => [\n                                                                (skill.currentCooldown > 0)\n                                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                                                                        _cache[21] || (_cache[21] = _createElementVNode(\"svg\", {\n                                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                                            width: \"20\",\n                                                                            height: \"20\",\n                                                                            viewBox: \"0 0 24 24\",\n                                                                            fill: \"none\",\n                                                                            stroke: \"currentColor\",\n                                                                            \"stroke-width\": \"2\"\n                                                                        }, [\n                                                                            _createElementVNode(\"circle\", {\n                                                                                cx: \"12\",\n                                                                                cy: \"12\",\n                                                                                r: \"10\"\n                                                                            }),\n                                                                            _createElementVNode(\"polyline\", { points: \"12 6 12 12 16 14\" })\n                                                                        ], -1 /* CACHED */)),\n                                                                        _createElementVNode(\"span\", _hoisted_23, [\n                                                                            _createTextVNode(_toDisplayString(skill.currentCooldown), 1 /* TEXT */),\n                                                                            _cache[20] || (_cache[20] = _createElementVNode(\"small\", null, \"T\", -1 /* CACHED */))\n                                                                        ])\n                                                                    ]))\n                                                                    : _createCommentVNode(\"v-if\", true),\n                                                                _createElementVNode(\"div\", _hoisted_24, [\n                                                                    _createElementVNode(\"span\", {\n                                                                        class: _normalizeClass([\"skill-name\", { 'skill-disabled': isSkillDisabled(skill) }])\n                                                                    }, _toDisplayString(skill.name), 3 /* TEXT, CLASS */),\n                                                                    _createElementVNode(\"span\", {\n                                                                        class: _normalizeClass([\"skill-cost\", { 'cost-danger': player.value.stats.currentEndurance < skill.cost }])\n                                                                    }, _toDisplayString(skill.cost) + \" SP\", 3 /* TEXT, CLASS */)\n                                                                ]),\n                                                                _createElementVNode(\"p\", _hoisted_25, _toDisplayString(skill.description), 1 /* TEXT */),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: _normalizeClass([\"skill-type\", { 'type-disabled': isSkillDisabled(skill) }])\n                                                                }, _toDisplayString(skill.type), 3 /* TEXT, CLASS */)\n                                                            ]),\n                                                            _: 2 /* DYNAMIC */\n                                                        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"hover\", \"onClick\", \"class\"]));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"back-btn\",\n                                                        onClick: _cache[5] || (_cache[5] = ($event) => (activeMenu.value = 'main'))\n                                                    }, \"返回\")\n                                                ]))\n                                                : (activeMenu.value === 'items')\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(player.value.items, (item) => {\n                                                            return (_openBlock(), _createBlock(Card, {\n                                                                key: item.id,\n                                                                hover: item.quantity > 0,\n                                                                onClick: ($event) => (handlePlayerItem(item)),\n                                                                class: _normalizeClass([\"item-card\", { disabled: item.quantity === 0 }])\n                                                            }, {\n                                                                default: _withCtx(() => [\n                                                                    _createElementVNode(\"div\", _hoisted_27, [\n                                                                        _createElementVNode(\"span\", _hoisted_28, _toDisplayString(item.name), 1 /* TEXT */),\n                                                                        _createElementVNode(\"span\", _hoisted_29, \"x\" + _toDisplayString(item.quantity), 1 /* TEXT */)\n                                                                    ]),\n                                                                    _createElementVNode(\"p\", _hoisted_30, _toDisplayString(item.description), 1 /* TEXT */)\n                                                                ]),\n                                                                _: 2 /* DYNAMIC */\n                                                            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"hover\", \"onClick\", \"class\"]));\n                                                        }), 128 /* KEYED_FRAGMENT */)),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"back-btn\",\n                                                            onClick: _cache[6] || (_cache[6] = ($event) => (activeMenu.value = 'main'))\n                                                        }, \"返回\")\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _: 1 /* STABLE */\n                                })\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" 胜负结算遮罩 \"),\n                    (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                        (turnState.phase === 'victory' || turnState.phase === 'defeat')\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _createElementVNode(\"h2\", {\n                                        class: _normalizeClass([\"result-title\", turnState.phase])\n                                    }, _toDisplayString(turnState.phase === 'victory' ? '完全胜利' : '彻底败北'), 3 /* TEXT, CLASS */),\n                                    _cache[22] || (_cache[22] = _createElementVNode(\"p\", { class: \"result-subtitle\" }, \"战斗结束\", -1 /* CACHED */)),\n                                    _createElementVNode(\"button\", {\n                                        class: \"restart-btn\",\n                                        onClick: handleRestart\n                                    }, \"重新开始\")\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./app.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./app.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./app.vue?vue&type=style&index=0&id=246b4dcf&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_53ff6257bd8fdf8315af10a81f7e3da1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-246b4dcf\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport './index.scss';\nimport App from './app.vue';\n\n$(() => {\n  // 创建并挂载Vue应用\n  const app = createApp(App);\n  app.mount('#app');\n  \n  console.info('[性斗学园] 战斗界面已加载');\n});\n\n// 卸载时清理\n$(window).on('pagehide', () => {\n  console.info('[性斗学园] 战斗界面已卸载');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","createLog","msg","source","type","id","Math","random","toString","substr","turn","message","PLAYER_SKILLS","name","description","cost","cooldown","currentCooldown","effect","user","dmg","floor","stats","charm","sexPower","currentPleasure","_target","ENEMY_SKILLS","currentEndurance","PLAYER_ITEMS","quantity","min","maxEndurance","max","CLIMAX_TEXTS","_hoisted_1","class","__name","setup","__props","dustParticles","ref","petals","onMounted","value","Array","from","length","map","_","i","left","delay","duration","scale","_ctx","_cache","particle","style","animationDelay","animationDuration","petal","transform","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","color","label","default","showValue","Boolean","size","icon","percentage","computed","innerHTML","width","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","compact","xmlns","height","viewBox","fill","stroke","points","d","baseEndurance","evasion","crit","luck","willpower","character","isEnemy","turnState","enemyIntention","phase","src","avatarUrl","alt","climaxTarget","StatsPanel","ProgressBar","maxPleasure","climaxCount","maxClimaxCount","logs","isExpanded","bottomRef","watch","nextTick","scrollIntoView","behavior","onClick","$event","log","ref_key","hover","emits","$emit","$slots","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","player","isPlayer","statusEffects","items","skills","s","baseWillpower","enemy","reactive","currentTurn","activeMenu","async","saveToMvu","Mvu","mvuData","getMvuData","message_id","updates","path","Object","entries","set","stat_data","replaceMvuData","e","console","warn","addLog","push","cloneCharacter","char","isSkillDisabled","skill","determineEnemyIntention","handleEnemyTurn","setTimeout","nextPlayer","nextEnemy","find","startNewTurn","forEach","handleClimaxResolution","action","targetIsEnemy","newChar","handleSurrender","handleRestart","window","location","reload","waitGlobalInitialized","data","get","enemyName","info","loadFromMvu","BackgroundAmbience","playerInput","processing","enemyAction","victory","defeat","climaxResolution","CharacterPanel","to","x1","y1","x2","y2","CombatLog","active","mode","Card","skillIndex","findIndex","disabled","cx","cy","r","item","itemIndex","$","createApp","mount","on"],"ignoreList":[],"sourceRoot":""}