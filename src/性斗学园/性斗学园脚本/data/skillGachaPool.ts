/**
 * 技能抽取池数据
 * 包含所有可抽取的技能，按稀有度分类
 * 只使用MVU中已有的效果类型：性斗力、忍耐力、魅力、幸运、闪避率、暴击率、束缚
 * C级: 基础技能，低消耗低伤害，无buff
 * B级: 稀有技能，中等消耗伤害，少量buff
 * A级: 精良技能，较高消耗伤害，有buff/debuff
 * S级: 传说技能，高消耗高伤害，复杂buff/debuff，可能有束缚
 * SS级: 神话技能，极高消耗极高伤害，多重复杂buff/debuff，有束缚
 */

export interface GachaSkillData {
  id: string;
  name: string;
  description: string;
  effectDescription: string;
  icon: string;
  type: string;
  rarity: 'C' | 'B' | 'A' | 'S' | 'SS';
  staminaCost: number;
  cooldown: number;
  damageSource: string;
  coefficient: number;
  accuracy: number;
  critModifier: number;
  hitCount: number;
  buffs: Array<{
    type: '性斗力' | '忍耐力' | '魅力' | '幸运' | '闪避率' | '暴击率' | '束缚';
    value: number;
    isPercent: boolean;
    duration: number;
    isTargetEnemy: boolean; // true=作用于敌人, false=作用于自己
  }>;
}

// ==================== C级技能池 ====================
export const C_RANK_SKILLS: GachaSkillData[] = [
  {
    id: 'g_c_poke',
    name: '轻戳',
    description: '【攻击】简单的戳刺动作',
    effectDescription: '造成60%性斗力伤害',
    icon: 'HandPointer',
    type: 'physical',
    rarity: 'C',
    staminaCost: 5,
    cooldown: 0,
    damageSource: '性斗力',
    coefficient: 60,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_c_tickle',
    name: '挠痒',
    description: '【攻击】让对方发痒的触碰',
    effectDescription: '造成48%性斗力伤害',
    icon: 'Hand',
    type: 'physical',
    rarity: 'C',
    staminaCost: 4,
    cooldown: 0,
    damageSource: '性斗力',
    coefficient: 48,
    accuracy: 95,
    critModifier: 5,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_c_whisper',
    name: '耳语',
    description: '【精神】在耳边轻声细语',
    effectDescription: '造成180%魅力伤害',
    icon: 'Comment',
    type: 'mental',
    rarity: 'C',
    staminaCost: 6,
    cooldown: 1,
    damageSource: '魅力',
    coefficient: 180,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_c_glance',
    name: '媚眼',
    description: '【魅力】抛一个媚眼',
    effectDescription: '造成135%魅力伤害',
    icon: 'Eye',
    type: 'charm',
    rarity: 'C',
    staminaCost: 3,
    cooldown: 0,
    damageSource: '魅力',
    coefficient: 135,
    accuracy: 90,
    critModifier: 10,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_c_caress',
    name: '轻抚',
    description: '【攻击】温柔的抚摸',
    effectDescription: '造成54%性斗力伤害',
    icon: 'HandHeart',
    type: 'physical',
    rarity: 'C',
    staminaCost: 5,
    cooldown: 0,
    damageSource: '性斗力',
    coefficient: 54,
    accuracy: 100,
    critModifier: 5,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_c_tap',
    name: '轻拍',
    description: '【攻击】轻轻拍打',
    effectDescription: '造成42%性斗力伤害',
    icon: 'Hand',
    type: 'physical',
    rarity: 'C',
    staminaCost: 3,
    cooldown: 0,
    damageSource: '性斗力',
    coefficient: 42,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_c_smile',
    name: '微笑',
    description: '【魅力】展现迷人微笑',
    effectDescription: '造成162%魅力伤害',
    icon: 'Smile',
    type: 'charm',
    rarity: 'C',
    staminaCost: 4,
    cooldown: 0,
    damageSource: '魅力',
    coefficient: 162,
    accuracy: 95,
    critModifier: 5,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_c_touch',
    name: '触碰',
    description: '【攻击】简单的触碰',
    effectDescription: '造成50%性斗力伤害',
    icon: 'Fingerprint',
    type: 'physical',
    rarity: 'C',
    staminaCost: 4,
    cooldown: 0,
    damageSource: '性斗力',
    coefficient: 50,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [],
  },
];

// ==================== B级技能池 ====================
export const B_RANK_SKILLS: GachaSkillData[] = [
  {
    id: 'g_b_nibble',
    name: '轻咬',
    description: '【攻击】在敏感处轻轻啃咬',
    effectDescription: '造成84%性斗力伤害，降低对方忍耐力10%持续2回合',
    icon: 'Teeth',
    type: 'physical',
    rarity: 'B',
    staminaCost: 10,
    cooldown: 1,
    damageSource: '性斗力',
    coefficient: 84,
    accuracy: 95,
    critModifier: 10,
    hitCount: 1,
    buffs: [{ type: '忍耐力', value: -10, isPercent: true, duration: 2 , isTargetEnemy: true }],
  },
  {
    id: 'g_b_lick',
    name: '舔舐',
    description: '【攻击】用舌头挑逗',
    effectDescription: '造成120%性斗力伤害',
    icon: 'Droplet',
    type: 'physical',
    rarity: 'B',
    staminaCost: 12,
    cooldown: 1,
    damageSource: '性斗力',
    coefficient: 120,
    accuracy: 100,
    critModifier: 5,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_b_tease_words',
    name: '调戏',
    description: '【精神】用言语调戏对方',
    effectDescription: '造成270%魅力伤害，降低对方魅力5点持续2回合',
    icon: 'MessageCircle',
    type: 'mental',
    rarity: 'B',
    staminaCost: 14,
    cooldown: 2,
    damageSource: '魅力',
    coefficient: 270,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [{ type: '魅力', value: -5, isPercent: false, duration: 2, isTargetEnemy: true }],
  },
  {
    id: 'g_b_massage_light',
    name: '按摩',
    description: '【攻击】舒适的按摩',
    effectDescription: '造成78%性斗力伤害，降低对方忍耐力10%持续2回合',
    icon: 'Droplets',
    type: 'physical',
    rarity: 'B',
    staminaCost: 15,
    cooldown: 2,
    damageSource: '性斗力',
    coefficient: 78,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [{ type: '忍耐力', value: -10, isPercent: true, duration: 2 , isTargetEnemy: true }],
  },
  {
    id: 'g_b_double_tap',
    name: '连击',
    description: '【攻击】快速的两次攻击',
    effectDescription: '造成60%性斗力伤害 x2',
    icon: 'Zap',
    type: 'physical',
    rarity: 'B',
    staminaCost: 16,
    cooldown: 2,
    damageSource: '性斗力',
    coefficient: 60,
    accuracy: 85,
    critModifier: 10,
    hitCount: 2,
    buffs: [],
  },
  {
    id: 'g_b_charm_gaze',
    name: '魅惑凝视',
    description: '【魅力】用眼神魅惑对方',
    effectDescription: '造成252%魅力伤害，降低对方闪避率8%持续2回合',
    icon: 'EyeOff',
    type: 'charm',
    rarity: 'B',
    staminaCost: 13,
    cooldown: 2,
    damageSource: '魅力',
    coefficient: 252,
    accuracy: 95,
    critModifier: 5,
    hitCount: 1,
    buffs: [{ type: '闪避率', value: -8, isPercent: true, duration: 2, isTargetEnemy: true }],
  },
  {
    id: 'g_b_pinch',
    name: '捏揉',
    description: '【攻击】用力捏揉敏感部位',
    effectDescription: '造成82%性斗力伤害',
    icon: 'Grip',
    type: 'physical',
    rarity: 'B',
    staminaCost: 11,
    cooldown: 1,
    damageSource: '性斗力',
    coefficient: 82,
    accuracy: 100,
    critModifier: 8,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_b_sweet_talk',
    name: '甜言蜜语',
    description: '【魅力】用甜美的话语诱惑',
    effectDescription: '造成288%魅力伤害',
    icon: 'Heart',
    type: 'charm',
    rarity: 'B',
    staminaCost: 15,
    cooldown: 2,
    damageSource: '魅力',
    coefficient: 288,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [],
  },
  {
    id: 'g_b_quick_strike',
    name: '快速打击',
    description: '【攻击】迅速的攻击',
    effectDescription: '造成66%性斗力伤害，提升自身闪避率5%持续1回合',
    icon: 'Zap',
    type: 'physical',
    rarity: 'B',
    staminaCost: 10,
    cooldown: 1,
    damageSource: '性斗力',
    coefficient: 66,
    accuracy: 100,
    critModifier: 12,
    hitCount: 1,
    buffs: [{ type: '闪避率', value: 5, isPercent: true, duration: 1, isTargetEnemy: false }],
  },
  {
    id: 'g_b_tease_body',
    name: '身体挑逗',
    description: '【攻击】用身体摩擦对方',
    effectDescription: '造成86%性斗力伤害',
    icon: 'User',
    type: 'physical',
    rarity: 'B',
    staminaCost: 13,
    cooldown: 1,
    damageSource: '性斗力',
    coefficient: 86,
    accuracy: 95,
    critModifier: 6,
    hitCount: 1,
    buffs: [],
  },
];

// ==================== A级技能池 ====================
export const A_RANK_SKILLS: GachaSkillData[] = [
  {
    id: 'g_a_deep_kiss',
    name: '深情之吻',
    description: '【攻击】令人窒息的深吻',
    effectDescription: '造成120%性斗力伤害，降低对方忍耐力15%持续3回合',
    icon: 'Heart',
    type: 'physical',
    rarity: 'A',
    staminaCost: 25,
    cooldown: 3,
    damageSource: '性斗力',
    coefficient: 120,
    accuracy: 90,
    critModifier: 15,
    hitCount: 1,
    buffs: [{ type: '忍耐力', value: -15, isPercent: true, duration: 3 , isTargetEnemy: true }],
  },
  {
    id: 'g_a_lucky_touch',
    name: '幸运之触',
    description: '【幸运】凭借运气的触碰',
    effectDescription: '造成120%性斗力伤害，提升自身暴击率30%持续2回合',
    icon: 'Clover',
    type: 'luck',
    rarity: 'A',
    staminaCost: 20,
    cooldown: 3,
    damageSource: '性斗力',
    coefficient: 120,
    accuracy: 80,
    critModifier: 30,
    hitCount: 1,
    buffs: [{ type: '暴击率', value: 30, isPercent: true, duration: 2 , isTargetEnemy: false }],
  },
  {
    id: 'g_a_seduce',
    name: '魅惑',
    description: '【魅力】释放强烈的魅力',
    effectDescription: '造成495%魅力伤害，降低对方性斗力20%持续3回合',
    icon: 'Sparkles',
    type: 'charm',
    rarity: 'A',
    staminaCost: 28,
    cooldown: 4,
    damageSource: '魅力',
    coefficient: 495,
    accuracy: 95,
    critModifier: 10,
    hitCount: 1,
    buffs: [{ type: '性斗力', value: -20, isPercent: true, duration: 3 , isTargetEnemy: true }],
  },
  {
    id: 'g_a_triple_strike',
    name: '三连击',
    description: '【攻击】快速的三次攻击',
    effectDescription: '造成54%性斗力伤害 x3',
    icon: 'Flame',
    type: 'physical',
    rarity: 'A',
    staminaCost: 30,
    cooldown: 3,
    damageSource: '性斗力',
    coefficient: 54,
    accuracy: 80,
    critModifier: 15,
    hitCount: 3,
    buffs: [],
  },
  {
    id: 'g_a_weaken',
    name: '虚弱诅咒',
    description: '【精神】削弱对方的力量',
    effectDescription: '造成450%魅力伤害，降低对方性斗力25%和忍耐力15%持续3回合',
    icon: 'Frown',
    type: 'mental',
    rarity: 'A',
    staminaCost: 32,
    cooldown: 4,
    damageSource: '魅力',
    coefficient: 450,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [
      { type: '性斗力', value: -25, isPercent: true, duration: 3 , isTargetEnemy: true },
      { type: '忍耐力', value: -15, isPercent: true, duration: 3 , isTargetEnemy: true },
    ],
  },
  {
    id: 'g_a_fortune_strike',
    name: '命运一击',
    description: '【幸运】命运眷顾的一击',
    effectDescription: '造成96%性斗力伤害，提升自身幸运15点持续2回合',
    icon: 'Star',
    type: 'luck',
    rarity: 'A',
    staminaCost: 22,
    cooldown: 3,
    damageSource: '性斗力',
    coefficient: 96,
    accuracy: 85,
    critModifier: 50,
    hitCount: 1,
    buffs: [{ type: '幸运', value: 15, isPercent: false, duration: 2 , isTargetEnemy: false }],
  },
  {
    id: 'g_a_charm_burst',
    name: '魅力爆发',
    description: '【魅力】释放全部魅力',
    effectDescription: '造成585%魅力伤害，提升自身魅力10点持续2回合',
    icon: 'Sparkle',
    type: 'charm',
    rarity: 'A',
    staminaCost: 30,
    cooldown: 4,
    damageSource: '魅力',
    coefficient: 585,
    accuracy: 100,
    critModifier: 8,
    hitCount: 1,
    buffs: [{ type: '魅力', value: 10, isPercent: false, duration: 2 , isTargetEnemy: false }],
  },
  {
    id: 'g_a_power_strike',
    name: '力量打击',
    description: '【攻击】全力的一击',
    effectDescription: '造成144%性斗力伤害，提升自身性斗力20%持续2回合',
    icon: 'Dumbbell',
    type: 'physical',
    rarity: 'A',
    staminaCost: 28,
    cooldown: 3,
    damageSource: '性斗力',
    coefficient: 144,
    accuracy: 85,
    critModifier: 20,
    hitCount: 1,
    buffs: [{ type: '性斗力', value: 20, isPercent: true, duration: 2 , isTargetEnemy: false }],
  },
  {
    id: 'g_a_dodge_master',
    name: '闪避大师',
    description: '【辅助】提升闪避能力',
    effectDescription: '造成72%性斗力伤害，提升自身闪避率25%持续3回合',
    icon: 'Wind',
    type: 'support',
    rarity: 'A',
    staminaCost: 20,
    cooldown: 4,
    damageSource: '性斗力',
    coefficient: 72,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [{ type: '闪避率', value: 25, isPercent: true, duration: 3 , isTargetEnemy: false }],
  },
  {
    id: 'g_a_crit_focus',
    name: '致命专注',
    description: '【辅助】集中精神寻找弱点',
    effectDescription: '造成84%性斗力伤害，提升自身暴击率35%持续2回合',
    icon: 'Target',
    type: 'support',
    rarity: 'A',
    staminaCost: 22,
    cooldown: 3,
    damageSource: '性斗力',
    coefficient: 84,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [{ type: '暴击率', value: 35, isPercent: true, duration: 2 , isTargetEnemy: false }],
  },
  {
    id: 'g_a_quad_strike',
    name: '四连击',
    description: '【攻击】连续四次攻击',
    effectDescription: '造成42%性斗力伤害 x4',
    icon: 'Zap',
    type: 'physical',
    rarity: 'A',
    staminaCost: 32,
    cooldown: 4,
    damageSource: '性斗力',
    coefficient: 42,
    accuracy: 75,
    critModifier: 18,
    hitCount: 4,
    buffs: [],
  },
  {
    id: 'g_a_charm_drain',
    name: '魅力吸取',
    description: '【魅力】吸取对方的魅力',
    effectDescription: '造成495%魅力伤害，降低对方魅力10点并提升自身魅力5点持续3回合',
    icon: 'ArrowDownUp',
    type: 'charm',
    rarity: 'A',
    staminaCost: 26,
    cooldown: 4,
    damageSource: '魅力',
    coefficient: 495,
    accuracy: 90,
    critModifier: 5,
    hitCount: 1,
    buffs: [
      { type: '魅力', value: -10, isPercent: false, duration: 3 , isTargetEnemy: true },
      { type: '魅力', value: 5, isPercent: false, duration: 3 , isTargetEnemy: false },
    ],
  },
];

// ==================== S级技能池 ====================
export const S_RANK_SKILLS: GachaSkillData[] = [
  {
    id: 'g_s_dominate',
    name: '支配',
    description: '【控制】完全支配对方',
    effectDescription: '造成144%性斗力伤害，束缚2回合，降低对方闪避率40%和忍耐力25%',
    icon: 'Crown',
    type: 'control',
    rarity: 'S',
    staminaCost: 40,
    cooldown: 5,
    damageSource: '性斗力',
    coefficient: 144,
    accuracy: 85,
    critModifier: 10,
    hitCount: 1,
    buffs: [
      { type: '束缚', value: 0, isPercent: false, duration: 2 , isTargetEnemy: true },
      { type: '闪避率', value: -40, isPercent: true, duration: 2 , isTargetEnemy: true },
      { type: '忍耐力', value: -25, isPercent: true, duration: 2 , isTargetEnemy: true },
    ]},
  {
    id: 'g_s_ultimate_pleasure',
    name: '极乐',
    description: '【攻击】带来极致快感',
    effectDescription: '造成180%性斗力伤害，降低对方性斗力30%和忍耐力20%持续3回合',
    icon: 'Flame',
    type: 'physical',
    rarity: 'S',
    staminaCost: 45,
    cooldown: 5,
    damageSource: '性斗力',
    coefficient: 180,
    accuracy: 90,
    critModifier: 20,
    hitCount: 1,
    buffs: [
      { type: '性斗力', value: -30, isPercent: true, duration: 3 , isTargetEnemy: true },
      { type: '忍耐力', value: -20, isPercent: true, duration: 3 , isTargetEnemy: true },
    ],
  },
  {
    id: 'g_s_lucky_seven',
    name: '幸运七连',
    description: '【幸运】七次幸运攻击',
    effectDescription: '造成30%性斗力伤害 x7，提升自身暴击率15%持续2回合',
    icon: 'Dice',
    type: 'luck',
    rarity: 'S',
    staminaCost: 50,
    cooldown: 6,
    damageSource: '性斗力',
    coefficient: 30,
    accuracy: 70,
    critModifier: 35,
    hitCount: 7,
    buffs: [{ type: '暴击率', value: 15, isPercent: true, duration: 2 , isTargetEnemy: false }],
  },
  {
    id: 'g_s_total_breakdown',
    name: '全面崩溃',
    description: '【精神】摧毁对方的意志',
    effectDescription: '造成720%魅力伤害，降低对方性斗力35%、忍耐力25%、魅力15点持续4回合',
    icon: 'Brain',
    type: 'mental',
    rarity: 'S',
    staminaCost: 48,
    cooldown: 6,
    damageSource: '魅力',
    coefficient: 720,
    accuracy: 95,
    critModifier: 10,
    hitCount: 1,
    buffs: [
      { type: '性斗力', value: -35, isPercent: true, duration: 4 , isTargetEnemy: true },
      { type: '忍耐力', value: -25, isPercent: true, duration: 4 , isTargetEnemy: true },
      { type: '魅力', value: -15, isPercent: false, duration: 4 , isTargetEnemy: true },
    ],
  },
  {
    id: 'g_s_bind_chain',
    name: '锁链束缚',
    description: '【控制】用锁链完全束缚',
    effectDescription: '造成96%性斗力伤害，束缚3回合，降低对方闪避率60%',
    icon: 'Link',
    type: 'control',
    rarity: 'S',
    staminaCost: 42,
    cooldown: 6,
    damageSource: '性斗力',
    coefficient: 96,
    accuracy: 80,
    critModifier: 0,
    hitCount: 1,
    buffs: [
      { type: '束缚', value: 0, isPercent: false, duration: 3 , isTargetEnemy: true },
      { type: '闪避率', value: -60, isPercent: true, duration: 3 , isTargetEnemy: true },
    ]},
  {
    id: 'g_s_power_boost',
    name: '力量觉醒',
    description: '【辅助】觉醒潜在力量',
    effectDescription: '造成120%性斗力伤害，提升自身性斗力40%、暴击率25%持续3回合',
    icon: 'Zap',
    type: 'support',
    rarity: 'S',
    staminaCost: 38,
    cooldown: 5,
    damageSource: '性斗力',
    coefficient: 120,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [
      { type: '性斗力', value: 40, isPercent: true, duration: 3 , isTargetEnemy: false },
      { type: '暴击率', value: 25, isPercent: true, duration: 3 , isTargetEnemy: false },
    ],
  },
  {
    id: 'g_s_charm_explosion',
    name: '魅力爆炸',
    description: '【魅力】魅力的终极释放',
    effectDescription: '造成810%魅力伤害，提升自身魅力20点持续3回合',
    icon: 'Sparkles',
    type: 'charm',
    rarity: 'S',
    staminaCost: 46,
    cooldown: 5,
    damageSource: '魅力',
    coefficient: 810,
    accuracy: 100,
    critModifier: 15,
    hitCount: 1,
    buffs: [{ type: '魅力', value: 20, isPercent: false, duration: 3 , isTargetEnemy: false }],
  },
  {
    id: 'g_s_perfect_dodge',
    name: '完美闪避',
    description: '【辅助】达到闪避的极致',
    effectDescription: '造成84%性斗力伤害，提升自身闪避率45%持续4回合',
    icon: 'Wind',
    type: 'support',
    rarity: 'S',
    staminaCost: 35,
    cooldown: 6,
    damageSource: '性斗力',
    coefficient: 84,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [{ type: '闪避率', value: 45, isPercent: true, duration: 4 , isTargetEnemy: false }],
  },
  {
    id: 'g_s_luck_burst',
    name: '幸运爆发',
    description: '【幸运】幸运的极致',
    effectDescription: '造成132%性斗力伤害，提升自身幸运25点、暴击率30%持续3回合',
    icon: 'Star',
    type: 'luck',
    rarity: 'S',
    staminaCost: 40,
    cooldown: 5,
    damageSource: '性斗力',
    coefficient: 132,
    accuracy: 90,
    critModifier: 40,
    hitCount: 1,
    buffs: [
      { type: '幸运', value: 25, isPercent: false, duration: 3 , isTargetEnemy: false },
      { type: '暴击率', value: 30, isPercent: true, duration: 3 , isTargetEnemy: false },
    ],
  },
  {
    id: 'g_s_five_strike',
    name: '五连击',
    description: '【攻击】连续五次攻击',
    effectDescription: '造成36%性斗力伤害 x5',
    icon: 'Zap',
    type: 'physical',
    rarity: 'S',
    staminaCost: 44,
    cooldown: 5,
    damageSource: '性斗力',
    coefficient: 36,
    accuracy: 75,
    critModifier: 22,
    hitCount: 5,
    buffs: [],
  },
];

// ==================== SS级技能池 ====================
export const SS_RANK_SKILLS: GachaSkillData[] = [
  {
    id: 'g_ss_absolute_control',
    name: '绝对支配',
    description: '【终结】完全掌控对方身心',
    effectDescription: '造成240%性斗力伤害，束缚3回合，降低对方性斗力40%、忍耐力30%、闪避率50%',
    icon: 'Skull',
    type: 'ultimate',
    rarity: 'SS',
    staminaCost: 60,
    cooldown: 8,
    damageSource: '性斗力',
    coefficient: 240,
    accuracy: 90,
    critModifier: 25,
    hitCount: 1,
    buffs: [
      { type: '束缚', value: 0, isPercent: false, duration: 3 , isTargetEnemy: true },
      { type: '性斗力', value: -40, isPercent: true, duration: 4 , isTargetEnemy: true },
      { type: '忍耐力', value: -30, isPercent: true, duration: 4 , isTargetEnemy: true },
      { type: '闪避率', value: -50, isPercent: true, duration: 4 , isTargetEnemy: true },
    ]},
  {
    id: 'g_ss_divine_pleasure',
    name: '神圣快感',
    description: '【终结】带来神级的快感体验',
    effectDescription: '造成300%性斗力伤害，降低对方性斗力50%、忍耐力40%持续5回合',
    icon: 'Sun',
    type: 'ultimate',
    rarity: 'SS',
    staminaCost: 65,
    cooldown: 8,
    damageSource: '性斗力',
    coefficient: 300,
    accuracy: 95,
    critModifier: 30,
    hitCount: 1,
    buffs: [
      { type: '性斗力', value: -50, isPercent: true, duration: 5 , isTargetEnemy: true },
      { type: '忍耐力', value: -40, isPercent: true, duration: 5 , isTargetEnemy: true },
    ],
  },
  {
    id: 'g_ss_fate_roulette',
    name: '命运轮盘',
    description: '【幸运】命运的终极审判',
    effectDescription: '造成36%性斗力伤害 x10，提升自身暴击率20%、幸运15点持续3回合',
    icon: 'CircleDot',
    type: 'luck',
    rarity: 'SS',
    staminaCost: 70,
    cooldown: 9,
    damageSource: '性斗力',
    coefficient: 36,
    accuracy: 75,
    critModifier: 40,
    hitCount: 10,
    buffs: [
      { type: '暴击率', value: 20, isPercent: true, duration: 3 , isTargetEnemy: false },
      { type: '幸运', value: 15, isPercent: false, duration: 3 , isTargetEnemy: false },
    ],
  },
  {
    id: 'g_ss_ultimate_destruction',
    name: '终极毁灭',
    description: '【终结】彻底击溃对方',
    effectDescription: '造成900%魅力伤害，降低对方性斗力45%、忍耐力35%、魅力25点、闪避率40%持续5回合',
    icon: 'Ghost',
    type: 'ultimate',
    rarity: 'SS',
    staminaCost: 75,
    cooldown: 10,
    damageSource: '魅力',
    coefficient: 900,
    accuracy: 100,
    critModifier: 20,
    hitCount: 1,
    buffs: [
      { type: '性斗力', value: -45, isPercent: true, duration: 5 , isTargetEnemy: true },
      { type: '忍耐力', value: -35, isPercent: true, duration: 5 , isTargetEnemy: true },
      { type: '魅力', value: -25, isPercent: false, duration: 5 , isTargetEnemy: true },
      { type: '闪避率', value: -40, isPercent: true, duration: 5 , isTargetEnemy: true },
    ],
  },
  {
    id: 'g_ss_eternal_bind',
    name: '永恒束缚',
    description: '【控制】无法逃脱的永恒束缚',
    effectDescription: '造成120%性斗力伤害，束缚4回合，降低对方闪避率80%、性斗力35%',
    icon: 'Lock',
    type: 'control',
    rarity: 'SS',
    staminaCost: 68,
    cooldown: 10,
    damageSource: '性斗力',
    coefficient: 120,
    accuracy: 85,
    critModifier: 0,
    hitCount: 1,
    buffs: [
      { type: '束缚', value: 0, isPercent: false, duration: 4 , isTargetEnemy: true },
      { type: '闪避率', value: -80, isPercent: true, duration: 5 , isTargetEnemy: true },
      { type: '性斗力', value: -35, isPercent: true, duration: 5 , isTargetEnemy: true },
    ]},
  {
    id: 'g_ss_god_mode',
    name: '神之领域',
    description: '【终结】进入神的境界',
    effectDescription: '造成216%性斗力伤害，提升自身性斗力60%、魅力30点、暴击率40%、闪避率35%持续4回合',
    icon: 'Crown',
    type: 'ultimate',
    rarity: 'SS',
    staminaCost: 72,
    cooldown: 9,
    damageSource: '性斗力',
    coefficient: 216,
    accuracy: 100,
    critModifier: 0,
    hitCount: 1,
    buffs: [
      { type: '性斗力', value: 60, isPercent: true, duration: 4 , isTargetEnemy: false },
      { type: '魅力', value: 30, isPercent: false, duration: 4 , isTargetEnemy: false },
      { type: '暴击率', value: 40, isPercent: true, duration: 4 , isTargetEnemy: false },
      { type: '闪避率', value: 35, isPercent: true, duration: 4 , isTargetEnemy: false },
    ],
  },
  {
    id: 'g_ss_charm_domination',
    name: '魅力统治',
    description: '【终结】用魅力统治一切',
    effectDescription: '造成1080%魅力伤害，提升自身魅力35点、降低对方魅力30点持续5回合',
    icon: 'Sparkles',
    type: 'ultimate',
    rarity: 'SS',
    staminaCost: 78,
    cooldown: 10,
    damageSource: '魅力',
    coefficient: 1080,
    accuracy: 100,
    critModifier: 25,
    hitCount: 1,
    buffs: [
      { type: '魅力', value: 35, isPercent: false, duration: 5 , isTargetEnemy: false },
      { type: '魅力', value: -30, isPercent: false, duration: 5 , isTargetEnemy: true },
    ],
  },
  {
    id: 'g_ss_ultimate_luck',
    name: '终极幸运',
    description: '【幸运】幸运的终极形态',
    effectDescription: '造成180%性斗力伤害，提升自身幸运40点、暴击率50%、闪避率30%持续4回合',
    icon: 'Star',
    type: 'luck',
    rarity: 'SS',
    staminaCost: 66,
    cooldown: 9,
    damageSource: '性斗力',
    coefficient: 180,
    accuracy: 95,
    critModifier: 60,
    hitCount: 1,
    buffs: [
      { type: '幸运', value: 40, isPercent: false, duration: 4 , isTargetEnemy: false },
      { type: '暴击率', value: 50, isPercent: true, duration: 4 , isTargetEnemy: false },
      { type: '闪避率', value: 30, isPercent: true, duration: 4 , isTargetEnemy: false },
    ],
  },
];

// 抽取概率配置
export const GACHA_RATES = {
  C: 50,   // 50%
  B: 30,   // 30%
  A: 17.5, // 17.5% 
  S: 2,    // 2% 
  SS: 0.5, // 0.5% 
};

// 获取所有技能池
export function getAllSkillPools() {
  return {
    C: C_RANK_SKILLS,
    B: B_RANK_SKILLS,
    A: A_RANK_SKILLS,
    S: S_RANK_SKILLS,
    SS: SS_RANK_SKILLS,
  };
}

// 根据概率抽取稀有度
export function rollRarity(): 'C' | 'B' | 'A' | 'S' | 'SS' {
  const roll = Math.random() * 100;
  let cumulative = 0;
  
  for (const [rarity, rate] of Object.entries(GACHA_RATES)) {
    cumulative += rate;
    if (roll < cumulative) {
      return rarity as 'C' | 'B' | 'A' | 'S' | 'SS';
    }
  }
  
  return 'C';
}

// 从指定稀有度池中随机抽取一个技能
export function rollSkillFromPool(rarity: 'C' | 'B' | 'A' | 'S' | 'SS'): GachaSkillData {
  const pools = getAllSkillPools();
  const pool = pools[rarity];
  const index = Math.floor(Math.random() * pool.length);
  return pool[index];
}

// 执行单次抽取
export function performSingleGacha(): GachaSkillData {
  const rarity = rollRarity();
  return rollSkillFromPool(rarity);
}

// 执行十连抽取（保底至少一个A级）
export function performTenGacha(): GachaSkillData[] {
  const results: GachaSkillData[] = [];
  let hasAOrAbove = false;
  
  for (let i = 0; i < 10; i++) {
    const skill = performSingleGacha();
    results.push(skill);
    if (skill.rarity === 'A' || skill.rarity === 'S' || skill.rarity === 'SS') {
      hasAOrAbove = true;
    }
  }
  
  // 保底：如果没有A级及以上，最后一个替换为A级
  if (!hasAOrAbove) {
    results[9] = rollSkillFromPool('A');
  }
  
  return results;
}
